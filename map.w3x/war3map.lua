udg_PressESC = false
udg_PressESCYETTY = false
udg_SHlop = nil
udg_HERO = nil
udg_QNudeFriend = nil
udg_QStarAnime = nil
udg_QYetty = nil
udg_QWolf = nil
udg_QWine = nil
udg_QDragon = nil
udg_QWiverna = nil
udg_QCHKPoint = nil
udg_WisDead = false
udg_SkipDragon = false
udg_QSnowMan = nil
udg_SkipMerchCinematic = false
udg_Buttons = {}
udg_CurrentOrder = 0
udg_SpikeUnitsForRemove = nil
udg_Remove08 = nil
udg_HoleIsWork = false
udg_IsBrainGame = false
udg_WolfIsDie = false
udg_QPodval = nil
udg_Remove15 = nil
udg_Remove09 = nil
udg_SkipWolfFact = false
gg_rct_Region_038 = nil
gg_rct_Region_024 = nil
gg_rct_TrapZone = nil
gg_rct_EnterTrap = nil
gg_rct_ExitTrap = nil
gg_rct_ExitTrapZone = nil
gg_rct_Region_004 = nil
gg_rct_BossDrakon = nil
gg_rct_InitStartDragon = nil
gg_rct_Towolf = nil
gg_rct_FromWolf = nil
gg_rct_ExitWolf = nil
gg_rct_EnterWolf = nil
gg_rct_EnterWivern = nil
gg_rct_Region_012 = nil
gg_rct_Region_013 = nil
gg_rct_Enter2Arena = nil
gg_rct_ExitArena = nil
gg_rct_AnimBossEnter = nil
gg_rct_AnimBossStart = nil
gg_rct_AIStartBoss = nil
gg_rct_Region_019 = nil
gg_rct_Region_020 = nil
gg_rct_Region_021 = nil
gg_rct_Region_022 = nil
gg_rct_Region_023 = nil
gg_rct_Boind00 = nil
gg_rct_Exit00 = nil
gg_rct_Enter00 = nil
gg_rct_StartBrainGame = nil
gg_rct_Boind01 = nil
gg_rct_Enter01 = nil
gg_rct_Exit01 = nil
gg_rct_Boind02 = nil
gg_rct_Enter02 = nil
gg_rct_Exit02 = nil
gg_rct_Boind03 = nil
gg_rct_Enter03 = nil
gg_rct_Exit03 = nil
gg_rct_Boind04 = nil
gg_rct_Enter04 = nil
gg_rct_Exit04 = nil
gg_rct_Bound05 = nil
gg_rct_Enter05 = nil
gg_rct_Exit05 = nil
gg_rct_Bound06 = nil
gg_rct_Enter06 = nil
gg_rct_Exit06 = nil
gg_rct_Bound07 = nil
gg_rct_Enter07 = nil
gg_rct_Exit07 = nil
gg_rct_SpikesZone = nil
gg_rct_Enter08 = nil
gg_rct_Exit08 = nil
gg_rct_Region08 = nil
gg_rct_Bound08 = nil
gg_rct_Bound08Start = nil
gg_rct_ResizePlace08 = nil
gg_rct_Region04 = nil
gg_rct_Bound09 = nil
gg_rct_Enter09 = nil
gg_rct_Exit09 = nil
gg_rct_Bound10 = nil
gg_rct_Enter10 = nil
gg_rct_Exit10 = nil
gg_rct_Bound11 = nil
gg_rct_Enter11 = nil
gg_rct_Exit11 = nil
gg_rct_Region11 = nil
gg_rct_R11B1_0 = nil
gg_rct_Start11_0 = nil
gg_rct_Start11_1 = nil
gg_rct_Start11_2 = nil
gg_rct_Start11_3 = nil
gg_rct_R11B1_1 = nil
gg_rct_R11B1_2 = nil
gg_rct_R11B2_0 = nil
gg_rct_R11B2_1 = nil
gg_rct_R11B3_0 = nil
gg_rct_R11B3_1 = nil
gg_rct_R11B1_4 = nil
gg_rct_R11B1_3 = nil
gg_rct_Start11_4 = nil
gg_rct_Start11_5 = nil
gg_rct_BoundBoss = nil
gg_rct_EnterBoss = nil
gg_rct_ExitBoss = nil
gg_rct_Bound12 = nil
gg_rct_Enter12 = nil
gg_rct_Exit12 = nil
gg_rct_Start12 = nil
gg_rct_Start13 = nil
gg_rct_Bound13 = nil
gg_rct_Enter13 = nil
gg_rct_Exit13 = nil
gg_rct_Region13 = nil
gg_rct_Error10 = nil
gg_rct_Error10Out = nil
gg_rct_Patrol12 = nil
gg_rct_BossBarelSpawn = nil
gg_rct_Region14 = nil
gg_rct_Enter14 = nil
gg_rct_Exit14 = nil
gg_rct_Bound14 = nil
gg_rct_R14B1 = nil
gg_rct_R14B2 = nil
gg_rct_R14B3 = nil
gg_rct_UP14 = nil
gg_rct_Bound15 = nil
gg_rct_Enter15 = nil
gg_rct_Exit15 = nil
gg_rct_Error15Out = nil
gg_rct_Region09 = nil
gg_cam_OnPeonsandTrall = nil
gg_cam_OnPineRound = nil
gg_cam_OnPeons = nil
gg_cam_MindPeon = nil
gg_cam_TrallSteal = nil
gg_cam_Vine = nil
gg_cam_ResetCam = nil
gg_cam_LookYetty = nil
gg_cam_PeonLookOnYetty = nil
gg_cam_PeonReadyToYetty = nil
gg_cam_PeonLookOnPrise = nil
gg_cam_NydePeon = nil
gg_cam_LookAnime = nil
gg_cam_WolfEnd = nil
gg_cam_SeeOnWolf = nil
gg_cam_TalkMerch = nil
gg_cam_InPeonHome = nil
gg_cam_TavernaEnd = nil
gg_snd_Intro1 = nil
gg_snd_Intro2 = nil
gg_snd_Intro3 = nil
gg_snd_Intro4 = nil
gg_snd_Intro5 = nil
gg_snd_Intro6 = nil
gg_snd_Intro7 = nil
gg_snd_Intro8 = nil
gg_snd_Intro9 = nil
gg_snd_Intro10 = nil
gg_snd_Intro11 = nil
gg_snd_peon1 = nil
gg_snd_peon2 = nil
gg_snd_peon3 = nil
gg_snd_Hlop = nil
gg_snd_fyyachtoetozazvyki = nil
gg_snd_oanenashilietopodarki = nil
gg_snd_15 = nil
gg_snd_16 = nil
gg_snd_animepeon1 = nil
gg_snd_animepeon2 = nil
gg_snd_animepeon3 = nil
gg_snd_animeZurck1 = nil
gg_snd_animeZurck2 = nil
gg_snd_PenFromWolf1 = nil
gg_snd_PenFromWolf2 = nil
gg_snd_PenFromWolf3 = nil
gg_snd_PenFromWolf4 = nil
gg_snd_PenFromWolf5 = nil
gg_snd_PenFromWolf6 = nil
gg_snd_WolfCinematic1 = nil
gg_snd_WolfCinematic2 = nil
gg_snd_WolfCinematic3 = nil
gg_snd_cook1 = nil
gg_snd_cook2 = nil
gg_snd_cook3 = nil
gg_snd_cook4 = nil
gg_snd_CookQuestPeon1 = nil
gg_snd_CookQuestPeon2 = nil
gg_snd_CookQuestPeon3 = nil
gg_snd_cook5 = nil
gg_snd_CookQuestPeon4 = nil
gg_snd_Warning = nil
gg_snd_BattlenetDeath1A = nil
gg_snd_The_Astral_Academy_Gardens = ""
gg_snd_OT1 = nil
gg_snd_OT2 = nil
gg_snd_OP1 = nil
gg_snd_OP2 = nil
gg_snd_OP3 = nil
gg_snd_OT3 = nil
gg_snd_OT4 = nil
gg_trg_Error15Out = nil
gg_trg_Error15OutNAZAR = nil
gg_trg_Victory15 = nil
gg_trg_ExitFrom15 = nil
gg_trg_InitRoom15 = nil
gg_trg_InitRoom14 = nil
gg_trg_Leave14Fix = nil
gg_trg_ExitFrom14 = nil
gg_trg_Victory14 = nil
gg_trg_InitRoom13 = nil
gg_trg_Victory13 = nil
gg_trg_ExitFrom13 = nil
gg_trg_Leave13Fix = nil
gg_trg_InitRoom12 = nil
gg_trg_PlatformUp12 = nil
gg_trg_Single12 = nil
gg_trg_Victory12 = nil
gg_trg_Restore12 = nil
gg_trg_ExitFrom12 = nil
gg_trg_Patrol12 = nil
gg_trg_Button1101 = nil
gg_trg_Button1102 = nil
gg_trg_Button1103 = nil
gg_trg_Button1101Restore = nil
gg_trg_Button1102Restore = nil
gg_trg_Button1103Restore = nil
gg_trg_Victory = nil
gg_trg_CreateFoorInRoom11 = nil
gg_trg_InitRoom11DownForRegion = nil
gg_trg_ExitFrom11 = nil
gg_trg_Out11 = nil
gg_trg_ExitFrom10 = nil
gg_trg_Victory10 = nil
gg_trg_Error10In = nil
gg_trg_Error10Out = nil
gg_trg_ExitFrom09 = nil
gg_trg_InitRoom09 = nil
gg_trg_Victory09 = nil
gg_trg_OffHole = nil
gg_trg_InitCustomTraps = nil
gg_trg_ExitFrom08 = nil
gg_trg_Resize08 = nil
gg_trg_Victory08 = nil
gg_trg_ExitFrom07 = nil
gg_trg_InitOrders = nil
gg_trg_DieCHK = nil
gg_trg_ErrorClear = nil
gg_trg_ExitFrom06 = nil
gg_trg_Victory06 = nil
gg_trg_InvulPudges = nil
gg_trg_ExitFrom05 = nil
gg_trg_Victory05 = nil
gg_trg_Init04 = nil
gg_trg_ExitFrom04 = nil
gg_trg_Victory04 = nil
gg_trg_ExitFrom03 = nil
gg_trg_Victory03 = nil
gg_trg_ExitFrom02 = nil
gg_trg_Victory02 = nil
gg_trg_ExitFrom01 = nil
gg_trg_Victory01 = nil
gg_trg_ExitFrom00 = nil
gg_trg_Victory00 = nil
gg_trg_StartBrainGame = nil
gg_trg_SpawnBarrel = nil
gg_trg_InitBossRoom = nil
gg_trg_EndSinematicStart = nil
gg_trg_EnterAnimeArena = nil
gg_trg_ExitAnimeArena = nil
gg_trg_InitAnimeArena = nil
gg_trg_NudeCinematic = nil
gg_trg_SkipNude = nil
gg_trg_DeathNudeFriend = nil
gg_trg_InitYetty = nil
gg_trg_StartYettyCinematic = nil
gg_trg_SkipYetty = nil
gg_trg_InitEggs = nil
gg_trg_Task = nil
gg_trg_WisDead = nil
gg_trg_InitMerchantQuest = nil
gg_trg_MerchQuestCinematic = nil
gg_trg_MerchEndCinematic1 = nil
gg_trg_SkipMerchCinematic = nil
gg_trg_EndBoss = nil
gg_trg_StartDragonCinematic = nil
gg_trg_SkipDragon = nil
gg_trg_Cum = nil
gg_trg_FromWolfCave = nil
gg_trg_ExitWolf = nil
gg_trg_ExitOnWolf = nil
gg_trg_DeathWolf = nil
gg_trg_WolfCinematic = nil
gg_trg_SkipWolf = nil
gg_trg_SkipWolfESC = nil
gg_trg_BoundEnter = nil
gg_trg_BoundEnterOnce = nil
gg_trg_Exit = nil
gg_trg_InitGUI = nil
gg_trg_StartIntro = nil
gg_trg_SkipIntro = nil
gg_trg_ESCTEST = nil
gg_unit_n001_0009 = nil
gg_unit_h006_0002 = nil
gg_unit_n000_0001 = nil
gg_unit_Oths_0011 = nil
gg_unit_opeo_0013 = nil
gg_unit_opeo_0014 = nil
gg_unit_opeo_0015 = nil
gg_unit_opeo_0024 = nil
gg_unit_n002_0045 = nil
gg_unit_u000_0005 = nil
gg_unit_h006_0172 = nil
gg_unit_h006_0173 = nil
gg_unit_h007_0171 = nil
gg_unit_o002_0203 = nil
gg_unit_h009_0197 = nil
gg_unit_h00J_0594 = nil
gg_unit_h00E_0217 = nil
gg_unit_h00E_0216 = nil
gg_unit_h00B_0003 = nil
gg_unit_h00B_0271 = nil
gg_unit_h00B_0276 = nil
gg_unit_u001_0395 = nil
gg_unit_u001_0396 = nil
gg_unit_h00I_0601 = nil
gg_unit_h00M_0257 = nil
gg_unit_h00H_0590 = nil
gg_unit_h00H_0569 = nil
gg_unit_h00H_0588 = nil
gg_unit_h00H_0589 = nil
gg_unit_h00J_0591 = nil
gg_unit_h00J_0592 = nil
gg_unit_h00J_0593 = nil
gg_unit_h00J_0595 = nil
gg_unit_opeo_0264 = nil
gg_unit_h00R_0259 = nil
gg_unit_h00W_0785 = nil
gg_unit_h00W_0775 = nil
gg_unit_h00W_0784 = nil
gg_dest_B004_2162 = nil
gg_dest_B007_5312 = nil
gg_dest_DTfx_5091 = nil
gg_dest_DTfx_14833 = nil
gg_dest_DTfx_14834 = nil
gg_dest_DTfx_14832 = nil
gg_dest_B00B_14785 = nil
gg_dest_DTfx_14690 = nil
gg_dest_DTfx_14688 = nil
gg_dest_B00B_14732 = nil
gg_dest_DTfx_15068 = nil
gg_dest_B00E_19723 = nil
gg_dest_DTfx_15314 = nil
gg_dest_DTfx_15071 = nil
gg_dest_B00B_15274 = nil
gg_dest_B00B_15515 = nil
gg_dest_B00E_15517 = nil
gg_dest_B00E_15513 = nil
gg_dest_B00E_15516 = nil
gg_dest_B00E_15514 = nil
gg_dest_B00D_15532 = nil
gg_dest_B00D_15710 = nil
gg_dest_B00D_15711 = nil
gg_dest_B00D_15712 = nil
gg_dest_B00B_15713 = nil
gg_dest_B00D_15709 = nil
gg_dest_B00D_20643 = nil
gg_dest_B00D_16257 = nil
gg_dest_B00B_16153 = nil
gg_dest_B00D_16254 = nil
gg_dest_B00D_16255 = nil
gg_dest_B00D_16256 = nil
gg_dest_B00D_16427 = nil
gg_dest_B00F_17534 = nil
gg_dest_B00B_17533 = nil
gg_dest_B00D_17532 = nil
gg_dest_B00D_16416 = nil
gg_dest_B00D_16421 = nil
gg_dest_B00D_16426 = nil
gg_dest_B00D_16685 = nil
gg_dest_B00B_16430 = nil
gg_dest_B00D_16596 = nil
gg_dest_B00D_16597 = nil
gg_dest_B00D_16598 = nil
gg_dest_B00D_16599 = nil
gg_dest_B00D_16686 = nil
gg_dest_B00D_16684 = nil
gg_dest_B00E_19642 = nil
gg_dest_B00B_16680 = nil
gg_dest_B00D_16699 = nil
gg_dest_B00D_16701 = nil
gg_dest_B00D_16702 = nil
gg_dest_B00D_18193 = nil
gg_dest_B00D_17155 = nil
gg_dest_B00D_17276 = nil
gg_dest_B00D_17275 = nil
gg_dest_B00B_17182 = nil
gg_dest_B00D_17529 = nil
gg_dest_B00D_17530 = nil
gg_dest_B00D_17531 = nil
gg_dest_B00D_17596 = nil
gg_dest_B00D_17597 = nil
gg_dest_B00B_17599 = nil
gg_dest_DTfx_17980 = nil
gg_dest_DTfx_16046 = nil
gg_dest_DTfx_16051 = nil
gg_dest_B00B_16092 = nil
gg_dest_DTfx_18124 = nil
gg_dest_B00D_18148 = nil
gg_dest_B00D_18157 = nil
gg_dest_B00D_18184 = nil
gg_dest_B00D_19707 = nil
gg_dest_B00E_19641 = nil
gg_dest_B00B_19643 = nil
gg_dest_B00D_19706 = nil
gg_dest_B00B_20321 = nil
gg_dest_B00D_20363 = nil
gg_dest_B00D_20364 = nil
gg_dest_B00D_20365 = nil
gg_dest_B00D_20366 = nil
gg_dest_B00D_20367 = nil
gg_dest_B00D_20368 = nil
gg_dest_B00B_20775 = nil
gg_dest_B00D_20784 = nil
gg_dest_B00D_20785 = nil
gg_dest_B00D_20786 = nil
gg_dest_B00D_20787 = nil
gg_dest_B00D_20788 = nil
gg_dest_B00B_21136 = nil
function InitGlobals()
local i = 0

udg_PressESC = false
udg_PressESCYETTY = false
udg_WisDead = false
udg_SkipDragon = false
udg_SkipMerchCinematic = false
udg_CurrentOrder = 1
udg_SpikeUnitsForRemove = CreateGroup()
udg_Remove08 = CreateGroup()
udg_HoleIsWork = true
udg_IsBrainGame = false
udg_WolfIsDie = false
udg_Remove15 = CreateGroup()
udg_Remove09 = CreateGroup()
udg_SkipWolfFact = false
end

function InitSounds()
gg_snd_Intro1 = CreateSound("Speech/Trall/Intro1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro1, 6624)
SetSoundChannel(gg_snd_Intro1, 0)
SetSoundVolume(gg_snd_Intro1, 127)
SetSoundPitch(gg_snd_Intro1, 1.0)
gg_snd_Intro2 = CreateSound("Speech/Trall/Intro2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro2, 3576)
SetSoundChannel(gg_snd_Intro2, 0)
SetSoundVolume(gg_snd_Intro2, 127)
SetSoundPitch(gg_snd_Intro2, 1.0)
gg_snd_Intro3 = CreateSound("Speech/Trall/Intro3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro3, 3648)
SetSoundChannel(gg_snd_Intro3, 0)
SetSoundVolume(gg_snd_Intro3, 127)
SetSoundPitch(gg_snd_Intro3, 1.0)
gg_snd_Intro4 = CreateSound("Speech/Trall/Intro4.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro4, 2016)
SetSoundChannel(gg_snd_Intro4, 0)
SetSoundVolume(gg_snd_Intro4, 127)
SetSoundPitch(gg_snd_Intro4, 1.0)
gg_snd_Intro5 = CreateSound("Speech/Trall/Intro5.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro5, 1176)
SetSoundChannel(gg_snd_Intro5, 0)
SetSoundVolume(gg_snd_Intro5, 127)
SetSoundPitch(gg_snd_Intro5, 1.0)
gg_snd_Intro6 = CreateSound("Speech/Trall/Intro6.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro6, 960)
SetSoundChannel(gg_snd_Intro6, 0)
SetSoundVolume(gg_snd_Intro6, 127)
SetSoundPitch(gg_snd_Intro6, 1.0)
gg_snd_Intro7 = CreateSound("Speech/Trall/Intro7.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro7, 936)
SetSoundChannel(gg_snd_Intro7, 0)
SetSoundVolume(gg_snd_Intro7, 127)
SetSoundPitch(gg_snd_Intro7, 1.0)
gg_snd_Intro8 = CreateSound("Speech/Trall/Intro8.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro8, 1104)
SetSoundChannel(gg_snd_Intro8, 0)
SetSoundVolume(gg_snd_Intro8, 127)
SetSoundPitch(gg_snd_Intro8, 1.0)
gg_snd_Intro9 = CreateSound("Speech/Trall/Intro9.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro9, 768)
SetSoundChannel(gg_snd_Intro9, 0)
SetSoundVolume(gg_snd_Intro9, 127)
SetSoundPitch(gg_snd_Intro9, 1.0)
gg_snd_Intro10 = CreateSound("Speech/Trall/Intro10.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro10, 7152)
SetSoundChannel(gg_snd_Intro10, 0)
SetSoundVolume(gg_snd_Intro10, 127)
SetSoundPitch(gg_snd_Intro10, 1.0)
gg_snd_Intro11 = CreateSound("Speech/Trall/Intro11.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Intro11, 5976)
SetSoundChannel(gg_snd_Intro11, 0)
SetSoundVolume(gg_snd_Intro11, 127)
SetSoundPitch(gg_snd_Intro11, 1.0)
gg_snd_peon1 = CreateSound("Speech/Peon/Yetty/peon1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_peon1, 6840)
SetSoundChannel(gg_snd_peon1, 0)
SetSoundVolume(gg_snd_peon1, 127)
SetSoundPitch(gg_snd_peon1, 1.0)
gg_snd_peon2 = CreateSound("Speech/Peon/Yetty/peon2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_peon2, 5568)
SetSoundChannel(gg_snd_peon2, 0)
SetSoundVolume(gg_snd_peon2, 127)
SetSoundPitch(gg_snd_peon2, 1.0)
gg_snd_peon3 = CreateSound("Speech/Peon/Yetty/peon3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_peon3, 4752)
SetSoundChannel(gg_snd_peon3, 0)
SetSoundVolume(gg_snd_peon3, 127)
SetSoundPitch(gg_snd_peon3, 1.0)
gg_snd_Hlop = CreateSound("Hlop.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_Hlop, 10710)
SetSoundChannel(gg_snd_Hlop, 0)
SetSoundVolume(gg_snd_Hlop, 127)
SetSoundPitch(gg_snd_Hlop, 1.0)
gg_snd_fyyachtoetozazvyki = CreateSound("Speech/Peon/Dragon/fyyachtoetozazvyki.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_fyyachtoetozazvyki, 3600)
SetSoundChannel(gg_snd_fyyachtoetozazvyki, 0)
SetSoundVolume(gg_snd_fyyachtoetozazvyki, 127)
SetSoundPitch(gg_snd_fyyachtoetozazvyki, 1.0)
gg_snd_oanenashilietopodarki = CreateSound("Speech/Peon/Dragon/oanenashilietopodarki.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_oanenashilietopodarki, 3696)
SetSoundChannel(gg_snd_oanenashilietopodarki, 0)
SetSoundVolume(gg_snd_oanenashilietopodarki, 127)
SetSoundPitch(gg_snd_oanenashilietopodarki, 1.0)
gg_snd_15 = CreateSound("Speech/Dragon/15.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_15, 2064)
SetSoundChannel(gg_snd_15, 0)
SetSoundVolume(gg_snd_15, 127)
SetSoundPitch(gg_snd_15, 1.0)
gg_snd_16 = CreateSound("Speech/Dragon/16.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_16, 6720)
SetSoundChannel(gg_snd_16, 0)
SetSoundVolume(gg_snd_16, 127)
SetSoundPitch(gg_snd_16, 1.0)
gg_snd_animepeon1 = CreateSound("Speech/Anime/Peon/animepeon1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_animepeon1, 1824)
SetSoundChannel(gg_snd_animepeon1, 0)
SetSoundVolume(gg_snd_animepeon1, 127)
SetSoundPitch(gg_snd_animepeon1, 1.0)
gg_snd_animepeon2 = CreateSound("Speech/Anime/Peon/animepeon2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_animepeon2, 5712)
SetSoundChannel(gg_snd_animepeon2, 0)
SetSoundVolume(gg_snd_animepeon2, 127)
SetSoundPitch(gg_snd_animepeon2, 1.0)
gg_snd_animepeon3 = CreateSound("Speech/Anime/Peon/animepeon3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_animepeon3, 5856)
SetSoundChannel(gg_snd_animepeon3, 0)
SetSoundVolume(gg_snd_animepeon3, 127)
SetSoundPitch(gg_snd_animepeon3, 1.0)
gg_snd_animeZurck1 = CreateSound("Speech/Anime/Peon/animeZurck1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_animeZurck1, 18264)
SetSoundChannel(gg_snd_animeZurck1, 0)
SetSoundVolume(gg_snd_animeZurck1, 127)
SetSoundPitch(gg_snd_animeZurck1, 1.0)
gg_snd_animeZurck2 = CreateSound("Speech/Anime/Peon/animeZurck2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_animeZurck2, 13320)
SetSoundChannel(gg_snd_animeZurck2, 0)
SetSoundVolume(gg_snd_animeZurck2, 127)
SetSoundPitch(gg_snd_animeZurck2, 1.0)
gg_snd_PenFromWolf1 = CreateSound("Speech/Wolf/Peon/PenFromWolf1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf1, 2472)
SetSoundChannel(gg_snd_PenFromWolf1, 0)
SetSoundVolume(gg_snd_PenFromWolf1, 127)
SetSoundPitch(gg_snd_PenFromWolf1, 1.0)
gg_snd_PenFromWolf2 = CreateSound("Speech/Wolf/Peon/PenFromWolf2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf2, 6840)
SetSoundChannel(gg_snd_PenFromWolf2, 0)
SetSoundVolume(gg_snd_PenFromWolf2, 127)
SetSoundPitch(gg_snd_PenFromWolf2, 1.0)
gg_snd_PenFromWolf3 = CreateSound("Speech/Wolf/Peon/PenFromWolf3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf3, 8040)
SetSoundChannel(gg_snd_PenFromWolf3, 0)
SetSoundVolume(gg_snd_PenFromWolf3, 127)
SetSoundPitch(gg_snd_PenFromWolf3, 1.0)
gg_snd_PenFromWolf4 = CreateSound("Speech/Wolf/Peon/PenFromWolf4.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf4, 1440)
SetSoundChannel(gg_snd_PenFromWolf4, 0)
SetSoundVolume(gg_snd_PenFromWolf4, 127)
SetSoundPitch(gg_snd_PenFromWolf4, 1.0)
gg_snd_PenFromWolf5 = CreateSound("Speech/Wolf/Peon/PenFromWolf5.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf5, 3768)
SetSoundChannel(gg_snd_PenFromWolf5, 0)
SetSoundVolume(gg_snd_PenFromWolf5, 127)
SetSoundPitch(gg_snd_PenFromWolf5, 1.0)
gg_snd_PenFromWolf6 = CreateSound("Speech/Wolf/Peon/PenFromWolf6.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_PenFromWolf6, 2952)
SetSoundChannel(gg_snd_PenFromWolf6, 0)
SetSoundVolume(gg_snd_PenFromWolf6, 127)
SetSoundPitch(gg_snd_PenFromWolf6, 1.0)
gg_snd_WolfCinematic1 = CreateSound("Speech/Wolf/Wolf/WolfCinematic1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_WolfCinematic1, 9984)
SetSoundChannel(gg_snd_WolfCinematic1, 0)
SetSoundVolume(gg_snd_WolfCinematic1, 127)
SetSoundPitch(gg_snd_WolfCinematic1, 1.0)
gg_snd_WolfCinematic2 = CreateSound("Speech/Wolf/Wolf/WolfCinematic2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_WolfCinematic2, 7824)
SetSoundChannel(gg_snd_WolfCinematic2, 0)
SetSoundVolume(gg_snd_WolfCinematic2, 127)
SetSoundPitch(gg_snd_WolfCinematic2, 1.0)
gg_snd_WolfCinematic3 = CreateSound("Speech/Wolf/Wolf/WolfCinematic3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_WolfCinematic3, 1920)
SetSoundChannel(gg_snd_WolfCinematic3, 0)
SetSoundVolume(gg_snd_WolfCinematic3, 127)
SetSoundPitch(gg_snd_WolfCinematic3, 1.0)
gg_snd_cook1 = CreateSound("Speech/CookQuest/cook1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_cook1, 8664)
SetSoundChannel(gg_snd_cook1, 0)
SetSoundVolume(gg_snd_cook1, 127)
SetSoundPitch(gg_snd_cook1, 1.0)
gg_snd_cook2 = CreateSound("Speech/CookQuest/cook2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_cook2, 4848)
SetSoundChannel(gg_snd_cook2, 0)
SetSoundVolume(gg_snd_cook2, 127)
SetSoundPitch(gg_snd_cook2, 1.0)
gg_snd_cook3 = CreateSound("Speech/CookQuest/cook3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_cook3, 7464)
SetSoundChannel(gg_snd_cook3, 0)
SetSoundVolume(gg_snd_cook3, 127)
SetSoundPitch(gg_snd_cook3, 1.0)
gg_snd_cook4 = CreateSound("Speech/CookQuest/cook4.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_cook4, 4488)
SetSoundChannel(gg_snd_cook4, 0)
SetSoundVolume(gg_snd_cook4, 127)
SetSoundPitch(gg_snd_cook4, 1.0)
gg_snd_CookQuestPeon1 = CreateSound("Speech/CookQuest/CookQuestPeon1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_CookQuestPeon1, 1632)
SetSoundChannel(gg_snd_CookQuestPeon1, 0)
SetSoundVolume(gg_snd_CookQuestPeon1, 127)
SetSoundPitch(gg_snd_CookQuestPeon1, 1.0)
gg_snd_CookQuestPeon2 = CreateSound("Speech/CookQuest/CookQuestPeon2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_CookQuestPeon2, 1440)
SetSoundChannel(gg_snd_CookQuestPeon2, 0)
SetSoundVolume(gg_snd_CookQuestPeon2, 127)
SetSoundPitch(gg_snd_CookQuestPeon2, 1.0)
gg_snd_CookQuestPeon3 = CreateSound("Speech/CookQuest/CookQuestPeon3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_CookQuestPeon3, 1920)
SetSoundChannel(gg_snd_CookQuestPeon3, 0)
SetSoundVolume(gg_snd_CookQuestPeon3, 127)
SetSoundPitch(gg_snd_CookQuestPeon3, 1.0)
gg_snd_cook5 = CreateSound("Speech/CookQuest/cook5.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_cook5, 2760)
SetSoundChannel(gg_snd_cook5, 0)
SetSoundVolume(gg_snd_cook5, 127)
SetSoundPitch(gg_snd_cook5, 1.0)
gg_snd_CookQuestPeon4 = CreateSound("Speech/CookQuest/CookQuestPeon4.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_CookQuestPeon4, 8064)
SetSoundChannel(gg_snd_CookQuestPeon4, 0)
SetSoundVolume(gg_snd_CookQuestPeon4, 127)
SetSoundPitch(gg_snd_CookQuestPeon4, 1.0)
gg_snd_Warning = CreateSound("Sound/Interface/Warning.flac", false, false, false, 0, 0, "DefaultEAXON")
SetSoundParamsFromLabel(gg_snd_Warning, "Warning")
SetSoundDuration(gg_snd_Warning, 1903)
SetSoundVolume(gg_snd_Warning, 80)
gg_snd_BattlenetDeath1A = CreateSound("Sound/Interface/BattlenetDeath1A.flac", false, false, false, 0, 0, "SpellsEAX")
SetSoundParamsFromLabel(gg_snd_BattlenetDeath1A, "GlueScreenBNetOpenA")
SetSoundDuration(gg_snd_BattlenetDeath1A, 2953)
SetSoundVolume(gg_snd_BattlenetDeath1A, 127)
gg_snd_The_Astral_Academy_Gardens = "The Astral Academy Gardens.mp3"
gg_snd_OT1 = CreateSound("Speech/Outro/OT1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OT1, 3048)
SetSoundChannel(gg_snd_OT1, 0)
SetSoundVolume(gg_snd_OT1, 127)
SetSoundPitch(gg_snd_OT1, 1.0)
gg_snd_OT2 = CreateSound("Speech/Outro/OT2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OT2, 2760)
SetSoundChannel(gg_snd_OT2, 0)
SetSoundVolume(gg_snd_OT2, 127)
SetSoundPitch(gg_snd_OT2, 1.0)
gg_snd_OP1 = CreateSound("Speech/Outro/OP1.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OP1, 3480)
SetSoundChannel(gg_snd_OP1, 0)
SetSoundVolume(gg_snd_OP1, 127)
SetSoundPitch(gg_snd_OP1, 1.0)
gg_snd_OP2 = CreateSound("Speech/Outro/OP2.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OP2, 9576)
SetSoundChannel(gg_snd_OP2, 0)
SetSoundVolume(gg_snd_OP2, 127)
SetSoundPitch(gg_snd_OP2, 1.0)
gg_snd_OP3 = CreateSound("Speech/Outro/OP3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OP3, 4392)
SetSoundChannel(gg_snd_OP3, 0)
SetSoundVolume(gg_snd_OP3, 127)
SetSoundPitch(gg_snd_OP3, 1.0)
gg_snd_OT3 = CreateSound("Speech/Outro/OT3.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OT3, 2160)
SetSoundChannel(gg_snd_OT3, 0)
SetSoundVolume(gg_snd_OT3, 127)
SetSoundPitch(gg_snd_OT3, 1.0)
gg_snd_OT4 = CreateSound("Speech/Outro/OT4.mp3", false, false, false, 0, 0, "DefaultEAXON")
SetSoundDuration(gg_snd_OT4, 6408)
SetSoundChannel(gg_snd_OT4, 0)
SetSoundVolume(gg_snd_OT4, 127)
SetSoundPitch(gg_snd_OT4, 1.0)
end

function CreateAllDestructables()
local d
local t
local life

gg_dest_B004_2162 = BlzCreateDestructableWithSkin(FourCC("B004"), -128.0, -192.0, 325.000, 3.000, 0, FourCC("B004"))
gg_dest_B007_5312 = BlzCreateDestructableWithSkin(FourCC("B007"), -7552.0, 4224.0, 211.000, 3.000, 0, FourCC("B007"))
gg_dest_B00B_20775 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 16894.3, 129.0, 832.0, 180.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_20321 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 18040.2, 2828.5, 838.4, 180.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_19643 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 17013.9, 4349.7, 838.4, 180.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_16092 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 18043.0, 7294.2, 838.4, 270.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_14785 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 11344.6, 8373.0, 832.0, 270.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_17599 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 14969.5, -3076.2, 832.0, 180.000, 1.850, 0, FourCC("B00B"))
gg_dest_B00B_17182 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 15231.9, -760.3, 844.8, 270.000, 1.450, 0, FourCC("B00B"))
gg_dest_B00B_14732 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 13812.6, 8326.6, 838.4, 90.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_16680 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 15221.9, 2433.2, 838.4, 0.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_21136 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 17542.3, -3202.7, 864.0, 180.000, 1.500, 0, FourCC("B00B"))
gg_dest_B00B_16430 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 11136.0, 2426.0, 838.4, 0.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_17533 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 12163.4, 2.3, 832.0, 270.000, 1.850, 0, FourCC("B00B"))
gg_dest_B00B_15274 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 10618.1, 6012.7, 838.4, 180.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_15515 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 15227.5, 6283.1, 838.4, 180.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_16153 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 15215.2, 5364.9, 838.4, 0.000, 1.650, 0, FourCC("B00B"))
gg_dest_B00B_15713 = BlzCreateDestructableZWithSkin(FourCC("B00B"), 11516.0, 4100.8, 844.8, 90.000, 1.450, 0, FourCC("B00B"))
gg_dest_B00D_17155 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15232.0, 1280.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20788 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 17088.0, 128.0, 889.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_15532 = BlzCreateDestructableWithSkin(FourCC("B00D"), 14016.0, 6080.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_15710 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12224.0, 5184.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_15711 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10752.0, 3328.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_15712 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12096.0, 3264.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20787 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 16704.0, 128.0, 889.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_15709 = BlzCreateDestructableWithSkin(FourCC("B00D"), 9984.0, 5376.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20643 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15744.0, 1280.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16257 = BlzCreateDestructableWithSkin(FourCC("B00D"), 14080.0, 4608.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20786 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15744.0, -1024.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16254 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12864.0, 4160.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16255 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15296.0, 4160.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16256 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12992.0, 5312.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16427 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10304.0, 2176.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20785 = BlzCreateDestructableWithSkin(FourCC("B00D"), 18048.0, -1024.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20784 = BlzCreateDestructableWithSkin(FourCC("B00D"), 18048.0, 1280.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17532 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11584.0, -64.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16416 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11968.0, 2176.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16421 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11968.0, 1408.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16426 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10304.0, 1408.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16685 = BlzCreateDestructableWithSkin(FourCC("B00D"), 13696.0, 2176.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20368 = BlzCreateDestructableWithSkin(FourCC("B00D"), 17600.0, 3392.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16596 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10048.0, 1792.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16597 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12288.0, 1792.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16598 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11136.0, 1216.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20367 = BlzCreateDestructableWithSkin(FourCC("B00D"), 16192.0, 3392.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16686 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15232.0, 3456.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16684 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 13056.0, 2304.0, 901.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20366 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15808.0, 3392.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20365 = BlzCreateDestructableWithSkin(FourCC("B00D"), 17984.0, 3392.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16699 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15232.0, 2176.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16701 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 14016.0, 2816.0, 896.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16702 = BlzCreateDestructableWithSkin(FourCC("B00D"), 13056.0, 3456.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_18193 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 16256.0, -5504.0, 1529.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_16599 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11136.0, 2176.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17276 = BlzCreateDestructableWithSkin(FourCC("B00D"), 14272.0, -1024.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17275 = BlzCreateDestructableWithSkin(FourCC("B00D"), 12992.0, -768.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20364 = BlzCreateDestructableWithSkin(FourCC("B00D"), 17984.0, 2240.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17529 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10112.0, -1024.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17530 = BlzCreateDestructableWithSkin(FourCC("B00D"), 10112.0, 256.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17531 = BlzCreateDestructableWithSkin(FourCC("B00D"), 11584.0, -704.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17596 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15232.0, -1920.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_17597 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15232.0, -3200.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_20363 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15808.0, 2240.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_19706 = BlzCreateDestructableWithSkin(FourCC("B00D"), 17536.0, 4352.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_19707 = BlzCreateDestructableWithSkin(FourCC("B00D"), 15744.0, 4352.0, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_18184 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 16256.0, -7296.0, 1529.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_18157 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 14464.0, -7296.0, 1529.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00D_18148 = BlzCreateDestructableZWithSkin(FourCC("B00D"), 14464.0, -5504.0, 1529.6, 270.000, 1.000, 0, FourCC("B00D"))
gg_dest_B00E_15516 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 14600.6, 6946.5, 979.2, 270.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_15513 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 13441.1, 6941.4, 1004.8, 90.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_15517 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 12948.1, 6482.3, 979.2, 90.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_19723 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 16961.9, 5501.8, 1017.6, 0.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_19641 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 17914.5, 5501.6, 1030.4, 0.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_19642 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 18167.5, 5237.9, 1030.4, 270.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00E_15514 = BlzCreateDestructableZWithSkin(FourCC("B00E"), 14990.0, 6473.7, 972.8, 270.000, 1.000, 0, FourCC("B00E"))
gg_dest_B00F_17534 = BlzCreateDestructableWithSkin(FourCC("B00F"), 10112.0, -384.0, 270.000, 1.000, 0, FourCC("B00F"))
gg_dest_DTfx_14690 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 15040.0, 9024.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_14688 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 14912.0, 8256.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_17980 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 15744.0, 7296.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_14834 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 10560.0, 8064.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_16046 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 16512.0, 6272.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_15314 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 10112.0, 7296.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_5091 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 11584.0, 8896.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_15071 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 12352.0, 5952.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_14833 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 10688.0, 8896.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_16051 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 17536.0, 6272.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_14832 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 11584.0, 8064.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_15068 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 10112.0, 6272.0, 270.000, 1.000, 0, FourCC("DTfx"))
gg_dest_DTfx_18124 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 12928.0, -3968.0, 270.000, 1.000, 0, FourCC("DTfx"))
end

function CreateUnitsForPlayer0()
local p = Player(0)
local u
local unitID
local t
local life

gg_unit_Oths_0011 = BlzCreateUnitWithSkin(p, FourCC("Oths"), 63.2, -581.0, 211.080, FourCC("Oths"))
SetUnitColor(gg_unit_Oths_0011, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1652.2, -1430.7, 121.800, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("o001"), -1180.6, 1453.0, 262.550, FourCC("o001"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("o001"), -536.6, -1082.7, 42.330, FourCC("o001"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -7827.9, -9605.2, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -9372.6, -9822.5, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -11168.0, -8085.8, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -3856.2, -4870.3, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -5419.7, 3330.1, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), -11710.5, -1151.1, 159.380, FourCC("h004"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -12472.7, -2705.4, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -6622.8, -8553.6, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -5681.4, -8453.4, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -10483.4, -6645.3, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), -11195.6, -8035.2, 159.380, FourCC("h004"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -13274.1, -1596.1, 5.810, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -12149.0, 4711.7, 5.810, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), -5523.6, -8614.2, 159.380, FourCC("h004"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -9942.4, 872.0, 5.810, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -6551.2, -7066.3, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3852.9, 4153.2, 159.380, FourCC("h004"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), 3605.6, 3360.4, 159.380, FourCC("h004"))
u = BlzCreateUnitWithSkin(p, FourCC("h004"), -476.6, -4225.4, 159.380, FourCC("h004"))
gg_unit_h007_0171 = BlzCreateUnitWithSkin(p, FourCC("h007"), 1056.8, -2436.1, 182.046, FourCC("h007"))
u = BlzCreateUnitWithSkin(p, FourCC("h007"), 607.5, -857.6, 182.046, FourCC("h007"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), 601.4, -1416.6, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -6012.7, 7349.6, 5.812, FourCC("h002"))
gg_unit_h009_0197 = BlzCreateUnitWithSkin(p, FourCC("h009"), -11217.1, 9574.6, 232.970, FourCC("h009"))
u = BlzCreateUnitWithSkin(p, FourCC("h00D"), 6540.7, 6651.8, 238.320, FourCC("h00D"))
SetUnitAcquireRange(u, 200.0)
gg_unit_o002_0203 = BlzCreateUnitWithSkin(p, FourCC("o002"), -13047.3, 8357.1, 308.530, FourCC("o002"))
u = BlzCreateUnitWithSkin(p, FourCC("h00A"), 5159.2, 6586.8, 281.200, FourCC("h00A"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -1503.4, 1375.2, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), -10937.8, 8908.1, 5.812, FourCC("h002"))
gg_unit_opeo_0264 = BlzCreateUnitWithSkin(p, FourCC("opeo"), 16192.7, 5056.5, 353.240, FourCC("opeo"))
SetUnitColor(gg_unit_opeo_0264, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13505.9, 4803.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13378.1, 4926.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13635.0, 4803.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13637.6, 4932.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13375.1, 4797.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13767.0, 4928.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13763.8, 5060.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13896.1, 5058.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14023.4, 5058.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14150.9, 5056.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14277.5, 5057.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14407.5, 5056.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14404.9, 5183.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14531.0, 5182.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14658.8, 5182.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14786.2, 5182.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14660.5, 5051.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14659.0, 5314.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14657.1, 5443.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14142.1, 5316.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13119.4, 5319.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13119.3, 5190.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12989.2, 5191.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12989.8, 5061.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12992.7, 4929.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12863.6, 4928.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12862.8, 4801.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12866.0, 4672.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12863.8, 4544.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13124.1, 4794.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12993.3, 4550.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 12986.4, 4420.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13117.8, 4418.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13245.2, 4543.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13250.7, 4416.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13377.5, 4417.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13504.8, 4415.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13633.6, 4416.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13762.7, 4411.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13889.3, 4413.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13497.7, 4541.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13634.4, 4288.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13250.7, 5443.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13378.1, 5442.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13505.6, 5441.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13632.2, 5442.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13758.9, 5439.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13885.5, 5440.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13887.3, 5313.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14013.9, 5314.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14145.4, 5442.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14272.0, 5443.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13504.8, 5313.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13631.4, 5314.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13374.8, 5185.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13501.4, 5186.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13377.3, 5056.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13503.8, 5057.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13248.1, 5315.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13247.1, 5184.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13249.9, 5055.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14400.0, 5442.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15306.9, 4675.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15308.6, 4544.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15307.1, 4807.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15044.1, 4675.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15045.8, 4544.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15044.2, 4807.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13886.2, 4151.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13887.9, 4019.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13886.3, 4283.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15041.0, 4159.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15042.7, 4028.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15041.2, 4291.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14145.2, 4289.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14146.9, 4157.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14145.4, 4421.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15040.0, 4936.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15166.5, 4937.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15296.5, 4935.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14659.4, 4032.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14786.0, 4033.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14915.9, 4031.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14658.2, 4291.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14784.7, 4292.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14914.7, 4291.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14660.1, 4547.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14786.7, 4548.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14916.7, 4547.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14277.3, 4549.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14403.8, 4550.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14533.8, 4549.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14525.7, 4806.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14652.3, 4807.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14782.3, 4805.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14141.0, 4807.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14267.6, 4808.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14397.5, 4806.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13118.2, 4160.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13244.8, 4161.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13374.7, 4159.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15170.0, 4289.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15296.6, 4290.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14400.3, 4291.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14526.9, 4292.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14276.7, 4157.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14403.3, 4158.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13505.8, 4158.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13632.4, 4159.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13633.5, 4031.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14012.2, 4801.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13888.5, 4674.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13889.0, 4542.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00J"), 10318.3, 7276.3, 133.576, FourCC("h00J"))
u = BlzCreateUnitWithSkin(p, FourCC("h00L"), 12330.3, 5971.7, 100.913, FourCC("h00L"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15172.7, 957.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15172.9, 1089.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14527.4, -68.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00O"), 11087.8, 4392.5, 332.456, FourCC("h00O"))
u = BlzCreateUnitWithSkin(p, FourCC("h00L"), 11212.2, 4392.7, 114.679, FourCC("h00L"))
gg_unit_h00H_0569 = BlzCreateUnitWithSkin(p, FourCC("h00H"), 10561.1, 8065.8, 158.230, FourCC("h00H"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13505.6, -705.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13505.5, -837.5, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13378.6, -705.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13378.4, -837.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13249.1, -702.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13248.9, -834.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13121.6, -701.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13121.4, -833.7, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13636.2, -705.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13636.0, -837.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13764.9, -705.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13764.8, -836.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13895.5, -704.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 13895.3, -836.6, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14023.2, -702.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14023.0, -834.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14656.5, -702.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14791.8, -829.6, 0.000, FourCC("h00F"))
gg_unit_h00H_0588 = BlzCreateUnitWithSkin(p, FourCC("h00H"), 10709.0, 8891.7, 158.230, FourCC("h00H"))
gg_unit_h00H_0589 = BlzCreateUnitWithSkin(p, FourCC("h00H"), 11588.1, 8904.7, 158.230, FourCC("h00H"))
gg_unit_h00H_0590 = BlzCreateUnitWithSkin(p, FourCC("h00H"), 11585.5, 8103.7, 158.230, FourCC("h00H"))
gg_unit_h00J_0591 = BlzCreateUnitWithSkin(p, FourCC("h00J"), 12990.4, 8087.1, 133.576, FourCC("h00J"))
gg_unit_h00J_0592 = BlzCreateUnitWithSkin(p, FourCC("h00J"), 13374.5, 8087.5, 238.290, FourCC("h00J"))
gg_unit_h00J_0593 = BlzCreateUnitWithSkin(p, FourCC("h00J"), 13128.7, 8563.0, 30.971, FourCC("h00J"))
gg_unit_h00J_0594 = BlzCreateUnitWithSkin(p, FourCC("h00J"), 14273.1, 8051.1, 16.546, FourCC("h00J"))
gg_unit_h00J_0595 = BlzCreateUnitWithSkin(p, FourCC("h00J"), 14637.0, 8070.4, 359.176, FourCC("h00J"))
u = BlzCreateUnitWithSkin(p, FourCC("h00J"), 11340.9, 6229.2, 238.290, FourCC("h00J"))
u = BlzCreateUnitWithSkin(p, FourCC("h00N"), 11085.4, 4305.4, 58.460, FourCC("h00N"))
u = BlzCreateUnitWithSkin(p, FourCC("h00P"), 11206.2, 4294.0, 290.279, FourCC("h00P"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14658.0, -68.6, 0.000, FourCC("h00F"))
gg_unit_h00I_0601 = BlzCreateUnitWithSkin(p, FourCC("h00I"), 799.4, -2193.8, 0.000, FourCC("h00I"))
u = BlzCreateUnitWithSkin(p, FourCC("h00T"), 16005.6, 513.3, 90.000, FourCC("h00T"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16012.7, 667.7, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16014.1, 767.9, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16034.5, 873.6, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16080.1, 934.5, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16136.3, 988.8, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16204.3, 1043.5, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16288.8, 1067.4, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17482.7, 1060.3, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17602.4, 1031.6, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17680.5, 980.8, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17743.5, 917.8, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17783.1, 833.8, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17793.0, 727.7, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17778.3, -509.0, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17737.5, -590.0, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17695.9, -657.5, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17637.7, -714.0, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17567.1, -753.1, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 17479.4, -762.9, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16296.4, -761.9, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16203.1, -746.6, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16137.4, -709.2, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16063.5, -645.4, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 11068.8, -1018.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 11196.0, -1018.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 11074.0, 258.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 11201.2, 258.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00H"), 14037.1, 6128.8, 158.230, FourCC("h00H"))
u = BlzCreateUnitWithSkin(p, FourCC("h00L"), 11142.3, 2173.2, 100.913, FourCC("h00L"))
u = BlzCreateUnitWithSkin(p, FourCC("h00L"), 11146.8, 1210.6, 100.913, FourCC("h00L"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14786.7, -68.3, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14917.3, -67.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15045.0, -65.4, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15171.1, -64.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 15169.4, 65.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), 13952.3, -7796.8, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 16020.3, -571.3, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00U"), 15999.5, -475.1, 88.807, FourCC("h00U"))
u = BlzCreateUnitWithSkin(p, FourCC("h00T"), 17568.7, -836.6, 90.000, FourCC("h00T"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), 13968.7, -5016.5, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), 16768.6, -5028.5, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h002"), 16774.7, -7815.1, 5.812, FourCC("h002"))
u = BlzCreateUnitWithSkin(p, FourCC("h00S"), 13062.2, 3399.4, 183.104, FourCC("h00S"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14528.3, 6589.8, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14528.5, 6463.1, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14528.0, 6336.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14529.1, 6209.0, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14527.7, 6082.2, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14398.5, 6077.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00F"), 14270.7, 6077.9, 0.000, FourCC("h00F"))
u = BlzCreateUnitWithSkin(p, FourCC("h00T"), 16071.1, -759.3, 90.000, FourCC("h00T"))
u = BlzCreateUnitWithSkin(p, FourCC("h00T"), 17780.4, 345.1, 90.000, FourCC("h00T"))
u = BlzCreateUnitWithSkin(p, FourCC("h00K"), 16904.7, 2956.2, 342.399, FourCC("h00K"))
end

function CreateUnitsForPlayer1()
local p = Player(1)
local u
local unitID
local t
local life

u = BlzCreateUnitWithSkin(p, FourCC("h000"), -6471.0, -8160.1, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -6133.7, -8167.7, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -6037.7, -8688.0, 358.730, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -6335.6, -8428.5, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -6898.8, -8955.7, 269.197, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7188.2, -7265.4, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -6410.7, -9091.2, 179.062, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -6902.9, -9203.4, 185.029, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -6898.1, -9295.2, 177.960, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7019.7, -7258.1, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -6881.3, -7708.2, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7489.0, -6788.4, 225.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7942.8, -7368.2, 45.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7358.1, -6907.0, 225.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7808.0, -7493.3, 45.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8679.7, -7075.3, 225.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8558.9, -7160.7, 225.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -9008.4, -7783.9, 45.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8868.6, -7893.1, 45.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8759.8, -8506.6, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8884.6, -8500.9, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8644.4, -8506.6, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8512.3, -8404.2, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -8195.2, -8342.2, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -7809.9, -9212.7, 181.432, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -8890.6, -9678.1, 173.695, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -9194.5, -8113.9, 180.000, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10558.1, -7979.8, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10238.5, -7978.0, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12806.5, -2941.5, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.05 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12677.3, -2936.8, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12542.8, -2937.9, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.09 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12407.4, -2946.3, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.11 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10229.2, -6393.9, 88.700, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11564.6, -409.6, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11565.1, -509.3, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11566.1, -603.3, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12105.4, -401.1, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12105.9, -500.8, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12107.0, -594.8, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11658.2, 162.7, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11567.4, 160.5, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12107.5, 173.9, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12016.6, 171.7, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -11562.2, 54.7, 0.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -11559.4, -30.5, 0.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -11566.7, -100.1, 0.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12118.8, 69.2, 180.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12116.0, -16.0, 180.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12123.3, -85.6, 180.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -10750.7, 1033.0, 225.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -10676.3, 964.2, 225.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -13120.1, 930.5, 315.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -13035.9, 999.6, 315.000, FourCC("h001"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12296.2, -8812.2, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12159.5, -8829.7, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12355.7, -9603.6, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12214.1, -9469.8, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12998.0, -8052.5, 325.134, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -13035.6, -8214.4, 336.570, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12448.1, -8360.0, 153.450, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h001"), -12501.4, -8480.1, 142.947, FourCC("h001"))
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12372.9, -6471.8, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.05 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -12377.1, -6339.6, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11790.7, -3586.8, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -11767.9, -4341.4, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10937.3, -2414.2, 229.221, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.03 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10111.5, -6397.4, 88.700, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.10 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10344.7, -5905.8, 88.700, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10432.8, -1987.4, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), -10299.4, -2007.8, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.10 * life)
gg_unit_h00E_0216 = BlzCreateUnitWithSkin(p, FourCC("h00E"), 11003.5, 6845.6, 180.000, FourCC("h00E"))
gg_unit_h00E_0217 = BlzCreateUnitWithSkin(p, FourCC("h00E"), 11383.8, 6704.5, 0.000, FourCC("h00E"))
u = BlzCreateUnitWithSkin(p, FourCC("h00R"), 15831.2, 812.1, 338.210, FourCC("h00R"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16514.6, -2176.0, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11191.5, 4303.2, 45.687, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11192.8, 4434.4, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11089.5, 4305.8, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11091.9, 4435.2, 351.690, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12967.5, 4144.6, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15188.1, 4143.0, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12892.6, 5400.3, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 10744.7, 2186.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 10751.4, 1800.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 10740.6, 1412.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11522.5, 2183.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11520.9, 1800.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11519.3, 1411.6, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00R"), 16899.6, 2945.6, 338.210, FourCC("h00R"))
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 13505.5, 1331.6, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 13266.8, 551.6, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 13630.8, 817.4, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 14652.4, 1333.5, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 14907.1, 1332.7, 270.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 15297.3, 830.3, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.05 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 15296.9, 702.1, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 15295.3, 579.6, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.09 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 15292.7, 446.0, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.11 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 12997.0, 589.6, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 12874.9, 589.8, 90.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 14392.8, 60.3, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.02 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13377.7, 830.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 15275.5, -574.9, 180.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.09 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 12871.6, -693.2, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.05 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h000"), 12871.2, -821.5, 0.000, FourCC("h000"))
life = GetUnitState(u, UNIT_STATE_LIFE)
SetUnitState(u, UNIT_STATE_LIFE, 0.07 * life)
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12966.8, -1038.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 10209.2, 8830.0, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12293.9, 268.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12288.2, -1022.5, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12925.0, -3195.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12925.0, -2878.3, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12933.5, -2557.0, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12930.0, -2240.3, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12934.9, -1936.8, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 14980.3, -1823.8, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13265.6, -1923.2, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15136.9, -1887.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 14581.3, -1918.5, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13765.3, -1920.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 14205.7, -1912.3, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13390.0, -3212.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13301.4, -3167.5, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13224.2, -3218.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 13103.2, -3207.8, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12948.0, -2719.3, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12931.5, -2402.6, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 12897.6, -2066.7, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 14813.4, -1915.6, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 11359.3, 8039.5, 351.690, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 17790.2, 6274.9, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15712.4, 945.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15716.4, 824.6, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16768.2, -2177.2, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15718.5, 701.4, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15722.2, 5403.1, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 15814.1, 5404.6, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 10912.0, 6233.6, 34.162, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00C"), 16352.2, 1075.0, 242.987, FourCC("h00C"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16256.1, -2820.1, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16261.9, -1922.0, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16516.6, -1921.5, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16771.0, -1922.9, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 18048.4, -2176.4, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17280.3, -1920.4, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17664.3, -2560.0, 0.000, FourCC("h00V"))
gg_unit_h00W_0775 = BlzCreateUnitWithSkin(p, FourCC("h00W"), 18012.8, -2846.5, 270.000, FourCC("h00W"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16517.3, -2944.9, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16770.8, -2946.1, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 15748.8, -2563.4, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 16002.3, -2564.6, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17288.2, -2944.4, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17541.8, -2945.6, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17025.4, -2560.7, 0.000, FourCC("h00V"))
u = BlzCreateUnitWithSkin(p, FourCC("h00V"), 17281.8, -2560.5, 0.000, FourCC("h00V"))
gg_unit_h00W_0784 = BlzCreateUnitWithSkin(p, FourCC("h00W"), 17573.3, -2250.8, 270.000, FourCC("h00W"))
gg_unit_h00W_0785 = BlzCreateUnitWithSkin(p, FourCC("h00W"), 16827.9, -3140.7, 270.000, FourCC("h00W"))
end

function CreateUnitsForPlayer2()
local p = Player(2)
local u
local unitID
local t
local life

gg_unit_h00B_0003 = BlzCreateUnitWithSkin(p, FourCC("h00B"), 9946.6, 4814.9, 0.000, FourCC("h00B"))
gg_unit_h00M_0257 = BlzCreateUnitWithSkin(p, FourCC("h00M"), 11137.1, -370.8, 177.340, FourCC("h00M"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16062.7, 4031.3, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16062.1, 4544.9, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16062.8, 4288.7, 0.000, FourCC("h00Q"))
gg_unit_h00B_0271 = BlzCreateUnitWithSkin(p, FourCC("h00B"), 11757.0, 5325.0, 180.000, FourCC("h00B"))
gg_unit_h00B_0276 = BlzCreateUnitWithSkin(p, FourCC("h00B"), 10309.8, 3140.1, 90.000, FourCC("h00B"))
gg_unit_u001_0395 = BlzCreateUnitWithSkin(p, FourCC("u001"), 10224.5, 1812.8, 335.254, FourCC("u001"))
gg_unit_u001_0396 = BlzCreateUnitWithSkin(p, FourCC("u001"), 11955.8, 1793.6, 165.617, FourCC("u001"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13373.7, 3267.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13376.0, 3394.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13374.4, 3522.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13373.3, 3138.4, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12863.2, 3009.7, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12990.5, 3010.0, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13119.4, 3010.4, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13247.3, 3010.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13373.6, 3011.4, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12863.1, 2757.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12991.4, 2882.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13119.4, 2757.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13247.3, 2757.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13374.1, 2883.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13631.8, 3265.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13634.1, 3393.7, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13632.5, 3521.3, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13631.4, 3137.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13631.8, 3010.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13503.5, 2757.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13633.4, 2883.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12861.6, 2883.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13631.2, 2754.7, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13119.0, 2884.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13247.5, 2884.4, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13502.0, 3010.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13502.4, 3137.4, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13501.9, 3265.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13504.6, 3394.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13504.3, 3521.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13376.4, 2756.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12990.2, 2756.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13761.6, 3396.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13760.0, 3523.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14014.9, 3398.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14017.3, 3525.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13887.8, 3396.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13889.8, 3523.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14142.1, 3397.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14271.6, 3526.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14144.1, 3524.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14269.2, 3399.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14401.4, 3397.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14530.5, 3526.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14403.4, 3524.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14528.1, 3398.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14655.7, 3397.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14656.5, 3523.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14782.7, 3394.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14783.8, 3524.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14911.6, 3524.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14912.3, 3396.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15040.0, 3396.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15037.9, 3523.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12857.8, 2628.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13114.1, 2629.0, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13241.9, 2629.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13498.1, 2628.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13625.9, 2625.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13371.1, 2627.7, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12987.1, 2627.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12862.3, 2500.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13243.9, 2499.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12989.9, 2499.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13117.3, 2497.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12863.1, 2372.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12862.2, 2245.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12861.8, 2116.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12989.0, 2113.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13115.8, 2116.0, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13245.3, 2115.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13245.4, 2246.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13246.3, 2372.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14021.7, 2242.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14149.4, 2239.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14016.3, 2113.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14144.1, 2110.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14532.6, 2246.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14399.5, 2120.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14527.2, 2117.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14534.4, 2754.0, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14662.1, 2751.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14529.0, 2625.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14656.8, 2622.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15165.7, 3018.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15293.5, 3015.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15160.4, 2889.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15288.1, 2887.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14914.8, 2761.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15042.6, 2758.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14909.5, 2632.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15037.2, 2629.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14785.2, 2502.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14783.0, 2373.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14657.1, 2494.4, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14656.8, 2366.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13760.8, 3014.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13887.1, 3012.3, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14015.3, 3011.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14141.7, 3013.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14270.0, 3009.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16061.9, 4416.6, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14270.0, 2755.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14270.3, 2624.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14139.9, 2627.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14011.9, 2627.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13879.9, 2629.7, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13753.5, 2629.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13762.3, 2755.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13759.8, 2881.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14912.2, 2502.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15040.0, 2499.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14912.9, 2373.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15040.7, 2370.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14909.9, 2246.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15037.6, 2243.5, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14908.8, 2117.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 15036.5, 2114.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14273.1, 2120.4, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13246.4, 3142.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13120.1, 3140.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12990.2, 3138.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 12862.2, 3139.4, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13245.8, 3271.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13245.7, 3402.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13247.4, 3529.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13888.4, 2113.3, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16062.5, 4671.3, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13506.8, 315.8, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13634.5, 312.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13505.8, 185.4, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 13633.5, 182.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14787.6, 463.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14915.4, 460.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14784.2, 336.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14915.0, 334.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16061.8, 4159.1, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16061.9, 2368.4, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16061.8, 2240.1, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16063.7, 2496.4, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17595.7, 3139.8, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17724.2, 3140.8, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17855.2, 3138.8, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10430.7, -831.1, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10560.0, -837.9, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10430.8, -959.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10560.1, -965.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10433.4, -1086.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10562.7, -1093.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10432.2, -575.7, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10559.5, -579.0, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10431.7, -441.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10559.0, -444.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10432.0, -314.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10559.3, -317.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10432.3, -187.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10559.6, -190.2, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10430.5, -59.2, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10557.9, -62.5, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10429.4, 204.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10556.8, 200.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10431.2, 330.9, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10558.6, 327.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10945.0, -577.6, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10944.5, -443.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10944.8, -316.1, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 10945.1, -188.8, 90.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 11327.6, -571.0, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 11327.1, -436.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 11327.5, -309.6, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 11327.8, -182.3, 0.000, FourCC("h00G"))
u = BlzCreateUnitWithSkin(p, FourCC("h00E"), 15350.3, -5985.9, 180.000, FourCC("h00E"))
u = BlzCreateUnitWithSkin(p, FourCC("h00E"), 15355.4, -6821.1, 180.000, FourCC("h00E"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.2, 4672.5, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16319.2, 5056.5, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 17915.5, 2828.1, 192.980, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.3, 5184.4, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.5, 5312.7, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.9, 5439.1, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.5, 4289.9, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16317.6, 4417.8, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16317.8, 4546.1, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16318.4, 4032.5, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16317.5, 4160.4, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16447.2, 4672.2, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16447.5, 4289.6, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16446.6, 4417.5, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16446.8, 4545.8, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16447.4, 4032.2, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16446.5, 4160.0, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16577.5, 5440.3, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16577.8, 5057.7, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16576.9, 5185.6, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16577.1, 5313.9, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16830.4, 5439.1, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16830.7, 5056.5, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16829.8, 5184.4, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 16830.0, 5312.7, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17086.6, 5442.3, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17086.9, 5059.7, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17086.0, 5187.6, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00Q"), 17086.2, 5315.9, 0.000, FourCC("h00Q"))
u = BlzCreateUnitWithSkin(p, FourCC("h00G"), 14271.5, 2882.5, 90.000, FourCC("h00G"))
end

function CreateUnitsForPlayer10()
local p = Player(10)
local u
local unitID
local t
local life

gg_unit_h006_0002 = BlzCreateUnitWithSkin(p, FourCC("h006"), -4919.2, 7152.6, 291.597, FourCC("h006"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8953.9, -3879.1, 240.498, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8975.7, -4115.6, 237.037, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8913.5, -4274.9, 310.461, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8031.0, -3414.8, 65.074, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8065.8, -3828.8, 43.002, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8035.3, -4120.5, 240.894, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -9019.9, -3134.5, 311.505, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8918.3, -2872.6, 232.401, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8832.3, -3073.4, 311.549, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -9333.8, -1211.9, 242.926, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -10649.5, -844.4, 55.362, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -10455.2, -963.2, 33.235, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -10330.9, -1102.2, 229.885, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -10261.2, -326.6, 5.680, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -10117.6, -473.7, 291.652, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -9976.5, -621.8, 248.716, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -13416.5, -1531.8, 130.533, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -13380.5, -1147.7, 217.415, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -12971.2, -1291.5, 150.836, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -13022.2, -1680.6, 350.562, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -13180.0, -1417.9, 260.087, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -11812.2, -9329.4, 33.020, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -11593.3, -9501.6, 66.800, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -11277.3, -9421.3, 109.959, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("h005"), -11015.5, -9258.0, 153.806, FourCC("h005"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -12609.4, -7320.8, 316.550, FourCC("n003"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -13003.6, -9340.0, 35.720, FourCC("n003"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -9116.4, -6427.4, 103.486, FourCC("n003"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -13362.9, 112.2, 315.797, FourCC("n003"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -11096.5, -4005.4, 116.844, FourCC("n003"))
u = BlzCreateUnitWithSkin(p, FourCC("n003"), -8393.8, -8947.7, 35.720, FourCC("n003"))
gg_unit_h006_0172 = BlzCreateUnitWithSkin(p, FourCC("h006"), -6759.5, 7717.5, 186.040, FourCC("h006"))
gg_unit_h006_0173 = BlzCreateUnitWithSkin(p, FourCC("h006"), -6127.4, 6115.0, 31.803, FourCC("h006"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), 1865.5, -2060.0, 220.762, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -1108.8, -5904.3, 97.265, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), 568.5, -5414.6, 118.907, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -2851.3, -2003.9, 235.344, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -4700.5, -1959.2, 57.124, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -3834.0, -914.7, 186.899, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -5398.1, 1103.5, 71.228, FourCC("nwwf"))
u = BlzCreateUnitWithSkin(p, FourCC("nwwf"), -1350.5, 6051.8, 169.624, FourCC("nwwf"))
end

function CreateUnitsForPlayer22()
local p = Player(22)
local u
local unitID
local t
local life

u = BlzCreateUnitWithSkin(p, FourCC("e007"), 4809.7, -5997.2, 334.650, FourCC("e007"))
end

function CreateNeutralHostile()
local p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
local u
local unitID
local t
local life

gg_unit_n000_0001 = BlzCreateUnitWithSkin(p, FourCC("n000"), -2863.2, -5340.3, 326.601, FourCC("n000"))
gg_unit_u000_0005 = BlzCreateUnitWithSkin(p, FourCC("u000"), -5777.8, 8019.1, 276.770, FourCC("u000"))
gg_unit_n001_0009 = BlzCreateUnitWithSkin(p, FourCC("n001"), -7570.0, 3830.9, 88.177, FourCC("n001"))
u = BlzCreateUnitWithSkin(p, FourCC("e005"), -14253.5, -14208.2, 23.250, FourCC("e005"))
u = BlzCreateUnitWithSkin(p, FourCC("n007"), 14559.0, -4646.7, 227.085, FourCC("n007"))
end

function CreateNeutralPassive()
local p = Player(PLAYER_NEUTRAL_PASSIVE)
local u
local unitID
local t
local life

u = BlzCreateUnitWithSkin(p, FourCC("nsno"), -1377.3, 7311.8, 119.744, FourCC("nsno"))
u = BlzCreateUnitWithSkin(p, FourCC("nsno"), -4992.9, 4916.3, 230.423, FourCC("nsno"))
u = BlzCreateUnitWithSkin(p, FourCC("nsno"), -5043.9, 6247.3, 163.306, FourCC("nsno"))
u = BlzCreateUnitWithSkin(p, FourCC("nsno"), -5760.5, 6601.1, 203.528, FourCC("nsno"))
u = BlzCreateUnitWithSkin(p, FourCC("nsno"), -7232.7, 3468.5, 318.646, FourCC("nsno"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -818.7, -584.8, 290.597, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
gg_unit_opeo_0013 = BlzCreateUnitWithSkin(p, FourCC("opeo"), 473.2, -340.7, 313.224, FourCC("opeo"))
SetUnitColor(gg_unit_opeo_0013, ConvertPlayerColor(0))
gg_unit_opeo_0014 = BlzCreateUnitWithSkin(p, FourCC("opeo"), 414.9, -479.3, 14.290, FourCC("opeo"))
SetUnitColor(gg_unit_opeo_0014, ConvertPlayerColor(0))
gg_unit_opeo_0015 = BlzCreateUnitWithSkin(p, FourCC("opeo"), 534.7, -640.6, 73.650, FourCC("opeo"))
SetUnitColor(gg_unit_opeo_0015, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -624.7, -255.0, 349.324, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -390.0, -556.4, 49.483, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -480.1, 90.0, 303.320, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 262.9, 168.1, 227.255, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 342.8, 108.6, 217.383, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 424.9, 7.4, 204.764, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -93.3, 439.8, 264.538, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -9.7, 428.2, 255.377, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
gg_unit_opeo_0024 = BlzCreateUnitWithSkin(p, FourCC("opeo"), -265.3, -699.5, 34.985, FourCC("opeo"))
SetUnitColor(gg_unit_opeo_0024, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -208.2, -839.7, 52.017, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -8.9, -847.4, 69.163, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 491.9, -2341.9, 337.803, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 689.2, -2273.3, 257.772, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 987.4, -2183.5, 233.399, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 32.3, -2538.1, 28.538, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1543.3, 904.5, 343.258, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1213.6, 905.1, 102.463, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1106.8, 1270.4, 234.443, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1053.0, 1072.8, 172.683, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -558.6, -818.0, 49.483, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -471.8, -961.9, 49.483, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
gg_unit_n002_0045 = BlzCreateUnitWithSkin(p, FourCC("n002"), -12104.8, 3638.2, 271.700, FourCC("n002"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -13088.2, 3360.7, 355.122, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("e002"), -5412.0, -9227.2, 358.817, FourCC("e002"))
u = BlzCreateUnitWithSkin(p, FourCC("e002"), -7561.3, 4576.4, 275.157, FourCC("e002"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -11617.0, -8041.4, 102.460, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("e002"), -11839.7, 128.6, 269.502, FourCC("e002"))
u = BlzCreateUnitWithSkin(p, FourCC("e002"), -11835.8, 1670.0, 270.000, FourCC("e002"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -8082.3, -5380.2, 194.385, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -12755.9, -4965.9, 345.936, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("e003"), 4188.3, 2697.4, 248.540, FourCC("e003"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 1214.4, 2660.8, 11.906, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 4924.1, 6420.5, 102.463, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 801.1, -2497.8, 28.538, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 873.8, -2488.1, 6.286, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00B"), 723.1, -2489.4, 349.040, FourCC("n00B"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -1760.2, -94.9, 298.310, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 529.2, -1354.5, 309.719, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 652.5, -1326.4, 239.706, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 663.6, -1460.5, 138.430, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00B"), 406.5, -885.8, 349.040, FourCC("n00B"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -341.6, -361.2, 36.327, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -2486.8, 3015.6, 291.738, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -5510.7, 3325.3, 209.402, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -5469.0, 3219.2, 167.670, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 4465.4, 2399.8, 137.073, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 4540.3, 2867.3, 175.058, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 3830.3, 2974.2, 320.768, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), 3897.6, 2377.1, 61.057, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 5084.7, 6588.1, 172.683, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 983.6, -1755.0, 233.399, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -11509.9, 9591.8, 23.954, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -11480.3, 9420.0, 46.008, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -11338.5, 9298.9, 69.005, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -11153.9, 9318.8, 91.867, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2002.5, -2307.7, 270.681, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10936.0, 7343.2, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10723.4, 9013.8, 335.316, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14610.3, 8642.0, 89.717, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1921.2, -2310.4, 277.035, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2056.0, -2376.5, 13.303, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1778.6, -2381.2, 181.860, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1967.4, -2446.3, 87.234, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1869.8, -2452.6, 100.278, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2004.3, -1854.9, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1954.0, -1790.8, 280.954, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1876.9, -1784.8, 272.425, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1961.0, -1929.7, 100.278, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1876.4, -1929.2, 100.278, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("Oths"), -1749.7, -1852.9, 242.813, FourCC("Oths"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2251.8, -1879.0, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2261.6, -1790.3, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2271.8, -1647.6, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2180.9, -1943.6, 91.332, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2119.9, -1861.5, 186.494, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2113.9, -1712.5, 175.971, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2189.5, -1629.3, 274.300, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2067.1, -1508.4, 249.784, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1975.1, -1518.1, 242.178, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2340.5, -1902.4, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2094.7, -2235.7, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2089.5, -2172.3, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1933.2, -2172.9, 189.104, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -2003.4, -2126.1, 265.872, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1893.2, -2175.3, 8.268, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1761.7, -2225.9, 170.997, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1756.4, -2172.9, 187.148, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), -1829.5, -2127.1, 288.949, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -2315.2, -1941.1, 208.427, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -2236.8, -2022.7, 3.934, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -1810.1, -1991.2, 239.706, FourCC("n00A"))
u = BlzCreateUnitWithSkin(p, FourCC("n00B"), -1572.0, -1966.7, 50.162, FourCC("n00B"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00B"), -1623.2, -1785.0, 323.288, FourCC("n00B"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00B"), -1429.4, -2052.7, 124.917, FourCC("n00B"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 6787.5, -4804.8, 335.316, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 17749.1, 7116.1, 218.170, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("n00D"), 8574.0, -4760.7, 202.020, FourCC("n00D"))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 15940.0, 1236.8, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 13630.4, 7140.9, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14803.5, 6246.3, 336.687, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10819.6, 4918.1, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 11305.1, 2474.1, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 12326.3, 4808.5, 206.313, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 17783.9, 4369.4, 218.170, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10576.3, 1803.1, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14659.1, 2997.4, 203.283, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14256.3, -109.4, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14257.3, -342.0, 88.285, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10259.6, -288.1, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10771.7, 14.8, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 10788.8, -770.8, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 11632.9, -988.2, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 11970.7, -20.1, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 14690.6, -3149.5, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("opeo"), 15357.5, -4231.4, 270.344, FourCC("opeo"))
SetUnitColor(u, ConvertPlayerColor(0))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 15000.4, 2932.3, 253.100, FourCC("nrat"))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 15141.3, 3474.0, 310.254, FourCC("nrat"))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 12885.3, 3333.4, 340.207, FourCC("nrat"))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 14148.4, 2809.2, 169.740, FourCC("nrat"))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 15276.3, 2646.8, 156.308, FourCC("nrat"))
u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 13788.4, 2261.7, 215.661, FourCC("nrat"))
end

function CreatePlayerBuildings()
end

function CreatePlayerUnits()
CreateUnitsForPlayer0()
CreateUnitsForPlayer1()
CreateUnitsForPlayer2()
CreateUnitsForPlayer10()
CreateUnitsForPlayer22()
end

function CreateAllUnits()
CreatePlayerBuildings()
CreateNeutralHostile()
CreateNeutralPassive()
CreatePlayerUnits()
end

function CreateRegions()
local we

gg_rct_Region_038 = Rect(-4224.0, -6208.0, -1568.0, -4480.0)
gg_rct_Region_024 = Rect(-192.0, -352.0, -96.0, -256.0)
gg_rct_TrapZone = Rect(-12896.0, -9408.0, -5664.0, 4608.0)
gg_rct_EnterTrap = Rect(-5856.0, -9440.0, -5472.0, -8928.0)
gg_rct_ExitTrap = Rect(-5472.0, -9440.0, -5376.0, -8992.0)
gg_rct_ExitTrapZone = Rect(-7616.0, 4224.0, -7424.0, 4480.0)
gg_rct_Region_004 = Rect(-7648.0, 4480.0, -7424.0, 4640.0)
gg_rct_BossDrakon = Rect(-8672.0, 1088.0, -5376.0, 4000.0)
gg_rct_InitStartDragon = Rect(-8160.0, 2336.0, -6656.0, 3840.0)
gg_rct_Towolf = Rect(-11936.0, 128.0, -11744.0, 192.0)
gg_rct_FromWolf = Rect(-12000.0, 64.0, -11680.0, 128.0)
gg_rct_ExitWolf = Rect(-11968.0, 1632.0, -11712.0, 1760.0)
gg_rct_EnterWolf = Rect(-11968.0, 1760.0, -11712.0, 1888.0)
gg_rct_EnterWivern = Rect(-7168.0, 6016.0, -4512.0, 8352.0)
gg_rct_Region_012 = Rect(-2848.0, -4512.0, -2656.0, -4448.0)
gg_rct_Region_013 = Rect(-3424.0, -5824.0, -2240.0, -4704.0)
gg_rct_Enter2Arena = Rect(1024.0, 7104.0, 1216.0, 7328.0)
gg_rct_ExitArena = Rect(1280.0, 7008.0, 1376.0, 7232.0)
gg_rct_AnimBossEnter = Rect(-13184.0, 7488.0, -13088.0, 7584.0)
gg_rct_AnimBossStart = Rect(-13088.0, 7584.0, -12832.0, 7840.0)
gg_rct_AIStartBoss = Rect(-12256.0, 8576.0, -10304.0, 10240.0)
gg_rct_Region_019 = Rect(-12128.0, 2720.0, -11904.0, 2912.0)
gg_rct_Region_020 = Rect(800.0, -2496.0, 896.0, -2400.0)
gg_rct_Region_021 = Rect(672.0, -2400.0, 800.0, -2272.0)
gg_rct_Region_022 = Rect(-256.0, -704.0, -160.0, -608.0)
gg_rct_Region_023 = Rect(-448.0, -448.0, 256.0, 224.0)
gg_rct_Boind00 = Rect(11200.0, 8320.0, 11296.0, 8608.0)
gg_rct_Exit00 = Rect(11200.0, 8224.0, 11488.0, 8512.0)
gg_rct_Enter00 = Rect(11072.0, 8928.0, 11264.0, 9056.0)
gg_rct_StartBrainGame = Rect(736.0, -2176.0, 864.0, -2048.0)
gg_rct_Boind01 = Rect(13600.0, 8320.0, 13952.0, 8544.0)
gg_rct_Enter01 = Rect(12896.0, 8896.0, 13088.0, 9024.0)
gg_rct_Exit01 = Rect(13664.0, 8192.0, 13952.0, 8480.0)
gg_rct_Boind02 = Rect(11104.0, 6560.0, 11392.0, 6816.0)
gg_rct_Enter02 = Rect(10048.0, 7232.0, 10176.0, 7360.0)
gg_rct_Exit02 = Rect(10464.0, 5856.0, 10752.0, 6144.0)
gg_rct_Boind03 = Rect(13952.0, 6592.0, 14240.0, 6816.0)
gg_rct_Enter03 = Rect(12928.0, 7168.0, 13056.0, 7296.0)
gg_rct_Exit03 = Rect(15104.0, 6144.0, 15392.0, 6432.0)
gg_rct_Boind04 = Rect(11040.0, 3648.0, 11328.0, 4736.0)
gg_rct_Enter04 = Rect(11072.0, 3872.0, 11200.0, 4000.0)
gg_rct_Exit04 = Rect(11360.0, 3968.0, 11648.0, 4256.0)
gg_rct_Bound05 = Rect(13920.0, 4672.0, 14208.0, 4896.0)
gg_rct_Enter05 = Rect(12928.0, 5376.0, 13056.0, 5504.0)
gg_rct_Exit05 = Rect(15072.0, 5216.0, 15360.0, 5504.0)
gg_rct_Bound06 = Rect(10976.0, 1632.0, 11264.0, 1856.0)
gg_rct_Enter06 = Rect(11072.0, 2080.0, 11200.0, 2208.0)
gg_rct_Exit06 = Rect(10976.0, 2304.0, 11264.0, 2592.0)
gg_rct_Bound07 = Rect(14016.0, 2720.0, 14304.0, 2944.0)
gg_rct_Enter07 = Rect(12992.0, 3200.0, 13120.0, 3328.0)
gg_rct_Exit07 = Rect(15104.0, 2272.0, 15392.0, 2560.0)
gg_rct_SpikesZone = Rect(12768.0, 2048.0, 15360.0, 3584.0)
gg_rct_Enter08 = Rect(12992.0, 64.0, 13120.0, 192.0)
gg_rct_Exit08 = Rect(15104.0, -896.0, 15392.0, -608.0)
gg_rct_Region08 = Rect(12800.0, -1152.0, 15360.0, 1408.0)
gg_rct_Bound08 = Rect(13952.0, -544.0, 14240.0, 704.0)
gg_rct_Bound08Start = Rect(13984.0, 288.0, 14272.0, 704.0)
gg_rct_ResizePlace08 = Rect(14080.0, -416.0, 14432.0, -256.0)
gg_rct_Region04 = Rect(9824.0, 2944.0, 12448.0, 5504.0)
gg_rct_Bound09 = Rect(11008.0, -512.0, 11296.0, -288.0)
gg_rct_Enter09 = Rect(11808.0, -448.0, 11936.0, -320.0)
gg_rct_Exit09 = Rect(12032.0, -160.0, 12320.0, 128.0)
gg_rct_Bound10 = Rect(13920.0, -2688.0, 14208.0, -2464.0)
gg_rct_Enter10 = Rect(13568.0, -3264.0, 13696.0, -3136.0)
gg_rct_Exit10 = Rect(14816.0, -3200.0, 15104.0, -2912.0)
gg_rct_Bound11 = Rect(16768.0, 6560.0, 17056.0, 6848.0)
gg_rct_Enter11 = Rect(15680.0, 7104.0, 15808.0, 7232.0)
gg_rct_Exit11 = Rect(17920.0, 7168.0, 18208.0, 7456.0)
gg_rct_Region11 = Rect(15488.0, 5760.0, 18304.0, 7552.0)
gg_rct_R11B1_0 = Rect(15616.0, 6656.0, 16128.0, 7424.0)
gg_rct_Start11_0 = Rect(15616.0, 6912.0, 15872.0, 7424.0)
gg_rct_Start11_1 = Rect(16384.0, 6144.0, 16640.0, 6400.0)
gg_rct_Start11_2 = Rect(17408.0, 6144.0, 17920.0, 6400.0)
gg_rct_Start11_3 = Rect(17664.0, 6912.0, 18208.0, 7456.0)
gg_rct_R11B1_1 = Rect(16384.0, 6400.0, 16640.0, 7424.0)
gg_rct_R11B1_2 = Rect(16640.0, 6400.0, 17920.0, 6656.0)
gg_rct_R11B2_0 = Rect(16128.0, 5920.0, 16384.0, 7424.0)
gg_rct_R11B2_1 = Rect(16640.0, 6144.0, 17408.0, 6400.0)
gg_rct_R11B3_0 = Rect(16640.0, 6656.0, 17664.0, 7168.0)
gg_rct_R11B3_1 = Rect(16384.0, 5920.0, 18176.0, 6144.0)
gg_rct_R11B1_4 = Rect(15872.0, 6400.0, 16128.0, 6656.0)
gg_rct_R11B1_3 = Rect(15616.0, 5888.0, 15872.0, 6144.0)
gg_rct_Start11_4 = Rect(15872.0, 6144.0, 16128.0, 6400.0)
gg_rct_Start11_5 = Rect(15872.0, 6912.0, 16128.0, 7168.0)
gg_rct_BoundBoss = Rect(13792.0, -8384.0, 16736.0, -4640.0)
gg_rct_EnterBoss = Rect(12864.0, -4032.0, 12992.0, -3904.0)
gg_rct_ExitBoss = Rect(17440.0, -4352.0, 17728.0, -4064.0)
gg_rct_Bound12 = Rect(16736.0, 4704.0, 17024.0, 4992.0)
gg_rct_Enter12 = Rect(15680.0, 4512.0, 15808.0, 4640.0)
gg_rct_Exit12 = Rect(16896.0, 4224.0, 17152.0, 4480.0)
gg_rct_Start12 = Rect(16896.0, 4736.0, 17152.0, 4992.0)
gg_rct_Start13 = Rect(16768.0, 2560.0, 17024.0, 2816.0)
gg_rct_Bound13 = Rect(16736.0, 2592.0, 17024.0, 2880.0)
gg_rct_Enter13 = Rect(16832.0, 2272.0, 16960.0, 2400.0)
gg_rct_Exit13 = Rect(17920.0, 2688.0, 18176.0, 2944.0)
gg_rct_Region13 = Rect(15584.0, 2016.0, 18208.0, 3616.0)
gg_rct_Error10 = Rect(13120.0, -3008.0, 15296.0, -2112.0)
gg_rct_Error10Out = Rect(12736.0, -3392.0, 15424.0, -1728.0)
gg_rct_Patrol12 = Rect(16416.0, 4992.0, 16512.0, 5120.0)
gg_rct_BossBarelSpawn = Rect(15136.0, -6656.0, 15552.0, -6144.0)
gg_rct_Region14 = Rect(15616.0, -1152.0, 18176.0, 1408.0)
gg_rct_Enter14 = Rect(15680.0, 1216.0, 15808.0, 1344.0)
gg_rct_Exit14 = Rect(16768.0, 0.0, 17024.0, 256.0)
gg_rct_Bound14 = Rect(16768.0, -512.0, 17024.0, 768.0)
gg_rct_R14B1 = Rect(16384.0, -1120.0, 17408.0, 1440.0)
gg_rct_R14B2 = Rect(15616.0, -384.0, 16416.0, 640.0)
gg_rct_R14B3 = Rect(17408.0, -384.0, 18208.0, 640.0)
gg_rct_UP14 = Rect(16640.0, -128.0, 17152.0, 384.0)
gg_rct_Bound15 = Rect(16736.0, -2624.0, 17024.0, -2400.0)
gg_rct_Enter15 = Rect(15680.0, -1984.0, 15808.0, -1856.0)
gg_rct_Exit15 = Rect(17408.0, -3328.0, 17664.0, -3072.0)
gg_rct_Error15Out = Rect(15552.0, -3392.0, 18240.0, -1664.0)
gg_rct_Region09 = Rect(9856.0, -1152.0, 12448.0, 384.0)
end

function CreateCameras()
gg_cam_OnPeonsandTrall = CreateCameraSetup()
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_ROTATION, 93.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.3, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_TARGET_DISTANCE, 790.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeonsandTrall, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_OnPeonsandTrall, -103.0, -645.6, 0.0)
gg_cam_OnPineRound = CreateCameraSetup()
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_ROTATION, 98.2, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_ANGLE_OF_ATTACK, 317.9, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_TARGET_DISTANCE, 2727.3, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_FARZ, 6050.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPineRound, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_OnPineRound, -105.5, 16.8, 0.0)
gg_cam_OnPeons = CreateCameraSetup()
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_ROTATION, 214.9, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_ANGLE_OF_ATTACK, 331.8, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_TARGET_DISTANCE, 445.9, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_OnPeons, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_OnPeons, -63.7, -669.2, 0.0)
gg_cam_MindPeon = CreateCameraSetup()
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_ROTATION, 222.5, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_ANGLE_OF_ATTACK, 7.9, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_TARGET_DISTANCE, 2.1, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_MindPeon, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_MindPeon, -5.4, -627.7, 0.0)
gg_cam_TrallSteal = CreateCameraSetup()
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_ROTATION, 63.3, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.7, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_TARGET_DISTANCE, 368.5, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_TrallSteal, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_TrallSteal, 70.4, -585.1, 0.0)
gg_cam_Vine = CreateCameraSetup()
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_ROTATION, 59.5, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_ANGLE_OF_ATTACK, 311.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_TARGET_DISTANCE, 1051.5, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_Vine, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_Vine, 489.1, -482.8, 0.0)
gg_cam_ResetCam = CreateCameraSetup()
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_ROTATION, 90.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_ANGLE_OF_ATTACK, 304.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_TARGET_DISTANCE, 1862.8, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_ResetCam, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_ResetCam, -276.9, -696.2, 0.0)
gg_cam_LookYetty = CreateCameraSetup()
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_ROTATION, 124.8, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_ANGLE_OF_ATTACK, 328.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_TARGET_DISTANCE, 1051.5, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookYetty, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_LookYetty, -2902.1, -5366.9, 0.0)
gg_cam_PeonLookOnYetty = CreateCameraSetup()
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_ROTATION, 258.2, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_ANGLE_OF_ATTACK, 319.2, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_TARGET_DISTANCE, 1272.3, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnYetty, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_PeonLookOnYetty, -2922.1, -4613.7, 0.0)
gg_cam_PeonReadyToYetty = CreateCameraSetup()
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_ROTATION, 87.4, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_ANGLE_OF_ATTACK, 338.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_TARGET_DISTANCE, 955.9, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonReadyToYetty, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_PeonReadyToYetty, -2745.0, -4498.0, 0.0)
gg_cam_PeonLookOnPrise = CreateCameraSetup()
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_ROTATION, 80.1, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.8, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_TARGET_DISTANCE, 955.9, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_PeonLookOnPrise, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_PeonLookOnPrise, -7408.1, 4600.5, 0.0)
gg_cam_NydePeon = CreateCameraSetup()
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_ROTATION, 100.1, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.4, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_TARGET_DISTANCE, 228.8, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_NydePeon, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_NydePeon, -13022.1, 8406.6, 0.0)
gg_cam_LookAnime = CreateCameraSetup()
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_ROTATION, 27.4, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_ANGLE_OF_ATTACK, 327.6, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_TARGET_DISTANCE, 869.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_LookAnime, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_LookAnime, -11145.9, 9598.4, 0.0)
gg_cam_WolfEnd = CreateCameraSetup()
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_ROTATION, 95.2, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_ANGLE_OF_ATTACK, 310.4, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_TARGET_DISTANCE, 1272.3, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_WolfEnd, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_WolfEnd, -5734.4, -8980.7, 0.0)
gg_cam_SeeOnWolf = CreateCameraSetup()
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_ROTATION, 92.9, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_ANGLE_OF_ATTACK, 323.2, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_TARGET_DISTANCE, 2253.9, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_SeeOnWolf, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_SeeOnWolf, -11820.9, 3269.4, 0.0)
gg_cam_TalkMerch = CreateCameraSetup()
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_ROTATION, 73.1, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_ANGLE_OF_ATTACK, 316.4, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_TARGET_DISTANCE, 955.9, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_TalkMerch, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_TalkMerch, 982.6, -2286.1, 0.0)
gg_cam_InPeonHome = CreateCameraSetup()
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_ROTATION, 30.2, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_ANGLE_OF_ATTACK, 320.4, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_TARGET_DISTANCE, 460.9, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_FARZ, 6050.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_InPeonHome, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_InPeonHome, 858.1, -1843.9, 0.0)
gg_cam_TavernaEnd = CreateCameraSetup()
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_ROTATION, 128.9, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_ANGLE_OF_ATTACK, 324.7, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_TARGET_DISTANCE, 955.9, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_ROLL, 0.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_FARZ, 5000.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_NEARZ, 16.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
CameraSetupSetField(gg_cam_TavernaEnd, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
CameraSetupSetDestPosition(gg_cam_TavernaEnd, -1884.6, -1877.4, 0.0)
end

--CUSTOM_CODE
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.04.2021 23:55
---
-----  
function UnitAddForceSimpleClean(hero, angle, speed, distance, flag)
    local currentdistance = 0
    if onForces[GetHandleId(hero)] == nil then
        onForces[GetHandleId(hero)] = true
        --print(" ?")
    end
    if onForces[GetHandleId(hero)] then
        onForces[GetHandleId(hero)] = false
        local iteration=0
        local eff=nil
        TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
            currentdistance = currentdistance + speed
            iteration=iteration+1
            local x, y = GetUnitXY(hero)
            local vector = Vector:new(x, y, GetUnitZ(hero))
            local newVector = vector
            newVector = VectorSum(newVector, vector:yawPitchOffset(speed, angle * (math.pi / 180), 0.0))
            SetUnitPositionSmooth(hero, newVector.x, newVector.y)
            if flag then
                for i = 1, #flag do
                    if flag[i] == "MoveWMe" then
                        local near = FindNearEnemyXY(hero, 80, newVector.x, newVector.y)

                        if IsUnitInRange(hero, near, 50) then
                            local data = HERO[0]
                            if IsUnitType(near, UNIT_TYPE_HERO) then
                                if not data.SpaceForce and not data.sit then
                                    SetUnitX(near, newVector.x)
                                    SetUnitY(near, newVector.y)
                                    SetUnitZ(near, GetUnitZ(hero) + 15)
                                end
                            else
                                if data.CatchUnit == near then
                                    --print("  ", GetUnitName(data.CatchUnit))
                                else
                                    SetUnitX(near, newVector.x)
                                    SetUnitY(near, newVector.y)
                                    SetUnitZ(near, GetUnitZ(hero) + 15)
                                end
                            end
                        else
                            SetUnitZ(near, GetTerrainZ(newVector.x, newVector.y))
                        end
                    elseif flag[i] == "Dust" then
                        if iteration==1 then
                            eff=AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", newVector.x, newVector.y)
                        end
                        BlzSetSpecialEffectX(eff,newVector.x)
                        BlzSetSpecialEffectY(eff,newVector.y)
                    end
                end
            end
            if currentdistance >= distance then
                --print(" ")
                DestroyTimer(GetExpiredTimer())
                DestroyEffect(eff)
                onForces[GetHandleId(hero)] = true
            end
        end)
    end
end

onForces = {}
function UnitAddForceSimple(hero, angle, speed, distance, flag, pushing)
    --      
    --print(" ",GetUnitName(hero))
    local currentdistance = 0
    if onForces[GetHandleId(hero)] == nil then
        onForces[GetHandleId(hero)] = true
        --print(" ")
    end
    --TODO   and not IsUnitType(hero, UNIT_TYPE_FLYING)
    if not IsUnitType(hero, UNIT_TYPE_STRUCTURE) and GetUnitTypeId(hero) ~= FourCC("nglm") and (onForces[GetHandleId(hero)] or flag == "ignore") and GetUnitAbilityLevel(hero, FourCC("Beng")) == 0 and not UnitHasBow(hero) then
        onForces[GetHandleId(hero)] = false
        local m = 0
        --print("1")
        local tempDamageGroup = CreateGroup()
        local damageOnWall = false
        local effDash = nil
        local ignoreDest = false
        if IsUnitType(hero, UNIT_TYPE_HERO) then
            local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
            data.sit = false
            --print("   ")
        end

        if flag == "ignore" or flag == "shieldDash" then
            local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
            if data.DashDamageON or flag == "shieldDash" then
                local effDashModel = "Hive\\Valiant Charge\\Valiant Charge Fel\\Valiant Charge Fel"
                effDash = AddSpecialEffectTarget(effDashModel, hero, "origin")
                ignoreDest = data.IgnoreDest --   
            end
        end

        if true then
            --print(" ")
            local vector = Vector:new(GetUnitX(hero), GetUnitY(hero), GetUnitZ(hero))
            local newVector = vector
            newVector = VectorSum(newVector, vector:yawPitchOffset(speed, angle * (math.pi / 180), 0.0))
            SetUnitPositionSmooth(hero, newVector.x, newVector.y)
        end
        local countTick = 0

        TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
            currentdistance = currentdistance + speed
            countTick = countTick + 1
            local x, y = GetUnitXY(hero)
            local vector = Vector:new(x, y, GetUnitZ(hero))
            local newVector = vector
            newVector = VectorSum(newVector, vector:yawPitchOffset(speed, angle * (math.pi / 180), 0.0))

            local makeJump = false
            if IsUnitType(hero, UNIT_TYPE_HERO) then
                --if GetUnitData(hero).QHighJump then
                --    makeJump = true
                --end
                local data = GetUnitData(hero)
                data.StatWay = data.StatWay + speed
            end

            if flag == "ignore" or makeJump then

                --print("")
                local fx, fy = newVector.x, newVector.y--MoveXY(newVector.x, newVector.y,80,angle) --
                --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", fx,fy))
                local is, d, allD = PointContentDestructable(fx, fy, 110, true)
                if is then
                    --print(" - ")
                end
                if IsUnitType(hero, UNIT_TYPE_HERO) then

                end
                local data = GetUnitData(hero)
                if data.REffect then
                    BlzSetSpecialEffectPosition(data.REffect, newVector.x, newVector.y, GetTerrainZ(newVector.x, newVector.y) + 200)
                end

                if CheckTableDestructableForCurrentID(allD, FourCC("B00C")) or data.OnDeep then
                    --  
                    data.OnDeep = true
                    SetUnitX(hero, newVector.x)
                    SetUnitY(hero, newVector.y)
                    if currentdistance >= 200 then
                        data.OnDeep = false
                        --print("")
                    end
                    --print("  ")
                else
                    --SetUnitPositionSmooth(hero, newX, newY)
                    SetUnitPositionSmooth(hero, newVector.x, newVector.y)
                    --print(flag)
                end
            else
                --SetUnitPositionSmooth(hero, newX, newY) --     
                SetUnitPositionSmooth(hero, newVector.x, newVector.y)
                --print(flag)
            end

            if GetUnitTypeId(hero) ~= HeroID and GetUnitTypeId(pushing) == HeroID and false then
                -- 

                local PerepadZ = GetTerrainZ(MoveXY(x, y, 120, angle)) - GetTerrainZ(x, y)
                --print(PerepadZ)
                if (PointContentDestructable(newVector.x, newVector.y, 120, false) or PerepadZ > 20) and not damageOnWall then
                    local data = HERO[GetPlayerId(GetOwningPlayer(pushing))]
                    local bonus = 0
                    if not data.WallHitCount then
                        data.WallHitCount = 0
                    end
                    if data.WallHitCount <= 2 then
                        FlyTextTagShieldXY(x, y, L("  ", "Wall hit"), GetOwningPlayer(pushing))
                        PlayerSeeNoiseInRangeTimed(0.2, x, y)

                    else
                        FlyTextTagShieldXY(x, y, L("  ", "Trapped in corner"), GetOwningPlayer(pushing), "red")
                        bonus = 1000
                        PlayerSeeNoiseInRangeTimed(0.5, x, y)
                    end
                    data.WallHitCount = data.WallHitCount + 1
                    TimerStart(CreateTimer(), 3, false, function()
                        data.WallHitCount = data.WallHitCount - 1
                        DestroyTimer(GetExpiredTimer())
                    end)
                    --print(data.WallHitCount)
                    local fh = GetFHByName(data, "Murloc Mutant Card")
                    if fh then
                        local ch = GetFrameCharges(fh)
                        bonus = bonus + 50 * ch
                    end

                    local damage = 50 + bonus
                    if not data.WallDamage then
                        data.WallDamage = 0
                    end
                    damage = damage + data.WallDamage
                    UnitDamageTarget(pushing, hero, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
                    --print("    ")
                    damageOnWall = true
                end
            end
            if flag == "lizard" then
                UnitDamageArea(hero, 50, GetUnitX(hero), GetUnitY(hero), 120, "ForceTotem")
            end
            if flag == "shieldDash" then
                GetUnitData(hero).ShieldDashReflect = true
                if UnitDamageArea(hero, GetUnitData(hero).DamageInShieldPerDash, GetUnitX(hero), GetUnitY(hero), 120, "ForceTotem") then
                    normal_sound("Sound\\Units\\Combat\\MetalMediumBashStone" .. GetRandomInt(1, 3), GetUnitXY(hero))
                end
            end
            if flag == "RunSkeleton" then
                UnitDamageArea(hero, 1, GetUnitX(hero), GetUnitY(hero), 120)
            end
            if flag == "ScorpioRun" then
                --UnitDamageArea(hero, 1, GetUnitX(hero), GetUnitY(hero), 120)
                --QueueUnitAnimation(hero,"walk")
            end
            if flag == "RunEtti" then
                --print("        ?")
                UnitDamageArea(hero, 20, GetUnitX(hero), GetUnitY(hero), 120)
                --DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic",x,y))
                PlayerSeeNoiseInRangeTimed(0.5, x, y)
            end
            if flag == "AttackAndRunWolf" and countTick >= 10 then
                --  
                --print("  ")
                countTick = 0
                WolfSlashAttack(hero)
            end
            if flag == "ignore" then
                local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
                --print("    ")

                if data.DashDamageON then
                    UnitDamageArea(hero, data.DashDamageON, newX, newY, 80)
                    --print(" ")
                end
                ----------------------------   


                -----------------------------


            end

            if flag == "dust" then
                DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", newX, newY))
            end

            if currentdistance >= distance then
                -- 
                --or (data.OnWater and data.OnTorrent==false)
                --data.IsDisabled=false
                --data.OnWater=false
                if flag == "shieldDash" then
                    local data = GetUnitData(hero)
                    data.ShieldDashReflect = false
                end
                if effDash then
                    DestroyEffect(effDash)
                end
                if flag == "RunSkeleton" then
                    BlzPauseUnitEx(hero, false)
                    SetUnitTimeScale(hero, 1)
                    if UnitAlive(hero) then
                        ResetUnitAnimation(hero)
                    end
                end
                if flag == "RunEtti" then
                    BlzPauseUnitEx(hero, false)
                    SetUnitTimeScale(hero, 1)
                    if UnitAlive(hero) then
                        ResetUnitAnimation(hero)
                    end
                end
                if flag == "AttackAndRunWolf" then
                    BlzPauseUnitEx(hero, false)
                    SetUnitTimeScale(hero, 1)
                    WolfRoundMove(hero)
                    if UnitAlive(hero) then
                        ResetUnitAnimation(hero)
                    end
                end
                if flag == "ignore" then
                    --print("   ")
                    --HERO[GetPlayerId(GetOwningPlayer(hero))].AttackInForce=false --

                    local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
                    data.OnDeep = false
                    IssueImmediateOrder(hero, "stop")
                    SetUnitZ(data.UnitHero, 0)
                    if data.IsMoving then
                        --print(" ")

                        if UnitAlive(data.UnitHero) then
                            if data.BowReady then
                                -- data.CurrentWeaponType ~= "bow" then
                                --SetUnitAnimationByIndex(data.UnitHero, IndexAnimationWalk)
                            else
                                --print("       ")
                                if not IsUnitStunned(hero) then
                                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationWalk)
                                end
                            end
                        end
                    end
                    DestroyEffect(data.chargeEff)
                    data.ResetSeriesTime = 0
                    if data.IllusionDashCDFH then
                        if not data.IllusionDashCurrentCD then
                            data.IllusionDashCurrentCD = 1
                        end
                        if data.IllusionDashCurrentCD <= 0 then
                            local talon = GlobalTalons[data.pid]["HeroBlademaster"][4]
                            local cd = 10
                            data.IllusionDashCurrentCD = cd
                            StartFrameCD(cd, data.IllusionDashCDFH)
                            local damage = talon.DS[talon.level]
                            UnitDamageArea(hero, damage, newX, newY, 150)
                            UnitAddForceSimple(hero, angle - 180, 25, 200, "ignore")
                            TimerStart(CreateTimer(), cd, false, function()
                                data.IllusionDashCurrentCD = 0
                                DestroyTimer(GetExpiredTimer())
                            end)
                        end
                    end

                    data.ReleaseQ = false
                end
                if flag == "forceAttack" then
                    BlzPauseUnitEx(hero, false)
                    SetUnitTimeScale(hero, 1)
                    UnitDamageArea(hero, 50, newX, newY, 150)
                    DestroyEffect(AddSpecialEffect("SystemGeneric\\ThunderclapCasterClassic", newX, newY))
                end
                if flag == "qjump" then
                    local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
                    if data.CurrentWeaponType == "shield" then
                        SetUnitTimeScale(data.UnitHero, 1)
                    end
                    SpellSlashQ(data)
                    --print("  ")
                    if data.DoubleClap then
                        TimerStart(CreateTimer(), 0.35, false, function()
                            SpellSlashQ(data)
                            DestroyTimer(GetExpiredTimer())
                        end)
                    end
                    data.ReleaseQ = false
                end
                DestroyGroup(tempDamageGroup)
                DestroyTimer(GetExpiredTimer())
                onForces[GetHandleId(hero)] = true
                --print("stop cur="..currentdistance.." dist="..distance)
            end
        end)
    end
end

function UnitHasBow(hero)
    local has = false
    if IsUnitType(hero, UNIT_TYPE_HERO) then
        if HERO[GetPlayerId(GetOwningPlayer(hero))] then
            has = GetUnitData(hero).BowReady
            if has then
                --print("    ")
            end
        end
    end
    return has
end

function PlayerSeeNoiseInRangeTimed(duration, x, y)
    --DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x, y))
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        if PlayerIsPlaying[i] then
            local data = HERO[i]
            local hero = data.UnitHero
            if IsUnitInRangeXY(hero, x, y, 500) then
                CameraSetEQNoiseForPlayer(GetOwningPlayer(hero), 3)
                TimerStart(CreateTimer(), duration, false, function()
                    CameraClearNoiseForPlayer(GetOwningPlayer(hero))
                    DestroyTimer(GetExpiredTimer())
                end)
            end
        end
    end

end

function MiniChargeOnArea(data)
    local e = nil
    local x, y = GetUnitXY(data.UnitHero)
    local has = false
    GroupEnumUnitsInRange(perebor, x, y, 120, nil)
    while true do
        e = FirstOfGroup(perebor)

        if e == nil then
            break
        end
        if UnitAlive(e) and e ~= data.UnitHero then
            local angle = AngleBetweenUnits(data.UnitHero, e)
            --print("    ")
            if not IsUnitAlly(data.UnitHero, GetOwningPlayer(e)) then
                UnitAddForceSimple(e, angle, 5, 80)
                has = true

            end
        end
        GroupRemoveUnit(perebor, e)
    end
    return has
end

function Chk2Way(x, y, x1, x2)
    local wayClean = true
    local step = 40
    local d = DistanceBetweenXY(x, y, x1, x2)
    local angle = AngleBetweenXY(x, y, x1, x2) / bj_DEGTORAD
    local k = d // step
    for i = 1, k do
        local nx, ny = MoveXY(x, y, step * (i - 1), angle)
        if not IsTerrainPathable(nx, ny, PATHING_TYPE_WALKABILITY) then
            -- print("")

        else
            --print("  ")
            wayClean = false
        end
    end
    return wayClean
end

function MoveEffectTimedWSpeed(eff, speed, angle, timed)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        timed = timed - TIMER_PERIOD64
        local x, y, z = BlzGetLocalSpecialEffectX(eff), BlzGetLocalSpecialEffectY(eff), BlzGetLocalSpecialEffectZ(eff)
        x, y = MoveXY(x, y, speed, angle)
        BlzSetSpecialEffectPosition(eff, x, y, z)
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        if timed <= 0 then
            DestroyEffect(eff)
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function ChkEndpoint(x, y, xEnd, yEnd)
    --local wayClean = true
    local step = 40
    local d = DistanceBetweenXY(x, y, xEnd, yEnd)
    local angle = AngleBetweenXY(x, y, xEnd, yEnd) / bj_DEGTORAD
    local k = d // step
    for i = 1, k do
        local nx, ny = MoveXY(x, y, step * (i - 1), angle)
        --
        local is, destructable, all = PointContentDestructable(nx, ny, step * 2, true)
        if GetDestructableTypeId(destructable) == FourCC("B00C") then
            --  
            DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", nx, ny))
        end
        print(#all)
    end
    --return wayClean
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 25.10.2023 20:17
---
function MakeUnitArtMissile(hero, unit, angle, speed, distance, MaxHeight, flag)
    --UnitAddAbility(unit, FourCC("Aloc"))
    IsUnitFall[GetHandleId(unit)] = true
    local range = 200
    local currentdistance = 0
    local i = 0
    local ZStart = GetUnitZ(hero) + 40
    if not MaxHeight then
        MaxHeight = 0
    end
    local x, y = GetUnitXY(hero)
    local damage = 50

    if IsUnitType(hero, UNIT_TYPE_HERO) then
        local data = GetUnitData(hero)
        damage = data.BaseDamage * 1
    end

    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        currentdistance = currentdistance + speed
        local f = ParabolaZ(MaxHeight, distance, i * speed) + ZStart
        i = i + 1
        x, y = MoveXY(x, y, speed, angle)
        if flag then
            --SetUnitPositionSmooth(unit,x,y)
        else
            SetUnitX(unit, x)
            SetUnitY(unit, y)
            --print("  ")
        end

        SetUnitZ(unit, f)
        --BlzSetSpecialEffectScale(eff,5)
        if i > 3 and f <= GetTerrainZ(x, y) then
            --
            --print("")
            DestroyTimer(GetExpiredTimer())
            IsUnitFall[GetHandleId(unit)] = false
            --local _,d= PointContentDestructable(x,y,60,true,1)
            local stunDuration=0.01
            if flag then
                for k = 1, #flag do
                    if flag[k] == "RemoveStun" then
                        TimerStart(CreateTimer(), stunDuration, false, function()
                            UnitRemoveStun(unit)
                            SetUnitAnimationByIndex(unit,24)
                            QueueUnitAnimation(unit,"stand")
                        end)
                    elseif flag[k]=="Stun" then
                        stunDuration=1.5
                        TimerStart(CreateTimer(), stunDuration, false, function()
                            UnitRemoveStun(unit)
                            SetUnitAnimationByIndex(unit,24)
                            QueueUnitAnimation(unit,"stand")
                        end)
                    end
                end

            else -- 
                DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", x, y))
                UnitDamageArea(hero, damage, x, y, range)
                DamageDestructableInRangeXY(hero, damage, range, x, y)
                KillDestructableByTypeInPoint(ButtonsIDTable, range, x, y)
            end


        end
    end)
end

function UnitCreateArtMissile(hero, angle, speed, distance, MaxHeight, HasMarker, effModel, markEffect)
    local range = 100
    local currentdistance = 0
    local i = 0
    local ZStart = GetUnitZ(hero) + 40
    if not MaxHeight then
        MaxHeight = 0
    end
    local x, y = GetUnitXY(hero)
    local eff = AddSpecialEffect(effModel, x, y)
    local damage = 50

    if IsUnitType(hero, UNIT_TYPE_HERO) then
        local data = GetUnitData(hero)
        damage = data.BaseDamage * 0.5
    end

    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        currentdistance = currentdistance + speed
        local f = ParabolaZ(MaxHeight, distance, i * speed) + ZStart
        i = i + 1
        x, y = MoveXY(x, y, speed, angle)
        BlzSetSpecialEffectX(eff, x)
        BlzSetSpecialEffectY(eff, y)
        BlzSetSpecialEffectZ(eff, f)
        --BlzSetSpecialEffectScale(eff,5)
        if i > 3 and f <= GetTerrainZ(x, y) then
            DestroyTimer(GetExpiredTimer())
            local ox, oy = GetUnitXY(hero)
            SetUnitUserData(hero, 0)
            SetUnitX(hero, x)
            SetUnitY(hero, y)
            UnitDamageArea(hero, damage, x, y, range)
            SetUnitX(hero, ox)
            SetUnitY(hero, oy)
            TimerStart(CreateTimer(), TIMER_PERIOD64, false, function()
                SetUnitUserData(hero, 1)
            end)
            --local _,d= PointContentDestructable(x,y,60,true,1)
            DamageDestructableInRangeXY(hero, damage, range, x, y)
            KillDestructableByTypeInPoint(ButtonsIDTable, range, x, y)
            if not effModel then
                --DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", newX, newY))
            else
                DestroyEffect(eff)
                DestroyEffect(markEffect)
                DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", x, y))
                --local near=FindNearEnemyXY()
                if IsUnitInRangeXY(hero, x, y, 100) then
                    local ab = AngleBetweenXY(x, y, GetUnitXY(hero))/ bj_DEGTORAD
                    UnitFallGround(hero, ab, 200)
                end
            end
        end
    end)
end
ButtonsIDTable = { FourCC('DTfx'), FourCC('B00E'), FourCC('B00D'), FourCC('B00F') }
function KillDestructableByTypeInPoint(idTable, range, x, y)
    SetRect(GlobalRect, x - range, y - range, x + range, y + range)
    EnumDestructablesInRect(GlobalRect, nil, function()
        local d = GetEnumDestructable()
        if GetDestructableLife(d) > 0 then
            for i = 1, #idTable do
                if GetDestructableTypeId(d) == idTable[i] then
                    --print(GetDestructableName(d),idTable[i])
                    KillDestructable(d)
                    normal_sound("Sound\\Interface\\BattlenetDeath1A", x, y)
                end
            end
        end
    end)
end
function CreateAndForceBullet(hero, angle, speed, effectmodel, xs, ys, damage, maxDistance, delay)

    local CollisionRange = 90
    if not damage then
        damage = 200
    end
    if not xs then
        xs, ys = GetUnitXY(hero)
    end
    if not maxDistance then
        maxDistance = 1500
    end
    if not delay then
        delay = 0
    end
    local zhero = GetUnitZ(hero) + 60

    if IsUnitTrap(hero) then
        --   
        CollisionRange = 60
        zhero = GetUnitZ(hero) + 95
    end

    if effectmodel == "Butcher\\Axe Missile" then
        --print(effectmodel)
    end
    if effectmodel == "BlastMissile" then
        CollisionRange = 180
        delay = CollisionRange
    end
    if effectmodel == "Firebrand Shot Silver" then
        local data = GetUnitData(hero)
        if data.EggCount > 0 then
            damage = damage + data.BonusDamage
        else
            data.BonusDamage = 0
        end
    end

    local currentDistance = 0
    local bullet = AddSpecialEffect(effectmodel, xs, ys)
    BlzSetSpecialEffectYaw(bullet, math.rad(angle))
    local CollisionEnemy = false
    local CollisisonDestr = false
    local DamagingUnit = nil --     
    if effectmodel == "Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl" then
        BlzSetSpecialEffectScale(bullet, 0.7)
    end

    BlzSetSpecialEffectZ(bullet, zhero)
    local angleCurrent = angle
    local heroCurrent = hero
    local dist = 0
    local rotationShieldAngle = 0
    local newAngle = angle
    local enemy = nil
    local bounceCount = 0
    local bounceMax = 0
    if IsUnitType(hero, UNIT_TYPE_HERO) then
        bounceMax = 5
    end

    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        dist = dist + speed
        delay = delay - speed
        currentDistance = currentDistance + speed
        local x, y, z = BlzGetLocalSpecialEffectX(bullet), BlzGetLocalSpecialEffectY(bullet), BlzGetLocalSpecialEffectZ(bullet)
        local zGround = GetTerrainZ(MoveX(x, speed * 2, angleCurrent), MoveY(y, speed * 2, angleCurrent))

        if effectmodel == "Firebrand Shot Silver" and currentDistance >= 300 then
            -- 

            if enemy then
                newAngle = AngleBetweenXY(x, y, GetUnitXY(enemy)) / bj_DEGTORAD
                angleCurrent = lerpTheta(angleCurrent, newAngle, TIMER_PERIOD * 0) --     8
            else
                _, enemy = UnitDamageArea(hero, 0, x, y, 300)
            end
        end

        BlzSetSpecialEffectYaw(bullet, math.rad(angleCurrent))
        local nx, ny = MoveXY(x, y, speed, angleCurrent)
        BlzSetSpecialEffectPosition(bullet, nx, ny, z) --  z-2


        local bounceFact = false
        local b, d = PointContentDestructable(nx, ny, CollisionRange, false, 0, hero)
        if b then
            KillDestructableByTypeInPoint({ FourCC("B00E") }, 80, x, y)
        end
        if GetDestructableTypeId(d) == FourCC("B005") or GetDestructableTypeId(d) == FourCC("B00C") then
            --    
            --print(" ")
        else
            if IsUnitType(hero, UNIT_TYPE_HERO) then
                -- print(GetDestructableName(d))
                if not d then
                    --print(" Bounce",GetDestructableName(d))
                end
                if bounceCount <= bounceMax then
                    local angleOrig = angleCurrent
                    angleCurrent, bounceFact = CHKBouncing(x, y, nx, ny, speed) ---------------- 

                    if bounceFact then
                        bounceCount = bounceCount + 1
                        nx, ny = MoveXY(x, y, speed, angleCurrent)
                        --print(bounceCount)
                    else
                        angleCurrent = angleOrig
                    end
                else
                    --print('  ',bounceMax)

                    DestroyBullet(bullet)
                    DestroyTimer(GetExpiredTimer())
                end
            end
        end

        SetFogStateRadius(GetOwningPlayer(heroCurrent), FOG_OF_WAR_VISIBLE, x, y, 400, true)--  
        if effectmodel == "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl" then
            UnitDamageArea(hero, 5, x, y, 90, "blackHole")
        end
        if effectmodel == "stoneshild" then
            rotationShieldAngle = rotationShieldAngle + 25
            BlzSetSpecialEffectRoll(bullet, math.rad(90))
            BlzSetSpecialEffectYaw(bullet, math.rad(rotationShieldAngle))
            local data = GetUnitData(hero)
            if data.ReversShield then
                angleCurrent = AngleBetweenXY(x, y, GetUnitX(hero), GetUnitY(hero)) / bj_DEGTORAD
            end
            if data.ShieldThrow then
                if IsUnitInRangeXY(hero, x, y, 80) and data.ReversShield then
                    data.EffInRightHand = AddSpecialEffectTarget("stoneshild", data.UnitHero, "hand, right")
                    -- data.ShieldThrow = false
                    DestroyBullet(bullet)
                    DestroyTimer(GetExpiredTimer())
                    data.ReversShield = false
                    data.ShieldThrow = false
                    print("   ")
                end
            end
        end
        --------- 
        if effectmodel == "Hive\\Culling Slash\\Culling Slash\\Culling Slash" then
            BlzSetSpecialEffectScale(bullet, 0.001)
            local tempEff = AddSpecialEffect(effectmodel, nx, ny)
            BlzSetSpecialEffectScale(tempEff, 0.4)
            DestroyEffect(tempEff)
            UnitDamageArea(hero, damage, x, y, 90)
        end

        if effectmodel == "Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl" then
            UnitDamageArea(hero, damage, x, y, 90)
        end
        -----  

        local ZBullet = BlzGetLocalSpecialEffectZ(bullet)

        CollisionEnemy, DamagingUnit = UnitDamageArea(heroCurrent, 0, x, y, CollisionRange)
        --print(CollisionEnemy, DamagingUnit)
        local reverse = false

        if HERO[GetPlayerId(GetOwningPlayer(DamagingUnit))] then
            local data = HERO[GetPlayerId(GetOwningPlayer(DamagingUnit))]
            if data.UnitHero and GetUnitTypeId(DamagingUnit) == HeroID then
                --print("  ")
                if data.PressSpin and data.CurrentWeaponType == "shield" and data.PressSpin or data.ShieldDashReflect or data.OrbitalShield then
                    --print("   ")
                    if effectmodel == "Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl" then
                        AddChaos(data, 1)
                    end
                    local xe, ye = GetUnitXY(DamagingUnit)
                    --    
                    -- x1, x2 -   
                    -- x2, y2 -   
                    -- orientation -     
                    -- width -     
                    -- radius -    

                    if IsPointInSector(x, y, xe, ye, GetUnitFacing(DamagingUnit), 90, 200) or (data.OrbitalShieldAngle and function()
                        return IsPointInSector(x, y, xe, ye, data.OrbitalShieldAngle, 90, 200)
                    end) then

                        if not data.DestroyMissile then
                            FlyTextTagShieldXY(xe, ye, L("", "Parry"), GetOwningPlayer(data.UnitHero))
                            heroCurrent = DamagingUnit
                            reverse = true
                            angleCurrent = GetUnitFacing(DamagingUnit)--180 + AngleBetweenXY(data.fakeX, data.fakeY, GetUnitXY(hero)) / bj_DEGTORAD
                            if data.MegaReflector then
                                damage = damage * 4
                                speed = speed * 2
                                maxDistance = maxDistance * 2
                            end
                        else
                            FlyTextTagShieldXY(xe, ye, L("", "Destroyed"), GetOwningPlayer(data.UnitHero))
                            reverse = true
                            DestroyBullet(bullet)
                            DestroyTimer(GetExpiredTimer())
                        end

                        local eff = AddSpecialEffect("SystemGeneric\\DefendCaster", GetUnitXY(DamagingUnit))
                        local AngleSource = AngleBetweenUnits(heroCurrent, DamagingUnit)
                        BlzSetSpecialEffectYaw(eff, math.rad(AngleSource - 180))
                        DestroyEffect(eff)

                    end

                end

                if data.Reflected or data.SpinReflect or data.AttackInForce then
                    --print(" ")

                    if effectmodel == "Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl" then
                        AddChaos(data, 1)
                    end

                    if not data.DestroyMissile then
                        FlyTextTagShieldXY(nx, ny, L("", "Parry"), GetOwningPlayer(data.UnitHero))
                        heroCurrent = DamagingUnit
                        reverse = true
                        angleCurrent = AngleBetweenUnits(DamagingUnit, hero)
                    else
                        reverse = true
                        --print("  ")
                        FlyTextTagShieldXY(nx, ny, L("", "Destroyed"), GetOwningPlayer(data.UnitHero))
                        DestroyBullet(bullet)
                        DestroyTimer(GetExpiredTimer())
                    end
                end
            end
        end
        CollisisonDestr = PointContentDestructable(x, y, CollisionRange, false, 0, hero)
        local PerepadZ = zGround - z
        --print(CollisisonDestr)
        --if not reverse and delay <= 0 and (dist > maxDistance or CollisionEnemy or IsUnitType(DamagingUnit, UNIT_TYPE_STRUCTURE) or PerepadZ > 20) then -- 
        if not reverse and delay <= 0 and (dist > maxDistance or CollisionEnemy or PerepadZ > 20) then
            --or CollisisonDestr
            --
            --or IsTerrainPathable(nx, ny, PATHING_TYPE_WALKABILITY)
            --print(" ", DamagingUnit,CollisionEnemy, reverse, delay, maxDistance, PerepadZ, dist)
            if CollisisonDestr then

                if effectmodel == "Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl" then
                    -- print("  ")
                    if IsUnitType(hero, UNIT_TYPE_HERO) then
                        local data = GetUnitData(hero)
                        if data.BlastDamage then
                            local eff = AddSpecialEffect("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl", nx, ny)
                            BlzSetSpecialEffectScale(eff, 0.1)
                            TimerStart(CreateTimer(), 1 / 32, false, function()
                                BlzSetSpecialEffectScale(eff, 3)
                                DestroyEffect(eff)
                                DestroyTimer(GetExpiredTimer())
                            end)
                            UnitDamageArea(hero, data.BlastDamage, nx, ny, 300)
                            --print("")
                        end
                    end
                end
            end
            PointContentDestructable(x, y, CollisionRange, true, 0, heroCurrent)
            local flag = nil
            if GetUnitTypeId(heroCurrent) == FourCC("hsor") then
                flag = "all"
            end
            SetUnitUserData(hero,0)
            local ox, oy = GetUnitXY(hero)
            SetUnitX(hero, x)
            SetUnitY(hero, y)
            UnitDamageArea(heroCurrent, damage, x, y, CollisionRange, flag) --     
            SetUnitX(hero, ox)
            SetUnitY(hero, oy)
            TimerStart(CreateTimer(), TIMER_PERIOD64, false, function()
                SetUnitUserData(hero,1)
            end)

            if effectmodel == "snowball" then
                local tempEff = AddSpecialEffect("Abilities\\Weapons\\LichMissile\\LichMissile", x, y)
                BlzSetSpecialEffectZ(tempEff, z)
                DestroyEffect(tempEff)
            end
            if GetUnitTypeId(DamagingUnit) == FourCC("h009") and GetUnitUserData(DamagingUnit) == 100 then
                --  
                SetUnitFacingToFaceUnitTimed(DamagingUnit, heroCurrent, 0)
                SetUnitAnimation(DamagingUnit, "attack")
                --HealUnit(DamagingUnit,damage*0.7)
                --print(" ?")
                FlyTextTagShieldXY(GetUnitX(DamagingUnit), GetUnitY(DamagingUnit), "", GetOwningPlayer(heroCurrent))
                CreateAndForceBullet(DamagingUnit, GetUnitFacing(DamagingUnit) + GetRandomInt(-15, 15), 60, effectmodel)

                local eff = AddSpecialEffect("DefendCaster", GetUnitXY(DamagingUnit))
                local AngleSource = AngleBetweenUnits(heroCurrent, DamagingUnit)
                BlzSetSpecialEffectYaw(eff, math.rad(AngleSource - 180))
                DestroyEffect(eff)
                QueueUnitAnimation(DamagingUnit, "stand")
            end

            if DamagingUnit and IsUnitType(heroCurrent, UNIT_TYPE_HERO) then
                local data = GetUnitData(heroCurrent)
                --print("  - ")
                if GetUnitTypeId(DamagingUnit) == FourCC("opeo") then
                    SetUnitAnimation(DamagingUnit, "death")
                    UnitAddAbility(DamagingUnit, FourCC("Aloc"))
                    peonRescue = peonRescue + 1
                    normal_sound("Speech\\Rofl\\disconnect_" .. GetRandomInt(1, 4), GetUnitXY(DamagingUnit))

                end
                if GetUnitTypeId(DamagingUnit) == FourCC("e006") and false then
                    --
                    HealUnit(DamagingUnit)
                    SetUnitOwner(DamagingUnit, Player(10), true)
                    local refAngle = 90
                    local normal = 0
                    local v1 = Vector:new(x + 2, y + 2, z)
                    local v2 = Vector:new(x + 2, y, z)
                    local v3 = Vector:new(x, y + 2, z)
                    normal = GetNormal(v1, v2, v3)

                    local vector = Vector:new(x, y, z)
                    local newVector = vector
                    newVector = VectorSum(newVector, vector:yawPitchOffset(speed, angle * (math.pi / 180), 0.0))
                    local curVelocity = newVector
                    --print(curVelocity.x,"curVelocity")
                    --print(normal.x,"normal")
                    local refVector = Reflect(curVelocity, normal);

                    refAngle = AngleBetweenXY(x, y, refVector.x, refVector.y) / bj_DEGTORAD
                    --print("", "=", normal, "=", refAngle)

                    CreateAndForceBullet(heroCurrent, refAngle, speed, effectmodel, GetUnitX(DamagingUnit), GetUnitY(DamagingUnit), nil, nil, 200)
                end

                if data.KnockRMB then
                    UnitAddForceSimple(DamagingUnit, angleCurrent, speed / 4, 300, nil, heroCurrent)
                end
            end
            DestroyBullet(bullet)
            DestroyTimer(GetExpiredTimer())
            --print("   ")

            if effectmodel == "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl" then
                --print("")
                --UnitDamageArea(heroCurrent, damage, x, y, CollisionRange*2)
            end
            --
            if effectmodel == "stoneshild" then
                if GetUnitData(hero).ShieldThrow then
                    --print("  ")
                    local data = GetUnitData(hero)
                    data.ReversShield = true
                    if DamagingUnit then
                        ConditionCastLight(data)
                        normal_sound("Abilities\\Weapons\\Axe\\AxeMissile" .. GetRandomInt(1, 2), GetUnitXY(GetUnitData(hero).UnitHero))
                    end
                    angle = AngleBetweenXY(x, y, GetUnitX(hero), GetUnitY(hero)) / bj_DEGTORAD
                    local new = CreateAndForceBullet(hero, angle, 60, "stoneshild", x, y, 200, 1200, 1200)
                    BlzSetSpecialEffectRoll(new, math.rad(90))
                else

                end
            end

            if effectmodel == "units\\critters\\Frog\\Frog" then
                HexUnit(DamagingUnit)
                --print("")
            end

            if effectmodel == "Abilities\\Weapons\\BallistaMissile\\BallistaMissile.mdl" then
                --      
                local data = GetUnitData(heroCurrent)
                local xd, yd = GetUnitXY(DamagingUnit)
                GoldenTouch(data, DamagingUnit)

                if data.DashPerAttack then
                    UnitDamageArea(heroCurrent, 0, xd, yd, 100, "push")
                end

                if data.MarkOfDeath then
                    if UnitAlive(DamagingUnit) then
                        if data.MarkOfDeathEffect then
                            DestroyEffect(data.MarkOfDeathEffect)
                        end
                        data.MarkOfDeathUnit = DamagingUnit
                        data.MarkOfDeathEffect = AddSpecialEffectTarget("SystemGeneric\\AlarmSmall", data.MarkOfDeathUnit, "overhead")
                    end
                end

                if data.ThirdArrow then
                    --   
                    SetUnitUserData(DamagingUnit, GetUnitUserData(DamagingUnit) + 1)
                    if GetUnitUserData(DamagingUnit) >= 3 then
                        SetUnitUserData(DamagingUnit, 0)
                        --print("  ")

                        --DestroyEffect(AddSpecialEffect("Warlock_Projectile",xd,yd))
                        local eff = AddSpecialEffect("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", xd, yd)
                        TimerStart(CreateTimer(), 0.01, false, function()
                            DestroyTimer(GetExpiredTimer())
                            DestroyEffect(eff)
                        end)
                        UnitDamageArea(heroCurrent, 1500, xd, yd, 500)
                        SetUnitExploded(DamagingUnit, true)
                        AddSpecialEffect("", xd, yd)
                    end
                end --       
                if data.WolfPerAttack then
                    --   
                    if IsUnitEnemy(DamagingUnit, GetOwningPlayer(heroCurrent)) then

                        if UnitAlive(DamagingUnit) then
                            -- print(GetUnitName(DamagingUnit),", ,  ")
                            WolfFas(heroCurrent, DamagingUnit)
                        else
                            --print(" ")
                        end
                    end
                end
            end

            if HERO[GetPlayerId(GetOwningPlayer(hero))] then
                local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
                --print("0")
                if data.Rebound and effectmodel ~= "stoneshild" then
                    --print("1")
                    local find = FindAnotherUnit(DamagingUnit, data)
                    if find then
                        if data.ReboundCount <= data.ReboundCountMAX then
                            --print(" "..GetUnitName(find))
                            local af = AngleBetweenUnits(DamagingUnit, find)
                            CreateAndForceBullet(hero, af, 40, effectmodel, GetUnitX(DamagingUnit), GetUnitY(DamagingUnit), data.DamageThrow, 1000, 150)
                            data.ReboundCount = data.ReboundCount + 1
                        else
                            data.ReboundCount = 0
                        end
                    end
                end
            end

            if not DamagingUnit then
                --print("NOT DAMAGING")
                DestroyBullet(bullet)
                DestroyTimer(GetExpiredTimer())
            end
        end
    end)
    return bullet
end

function DestroyBullet(bullet)
    DestroyEffect(bullet)
end

do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), 0.1, false, function()
            InitDamage()
            DestroyTimer(GetExpiredTimer())
        end)
    end
end

function OnPostDamage()
    local damage = GetEventDamage() --  
    local damageType = BlzGetEventDamageType()
    if damage < 1 then
        return
    end
    local target = GetTriggerUnit() --    
    local caster = GetEventDamageSource() --    

    --print(GetUnitName(target),damage)



    if GetUnitTypeId(target) == FourCC("n005")  and damage > 50 then
        normal_sound("MP3\\RO\\Spore\\Hit", GetUnitXY(target))
        --print(" ")
    end

    if GetUnitTypeId(caster) == HeroID and caster ~= target then
        local data = HERO[GetPlayerId(GetOwningPlayer(caster))]
        local x, y = GetUnitXY(caster)
        local xe, ye = GetUnitXY(target)
        --    
        -- x1, x2 -   
        -- x2, y2 -   
        -- orientation -     
        -- width -     
        -- radius -    

        if IsPointInSector(x, y, xe, ye, GetUnitFacing(target) - 180, 90, 200) then
            BlzSetEventDamage(damage * data.BackDamage)
            --FlyTextTagShieldXY(x, y, L("  ", "Back stab"), GetOwningPlayer(caster))

            local eff = AddSpecialEffect("Hive\\Coup de Grace\\noSlash\\Coup de Grace", xe, ye)
            BlzSetSpecialEffectYaw(eff, math.rad(GetUnitFacing(target)))
            --BlzSetSpecialEffectPitch(eff, math.rad(-90))
        end
        if data.UrsaStackFH then
            UnitAddUrsaStack(target, 1)
            local stack = UnitGetUrsaStack(target)
            BlzSetEventDamage(GetEventDamage() + (stack * data.UrsaBonus))
        end


    end

    if GetUnitTypeId(target) ~= HeroID then
        --print("-   ")
        local data = HERO[GetPlayerId(GetOwningPlayer(caster))]
        if data then
            if true then --not IsUnitHasShield(target)
                local addTime = 0
                if not data.StaggerTimeFromTalon then
                    data.StaggerTimeFromTalon = 0
                end
                if data.StaggerTimeFromTalon then
                    addTime = data.StaggerTimeFromTalon
                end

                local _, status = IsUnitStunned(target)
                if status == "stagger" then
                    --print("  ")
                end
                if status == "frise" then
                    -- print("    ")
                    if GetUnitTypeId(caster) == FourCC("nwwd") then
                        BlzSetEventDamage(GetEventDamage() * 2)
                    end
                end

                --StunUnit(target, 0.4 + addTime, "stagger")
            else
                if data.ShieldBreakerIsLearn then
                    damage = damage + 50
                end
                SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) - damage)
                BlzSetEventDamage(0)
                --[[if IsUnitHasShield(target) and GetUnitState(target, UNIT_STATE_MANA) < 1 then
                    local x, y = GetUnitXY(target)
                    FlyTextTagShieldXY(x, y, L(" ", "Armor is broken"), GetOwningPlayer(caster), "blue")
                    ShieldSystem[GetHandleId(target)].IsActive = false
                    if data.ChainDestroyShield then
                        DestroyEffect(AddSpecialEffect("SystemGeneric\\Lightning Shock", x, y))
                        DestroyShieldArea(data, 450, x, y)
                    end
                else
                    local x, y = GetUnitXY(target)
                    FlyTextTagShieldXY(x, y, L(": ", "Blocked: ") .. R2I(damage), GetOwningPlayer(caster))
                end
                ]]
            end
        end
    else
        --print("   ")
        if damage<2 then
           -- print("",damage)
            BlzSetEventDamage(0)
        else
            HeroCandyGetDamage(GetUnitData(target),caster)
        end
    end

    if GetUnitTypeId(target)==BigHP_ID then

        local realUnit=GetRealUnit(target)
        local tempDamage=GetEventDamage()
        --print(GetUnitName(caster),"   ",GetUnitName(realUnit),tempDamage)
        BlzSetEventDamage(0)
        if GetUnitTypeId(realUnit)==FourCC("e003") and GetUnitTypeId(caster) == HeroID  then
            HealUnit(realUnit,tempDamage*0.5)
        else
            UnitDamageTarget(caster, realUnit, tempDamage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
        end

    end
    if GetUnitTypeId(target)==FourCC("h009") then
        --print("")
        if GetUnitUserData(target)==100 then
            BlzSetEventDamage(0)
            normal_sound("Sound\\Units\\Combat\\MetalLightSliceFlesh2", GetUnitX(target), GetUnitY(target))
            --print("   ")

        end
    end
    if GetUnitTypeId(target)==FourCC("h00R") then --  
        if udg_Ball then
           -- print("")
        else
            --print(" ")
            udg_Ball=target
            InitBounceOnGUI()
            TimerStart(CreateTimer(), 0.2, true, function()
                if not UnitAlive(target) then
                    DestroyTimer(GetExpiredTimer())
                else
                    if not IsUnitFall[GetHandleId(target)] then
                        KillDestructableByTypeInPoint(ButtonsIDTable,300/3,GetUnitXY(target))
                    end
                end
            end)
        end

    end

    if GetOwningPlayer(caster)==Player(0) then
        --print("  ")
        caster=HERO[0].UnitHero
    end

    if GetUnitTypeId(target) ~= HeroID and GetOwningPlayer(caster)==Player(0) and GetUnitTypeId(target)~=FourCC("h00R")then
        --     
        AddDamage2Show(target, GetEventDamage())
        local data = GetUnitData(caster)
        --data.StatDamageDealing = data.StatDamageDealing + GetEventDamage()
        data.StatDamage = data.StatDamage + GetEventDamage()
        local showData = ShowDamageTable[GetHandleId(target)]
        local matchShow = showData.damage
        if matchShow >= 1 then
            if not showData.tag then
                showData.tag = FlyTextTagCriticalStrike(target, R2I(matchShow), GetOwningPlayer(caster), true)
            else

                SetTextTagText(showData.tag, R2I(matchShow), 0.024 + (showData.k))
                SetTextTagVelocity(showData.tag, 0, 0.01)
                SetTextTagLifespan(showData.tag, 99)

            end
        end
    end


end

function IsUnitTrapOld(unit)
    return GetUnitAbilityLevel(unit, FourCC("A005")) > 0
end

ShowDamageTable = {}
function AddDamage2Show(hero, damage)
    local sec2Reset = 1
    local period = TIMER_PERIOD
    if not ShowDamageTable[GetHandleId(hero)] then
        --	print("   ")
        ShowDamageTable[GetHandleId(hero)] = {
            damage = 0,
            sec    = 0,
            tag    = nil,
            k      = 0
        }
        local data = ShowDamageTable[GetHandleId(hero)]
        data.damage = damage
        TimerStart(CreateTimer(), period, true, function()
            if not UnitAlive(hero) then
                DestroyTimer(GetExpiredTimer())
                --SetTextTagLifespan(data.tag, 2)
                --DestroyTextTag(data.tag)
                --print(" ")
                TimerStart(CreateTimer(), 1, false, function()
                    DestroyTextTag(data.tag)
                    data.tag = nil
                    DestroyTimer(GetExpiredTimer())
                end)
            end

            SetTextTagPos(data.tag, GetUnitX(hero), GetUnitY(hero), 0)
            data.sec = data.sec + period
            if data.sec > sec2Reset then
                data.sec = 0
                data.damage = 0
                SetTextTagLifespan(data.tag, 2)
                --DestroyTextTag(data.tag)
                data.k = 0
                data.tag = nil
                --print("  ")
            end
        end)
    else
        local data = ShowDamageTable[GetHandleId(hero)]
        data.sec = 0
        data.damage = data.damage + damage
        data.k = data.k + 0.002
        if data.k >= 0.04 then
            data.k = 0.04 --    
        end
        --print(" "..damage.."    "..data.damage)
    end

end

function InitDamage()
    local DamageTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        --TriggerRegisterPlayerUnitEvent(DamageTrigger, Player(i), EVENT_PLAYER_UNIT_DAMAGING) --   
        TriggerRegisterPlayerUnitEvent(DamageTrigger, Player(i), EVENT_PLAYER_UNIT_DAMAGED) --   
    end
    TriggerAddAction(DamageTrigger, OnPostDamage)
end

GlobalRect = Rect(0, 0, 0, 0)
function PointContentDestructable (x, y, range, iskill, damage, hero)
    local content = false
    local contentedDest = nil
    local unitZ = GetUnitZ(hero)
    local all={}
    if range == nil then
        range = 80
    end
    if iskill == nil then
        iskill = false
    end
    --print(GetUnitName(hero))
    SetRect(GlobalRect, x - range, y - range, x + range, y + range)
    EnumDestructablesInRect(GlobalRect, nil, function()
        local d = GetEnumDestructable()
        --print(GetDestructableName(d))
        if GetDestructableLife(d) > 0 and GetDestructableTypeId(d)~=FourCC("B005")  and GetDestructableTypeId(d)~=FourCC("OTip")  and GetDestructableTypeId(d)~=FourCC("B00G") then --   and GetDestructableTypeId(d)~=FourCC("B00C")
            --and unitZ<=GetTerrainZ(x,y)+50
            table.insert(all,d)
            content = true
            contentedDest = d
            --print("")
            --print(GetDestructableName(d))
            if iskill then
                if not IsDestructableInvulnerable(d) then
                    --SetDestructableLife(d, GetDestructableLife(d) - damage)
                    --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", GetDestructableX(d), GetDestructableY(d)))
                    --print("  ")
                    if GetDestructableLife(d) < 1 or GetDestructableLife(d) <= 0 then
                        --print(" ")
                        local dx, dy = GetDestructableX(d), GetDestructableY(d)
                        if hero then
                            if GetRandomInt(1, 2) == 1 then
                                if GetDestructableTypeId(d) == FourCC("B004") then
                                    --print(" ,  ")
                                    local new = CreateUnit(Player(10), FourCC("n000"), GetDestructableX(d), GetDestructableY(d), 0)
                                    IssueTargetOrder(new, "attack", hero)
                                end
                            else
                                --print("   ")
                                if GetDestructableTypeId(d) == FourCC("B008") or GetDestructableTypeId(d) == FourCC("B004")  and false then
                                    UnitAddGold(hero, GetRandomInt(2, 5))
                                    DestroyEffect(AddSpecialEffect("SystemGeneric\\PileofGold.mdl", dx, dy))
                                end
                            end
                        end
                        if GetDestructableTypeId(d) == FourCC("B008") and false then
                            --print("     ")
                            normal_sound("Abilities\\Spells\\Other\\Transmute\\AlchemistTransmuteDeath1", dx, dy, 60)
                            DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", dx, dy))
                            TimerStart(CreateTimer(), 0.6, false, function()
                                RemoveDestructable(d)
                                DestroyTimer(GetExpiredTimer())
                            end)
                            if IsUnitType(hero, UNIT_TYPE_HERO) then
                                local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
                                --print(data.VaseGainGold)
                                if data.VaseGainGold then
                                    HealUnit(hero, data.VaseGainGold)
                                end
                            end
                        end
                        if GetDestructableTypeId(d) == FourCC("BTsc") then
                            local eff = AddSpecialEffect("SystemGeneric\\ThunderclapCasterClassic", dx, dy)
                            DestroyEffect(eff)

                            PlayerSeeNoiseInRangeTimed(0.8, dx, dy)
                            --print("   "..GetUnitName(hero))

                            if hero then
                                if IsUnitType(hero, UNIT_TYPE_HERO) then
                                    local data = GetUnitData(hero)
                                    if GetRandomInt(1, 6) == 1 then
                                        local rm = {
                                            L("", "Oops"),
                                            L("", "Oh"),
                                            L(" ", "It is itself"),
                                            L("  ", "I didn't want"),
                                            L(" ", "Chain reaction"),
                                            L("     ", "I didn't think that would happen"),
                                            L("  ?", "No one got pinned down?"),
                                            L(" ?", "Is everyone alive?"),
                                            L(" ", ""),
                                            L(",  ", ""),
                                        }
                                        CreateInfoBoxForAllPlayerTimed(data, rm[GetRandomInt(1, #rm)], 3)
                                    end
                                end
                                TimerStart(CreateTimer(), 0.6, false, function()
                                    UnitDamageArea(hero, 1000, dx, dy, 300)
                                    DestroyTimer(GetExpiredTimer())
                                end)
                            end
                        end

                        if GetDestructableTypeId(d) == FourCC("DTes") then
                            --print(" ")
                            TimerStart(CreateTimer(), 0.4, false, function()
                                UnitDamageArea(SpiderBoss, 90, dx, dy, 120)
                                CreateUnit(GetOwningPlayer(SpiderBoss), FourCC("nspg"), dx, dy, GetRandomInt(0, 360))
                                DestroyTimer(GetExpiredTimer())
                            end)
                        end

                    end
                end
                if GetDestructableLife(d) >= 1 and damage > 1 then
                    SetDestructableAnimation(d, "Stand Hit")
                    --DamageFruitTree(d)
                else
                end
            end
        else

            if GetDestructableTypeId(d)==FourCC("B005") then --B00C --or GetDestructableTypeId(d)==FourCC("B00C")
                --print(" ")
                --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", GetDestructableX(d), GetDestructableY(d)))
                contentedDest=d
            end
        end
    end)
    return content, contentedDest, all
end

function CheckTableDestructableForCurrentID(table,id)
    local k=#table
    local result=false
    --print(" ",k)
    for i=1,k do
        if GetDestructableTypeId(table[i])==id then
            --print(" ")
            result=true
        end
    end
    return result
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 08.03.2021 21:07
---
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), 1, false, function()
            InitDeathEvent()
            DestroyTimer(GetExpiredTimer())
        end)
    end
end
function InitDeathEvent()
    local this = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddAction(this, function()
        local u = GetTriggerUnit()
        local killer = GetKillingUnit()

        if GetPlayerController(GetOwningPlayer(killer)) == MAP_CONTROL_USER then
            local data = HERO[GetPlayerId(GetOwningPlayer(killer))]
            killer = data.UnitHero
            local amount=GetRandomInt(1,3)+BlzGetUnitMaxHP(u)//100
            RewardGoldForKill(data,amount)
            data.StatKill=data.StatKill+1
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 30.09.2023 16:57
---
--[[ --  
RealGetUnitX = GetUnitX
RealGetUnitY = GetUnitY


function GetUnitRealX(unit)
    local collision = math.floor(BlzGetUnitCollisionSize(unit) + 0.5)

    if not IsUnitType(unit, UNIT_TYPE_STRUCTURE) then
        if (collision < 32 and collision > 15) or collision > 47 then return RealGetUnitX(unit) - 16. end
    end

    return RealGetUnitX(unit)
end

function GetUnitRealY(unit)
    local collision = math.floor(BlzGetUnitCollisionSize(unit) + 0.5)

    if not IsUnitType(unit, UNIT_TYPE_STRUCTURE) then
        if (collision < 32 and collision > 15) or collision > 47 then return RealGetUnitY(unit) - 16. end
    end

    return RealGetUnitY(unit)
end
--[[
local GetUnitRealX = GetUnitX
function GetUnitX(whichUnit)
    local collision = math.floor(BlzGetUnitCollisionSize(whichUnit) + 0.5)

    if not IsUnitType(whichUnit, UNIT_TYPE_STRUCTURE) then
        if (collision < 32 and collision > 15) or collision > 47 then
            return GetUnitRealX(whichUnit) - 16.
        end
    end
end


local GetUnitRealY = GetUnitY
function GetUnitY(whichUnit)
    local collision = math.floor(BlzGetUnitCollisionSize(whichUnit) + 0.5)

    if not IsUnitType(whichUnit, UNIT_TYPE_STRUCTURE) then
        if (collision < 32 and collision > 15) or collision > 47 then
            return GetUnitRealY(whichUnit) - 16.
        end
    end
    return GetUnitRealY(whichUnit)
end
]]


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 15.02.2021 18:51
---
function HealUnit(hero, amount, flag, eff)
    --1  nil  
    --2 
    if not amount then
        amount = 99999
    end
    if not eff then
        eff = "Abilities\\Spells\\Human\\Heal\\HealTarget"
    end

    if IsUnitType(hero, UNIT_TYPE_HERO) then
        if HERO[GetPlayerId(GetOwningPlayer(hero))] then
            local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
            amount = amount * data.HealRate
        end
    end

    local p = GetOwningPlayer(hero)
    local MaxHP = BlzGetUnitMaxHP(hero)
    local CurrentHP = GetUnitState(hero, UNIT_STATE_LIFE)
    local LoosingHP = MaxHP - CurrentHP
    local OverHeal = amount - LoosingHP
    local TotalHeal = amount
    if LoosingHP <= amount then
        TotalHeal = LoosingHP
    end
    DestroyEffect(AddSpecialEffectTarget(eff, hero, "overhead"))
    SetUnitState(hero, UNIT_STATE_LIFE, CurrentHP + TotalHeal)

    if IsUnitType(hero, UNIT_TYPE_HERO) then
        if HERO[GetPlayerId(GetOwningPlayer(hero))] then
            local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
            data.ShowHealSec = 0.3
            if not data.ShowHealAmount then
                data.ShowHealAmount = 0
            end
            data.ShowHealAmount = data.ShowHealAmount + TotalHeal
            if data.ShowHeal then
                data.ShowHeal = false
                TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
                    data.ShowHealSec = data.ShowHealSec - TIMER_PERIOD
                    if data.ShowHealSec <= 0 then
                        data.ShowHeal = true
                        DestroyTimer(GetExpiredTimer())
                        if TotalHeal > 1 then
                            FlyTextTagHealXY(GetUnitX(hero), GetUnitY(hero), "+" .. R2I(data.ShowHealAmount), p)
                            data.StatHealGained=data.StatHealGained+data.ShowHealAmount
                        end
                        data.ShowHealAmount = 0
                    end
                end)
            end
        end
    else
        if TotalHeal>0 then
            FlyTextTagHealXY(GetUnitX(hero), GetUnitY(hero), "+" .. R2I(TotalHeal), p)
        end
    end
    if not flag or flag == 1 then
        return TotalHeal
    end
    if flag == 2 then
        return OverHeal
    end
end

function UnitAddMana(target,amount)
    SetUnitState(target,UNIT_STATE_MANA,GetUnitState(target,UNIT_STATE_MANA)+amount)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 01.12.2021 17:05
---
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        --GetUnitX = GetUnitRealX
        --GetUnitY = GetUnitRealY
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())
            print("<<<")
            --EnablePreSelect(false, false)
            --EnableDragSelect(false, false)
            --FogEnable(true)
            --SetFogStateRadius(Player(0), FOG_OF_WAR_VISIBLE, 0, 0, 2500, true)
            --local m =
            FogModifierStart(CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE, bj_mapInitialPlayableArea, true, false))

            perebor = CreateGroup()
            StartGCTracker()
            InitHEROTable()
            CHKVictory()
            InitCamControl()

            --InitMenu()
            InitMouseMoveTrigger()
            InitMouseClickEvent()
            InitItems() --  
            --CreateWASDActions()

            --InitGameSlimes()
            --InitMurlocAI()

            --PlayList()
            CreateEActions()
            CreateESCActions()
            CreateInsertActions()
            InitRestartLevel()
            --CreateTabActions()
            --wGeometry = wGeometryInit()
            --ShapeInit()
            --SetDayNightModels("Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl", "Environment\\DNC\\DNCAshenvale\\DNCAshenvaleUnit\\DNCAshenvaleUnit.mdl")
            --SetDayNightModels("", "")
            InitRicoshet()
            InitLightFromFloor()
            InitRSFGHD()
            InitEventUnitUnderPointer()
            InitRailWagon()

            ClearMapMusicBJ()
            PlayMusicBJ("Endless Snowbanks")
            SetMusicVolumeBJ(100)

            print(">>>")
        end)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 30.11.2023 20:11
---

function InitEventUnitUnderPointer()
    local MouseMoveTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        local player = Player(i)
        TriggerRegisterPlayerEvent(MouseMoveTrigger, player, EVENT_PLAYER_MOUSE_MOVE)
    end

    local last=nil
    TriggerAddAction(MouseMoveTrigger, function()
        local FocusUnit=BlzGetMouseFocusUnit()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if last~=FocusUnit and not data.CatchUnit  then
            if GetUnitTypeId(FocusUnit)==FourCC("h00C") then
               -- print(GetUnitName(FocusUnit))
                AddCircleAreaForUnit(FocusUnit, 525, 2)
            end
        end
        last=FocusUnit
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 21.01.2023 11:44
---
function InitItems()
    local allUnitsItem = {}
    local idItems = {
        FourCC("h002"), -- 
    }
    for i = 1, #idItems do
        local unit = nil
        local e = nil
        local k = 0
        --print("")

        GroupEnumUnitsInRect(perebor, bj_mapInitialPlayableArea, nil)
        while true do
            e = FirstOfGroup(perebor)

            if e == nil then
                break
            end
            if UnitAlive(e) and GetUnitTypeId(e) == idItems[i] then
                --print("")
                table.insert(allUnitsItem, e)


            end
            GroupRemoveUnit(perebor, e)
        end
    end
    ------


    for i=1,#allUnitsItem do
        RegistryNewItem(allUnitsItem[i])
    end
end
function RegistryNewItem(unit)
    local enterTrig = CreateTrigger()
    TriggerRegisterUnitInRange(enterTrig, unit, 80, nil)
    TriggerAddAction(enterTrig, function()
        local entering = GetTriggerUnit()

        if GetUnitTypeId(entering)==HeroID and not IsUnitHidden(unit) then
            --print("    ",GetHandleId(unit))
            if GetUnitTypeId(unit)==FourCC("h002") then -- 
                --print(" ")
                HeroCandyHeal(GetUnitData(entering),1)
                local r=GetRandomInt(1,6)
                if r==1 then
                    PlayMonoSpeech("Speech\\Peon\\CandyHeal\\H"..r,"")
                elseif r==2 then
                    PlayMonoSpeech("Speech\\Peon\\CandyHeal\\H"..r,"!")
                elseif r==3 then
                    PlayMonoSpeech("Speech\\Peon\\CandyHeal\\H"..r,"!")
                elseif r==4 then
                    PlayMonoSpeech("Speech\\Peon\\CandyHeal\\H"..r,",  !")
                elseif r==5 then
                    PlayMonoSpeech("Speech\\Peon\\CandyHeal\\H"..r,"    !")
                end
            end
            --KillUnit(unit)
            ShowUnit(unit,false)
            --print(" ",GetHandleId(unit))
            local x,y=GetUnitXY(unit)
            TimerStart(CreateTimer(), 30, false, function()
                ShowUnit(unit,true)
                --CreateUnit(GetOwningPlayer(unit),GetUnitTypeId(unit),x,y,0)
            end)
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 01.12.2021 18:06
---
--HERO = {}
PlayerIsPlaying={}
function InitHEROTable()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        HERO[i] = {
            LMBIsPressed           = false,
            pid                    = i,
            ReleaseW               = false,
            ReleaseS               = false,
            ReleaseD               = false,
            ReleaseA               = false,
            ReleaseLMB             = false,
            ReleaseRMB             = false,
            isAttacking            = false,
            isCharging             = false,
            isMoving               = false,
            DropInventory          = true,
            isShield               = false,
            ShieldEff              = nil,
            animStand              = 0, --      Stand
            ReleaseSPACE           = false,
            DirectionMove          = 0, --    
            ChargingAttack         = 0,
            AttackCount            = 0,
            ResetSeriesTime        = 0,
            DamageInSeries         = { 50, 80, 60, 90, 100 },
            MaxAttack              = 5,
            CdAttackFinal          = 0.7,
            BackDamage             = 2,
            CDSpellQ               = 0, --  
            SpellQCDTime           = 3, --    Q,  
            AttackInForce          = false,
            DestroyMissile         = true, --       
            tasks                  = {}, -- 
            -- 
            SpinChargesFH          = nil, --  
            SpinCharges            = 30, --    
            SpinChargesMAX         = 40, --   
            SpinRegeneratingRate   = 0,
            StarTime2Spin          = 0.9, --   
            ChargedSpinArea        = 150,
            SpinBaseDamage         = 25,
            --  
            ThrowCharges           = 2,
            ThrowChargesFH         = nil,
            ThrowChargesCDFH       = nil,
            ThrowChargesReloadSec  = 5,
            -- 
            DashCharges            = 3,--   
            DashChargesFH          = nil,
            DashChargesCDFH        = nil,
            DashChargesReloadSec   = 5, --    
            Time2HealDash          = 0, --    
            countFrame             = 0,
            BaseDashDamage         = 100,
            ReboundCountMAX        = 5,
            ReboundCount           = 0,
            DamageThrow            = 150, --   
            InvulPreDeathCurrentCD = 1, --   
            LifeFHTable            = {},
            gold                   = 100, --  
            ShowGold               = true, --   
            ShowHeal               = true,
            ShowGoldAmount         = 0,
            ShowHealAmount         = 0,
            DamageSplash           = 250, --  Q
            HealRate               = 1, --  
            DistMouse              = 0,
            AngleMouse             = 0,
            TalonWindowIsOpen      = true,
            Summon                 = {}, --  
            CurrentWeaponType      = "", --    
            FrameToDestroy         = {},
            MaxLifeBonus           = 1, --      
            --
            StatHealGained         = 0, --   +
            StatDamageGained       = 0, --   +
            StatBlockGained        = 0, --   +
            StatGoldGained         = 0, --     +
            StatDamageDealing      = 0, --   +
            StatSummon             = 0, --  
            HPForSummon            = 0, --    
            --
            life                   = 10,
            --- 
            ItemSlot={}, --     
            ItemSlotTexture={}, --   
            ItemSlotName={}, --    
            ItemSlotTooltip={}, --   
            ItemSlotText={}, --  
            ---   
            AttackIsReady=true, --   
            MHoldSec=0, --    
            BaseDamage              = 200, --  
            AttackInterval          = 0.35, --  
            MoveSpeed               = 5, --  
            ShieldCount             = 0, --  
            UnitScale               = 1, -- 
            BonusDamage             = 0, --   
            EggCount                = 0, --  
            ResBanana               = 0, --    
            MaxAttackRange          = 2500, --   
            ---   
            StatDies      = 0,
            StatKill      = 0,
            StatDamage    = 0,
            StatSnow      = 0,
            StatDash      = 0,
            StatCandyEat  = 0,
            StatWay       = 0,
            --StatPeon      = peonRescue,
        }
        --InitInputHandler(HERO[i])
        CreatePeonForPlayer(HERO[i])

        --SetCameraBoundsToRectForPlayerBJ(Player(i), gg_rct_Bound01)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 07.11.2021 3:21
---
function L(ru, en)
    if en=="" then
        en=ru
    end
    return BlzGetLocale()=="ruRU" and ru or en
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 10.01.2020 23:44
---
---@param x real
---@param y real
---@return boolean
function InMapXY(x, y)
    return x > GetRectMinX(bj_mapInitialPlayableArea) and x < GetRectMaxX(bj_mapInitialPlayableArea) and y > GetRectMinY(bj_mapInitialPlayableArea) and y < GetRectMaxY(bj_mapInitialPlayableArea)
end

---@param x real
---@param distance real
---@param angle real radian
---@return real
function GetPolarOffsetX(x, distance, angle)
    return x + distance * math.cos(angle)
end

---@param y real
---@param distance real
---@param angle real radian
---@return real
function GetPolarOffsetY(y, distance, angle)
    return y + distance * math.sin(angle)
end

---@param x real
---@param distance real
---@param angle real degrees
---@return real
function MoveX(x, distance, angle)
    return x + distance * math.cos(angle * bj_DEGTORAD)
end

---@param y real
---@param distance real
---@param angle real degrees
---@return real
function MoveY(y, distance, angle)
    return y + distance * math.sin(angle * bj_DEGTORAD)
end

local GetTerrainZ_location = Location(0, 0)
---@param x real
---@param y real
---@return real
function GetTerrainZ(x, y)
    MoveLocation(GetTerrainZ_location, x, y)
    return GetLocationZ(GetTerrainZ_location)
end

---@param target unit
---@return real
function GetUnitZ(target)
    MoveLocation(GetTerrainZ_location, GetUnitX(target), GetUnitY(target))
    return GetLocationZ(GetTerrainZ_location) + GetUnitFlyHeight(target)
end

---@param target unit
---@param z real
function SetUnitZ(target, z)
    UnitAddAbility(target, FourCC('Aave'))
    UnitRemoveAbility(target, FourCC('Aave'))
    MoveLocation(GetTerrainZ_location, GetUnitX(target), GetUnitY(target))
    SetUnitFlyHeight(target, z - GetLocationZ(GetTerrainZ_location), 0)
end

---@param h real        (x = d / 2)
---@param d real    
---@param x real      ,      
---@return real
function ParabolaZ (h, d, x)
    return (4 * h / d) * (d - x) * (x / d)
end

---@param zs real      
---@param ze real      
---@param h real      (x = d / 2)
---@param d real    
---@param x real      
---@return real
function GetParabolaZ(zs, ze, h, d, x)
    return (2 * (zs + ze - 2 * h) * (x / d - 1) + (ze - zs)) * (x / d) + zs
end

---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@return real
function DistanceBetweenXY(xa, ya, xb, yb)
    local dx = xb - xa
    local dy = yb - ya
    return math.sqrt(dx * dx + dy * dy)
end

---@param xa real
---@param ya real
---@param za real
---@param xb real
---@param yb real
---@param zb real
---@return real
function DistanceBetweenXYZ(xa, ya, za, xb, yb, zb)
    local dx = xb - xa
    local dy = yb - ya
    local dz = zb - za
    return math.sqrt(dx * dx + dy * dy + dz * dz)
end

---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@return real radian
function AngleBetweenXY(xa, ya, xb, yb)
    return math.atan(yb - ya, xb - xa)
end

---@param a real radian
---@param b real radian
---@return real radian
function AngleDifference(a, b)
    local c---@type real
    local d---@type real
    if a > b then
        c = a - b
        d = b - a + 2 * math.pi
    else
        c = b - a
        d = a - b + 2 * math.pi
    end
    return c > d and d or c
end

--@author https://xgm.guru/p/wc3/warden-math
---@param a real degrees
---@param b real degrees
---@return real degrees
function AngleDifferenceDeg(a, b)
    a, b = math.abs(a, 360), math.abs(b, 360)
    local x---@type real
    if (a > b) then
        a, b = b, a
    end
    x = b - 360
    if (b - a > a - x) then
        b = x
    end
    return math.abs(a - b)
end

--     ,  xa, ya, xb, yb  ,  xc, yc
--@author https://xgm.guru/p/wc3/perpendicular
---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@param xc real
---@param yc real
---@return real
function Perpendicular (xa, ya, xb, yb, xc, yc)
    return math.sqrt((xa - xc) * (xa - xc) + (ya - yc) * (ya - yc)) * math.sin(math.atan(yc - ya, xc - xa) - math.atan(yb - ya, xb - xa))
end

--@Hate https://xgm.guru/p/wc3/241479
---@param source unit
---@param x real
---@param y real
function SetUnitPositionSmooth(source, x, y)
    local last_x = GetUnitX(source)
    local last_y = GetUnitY(source)
    local bx
    local by
    --print(" ")
    SetUnitPosition(source, x, y)
    if (RAbsBJ(GetUnitX(source) - x) > 0.5) or (RAbsBJ(GetUnitY(source) - y) > 0.5) then
        SetUnitPosition(source, x, last_y)
        bx = RAbsBJ(GetUnitX(source) - x) <= 0.5
        SetUnitPosition(source, last_x, y)
        by = RAbsBJ(GetUnitY(source) - y) <= 0.5

        ---
        local dx = math.abs(x - last_x)
        if dx >= 100 then
            --print("    Smooth"..dx )
        end
        ---
        if bx then
            SetUnitPosition(source, x, last_y)
        elseif by then
            SetUnitPosition(source, last_x, y)
        else
            SetUnitPosition(source, last_x, last_y)
        end
    end
end

--Bergi
function GetUnitXY(unit)
    return GetUnitX(unit), GetUnitY(unit)
end

function MoveXY(x, y, distance, angle)
    return x + distance * math.cos(angle * bj_DEGTORAD), y + distance * math.sin(angle * bj_DEGTORAD)
end

function UnitCollisionOFF(unit)
    UnitAddAbility(unit, FourCC('A000'))
    IssueImmediateOrder(unit, "windwalk")
end

function AngleBetweenUnits(caster, target)
    local yb, ya, xb, xa = GetUnitY(target), GetUnitY(caster), GetUnitX(target), GetUnitX(caster)
    return Atan2BJ(yb - ya, xb - xa)
end

function math.clamp (inb, low, high)
    --
    return math.min(math.max(inb, low), high)
end

function math.lerp(a, b, t)
    return a + (b - a) * t
end

function repeatN(t, m)
    return math.clamp(t - math.floor(t / m) * m, 0, m)
end

function lerpTheta(a, b, t)
    local dt = repeatN(b - a, 360)
    if dt > 180 then
        dt = dt - 360
    end
    return math.lerp(a, a + dt, t)
end

function AngleBetweenXYZ(x1, y1, z1, x2, y2, z2)
    local a = x1 * x2 + y1 * y2 + z1 * z2
    local b = math.sqrt(x1 * x1 + y1 * y1 + z1 * z1)
    local c = math.sqrt(x2 * x2 + y2 * y2 + z2 * z2)
    return math.acos(a / (b * c))
end

--    
-- x1, x2 -   
-- x2, y2 -   
-- orientation -     
-- width -     
-- radius -    
function IsPointInSector(x1, y1, x2, y2, orientation, width, radius)
    local lenght = DistanceBetweenXY(x1, y1, x2, y2)
    local angle = Acos(Cos(orientation * bj_DEGTORAD) * (x1 - x2) / lenght + Sin(orientation * bj_DEGTORAD) * (y1 - y2) / lenght) * bj_RADTODEG
    return angle <= width and lenght <= radius
end

function GetParabolaPitch(height, distance, i, speed)
    local f = function(x)
        return ParabolaZ(height, distance, x)
    end

    local df = function(x)
        return ParabolaZDerivative(height, distance, x)
    end
    local x0 = i * speed
    local x1 = x0 + speed
    local thisZ = f(x0)
    local someTangentZ = Tangent(f, df, x0, x1)
    return math.atan(someTangentZ - thisZ, x1 - x0)--pitch
end
function Tangent(f, df, x0, x)
    return f(x0) + df(x0) * (x - x0)
end
function ParabolaZDerivative(height, distance, x)
    return 4 * height / distance / distance * (distance - 2 * x)
end

function PointInTriangle(x, y, x1, y1, x2, y2, x3, y3)
    local k = (x1 - x) * (y2 - y1) - (x2 - x1) * (y1 - y)
    local m = (x2 - x) * (y3 - y2) - (x3 - x2) * (y2 - y)
    local n = (x3 - x) * (y1 - y3) - (x1 - x3) * (y3 - y)
    if k >= 0 and m >= 0 and n >= 0 then
        return true
    elseif   k<=0 and m<=0 and n<=0 then
        return false
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 01.12.2021 17:52
---
function InitMouseClickEvent()

    local TrigPressLMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigPressLMB, Player(i), EVENT_PLAYER_MOUSE_DOWN)
    end
    TriggerAddAction(TrigPressLMB, function()
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_LEFT then
            --print(" ")
            local x, y = BlzGetTriggerPlayerMouseX(), BlzGetTriggerPlayerMouseY()
            local data = HERO[GetPlayerId(GetTriggerPlayer())]
            if x > -5 and x < 5 then
                --print(" ")
            else
                local angle = AngleBetweenXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), x, y) / bj_DEGTORAD
                if not data.CatchUnit then
                    CastSnowBall(data, angle)
                    if not data.StartRepeaterAttack then
                        data.StartRepeaterAttack = true
                        local period = 0.2
                        TimerStart(CreateTimer(), period, true, function()
                            if data.LMBIsPressed then
                                x, y = data.fakeX, data.fakeY
                                angle = AngleBetweenXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), x, y) / bj_DEGTORAD
                                CastSnowBall(data, angle)
                            end
                        end)
                    end
                else
                    local differenceZ = GetUnitZ(data.CatchUnit)-GetUnitZ(data.UnitHero)
                    data.UnitMissile = true

                    --print(" ", differenceZ)
                    if differenceZ<=2 and not IsUnitFall[GetHandleId(data.CatchUnit)] then
                        if IsUnitFall[GetHandleId(data.CatchUnit)] then
                            print("  ")
                        end
                        --UnitCreateArtMissile()
                        --print(" ",differenceZ)
                        local dist = DistanceBetweenXY(x, y, GetUnitXY(data.UnitHero))
                        if dist >= 600 then
                            dist = 600
                            x, y = MoveXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), dist, angle)
                        end

                        local mark = AddSpecialEffect("Spell Marker TC", x, y)
                        BlzSetSpecialEffectScale(mark, 2)
                        TimerStart(CreateTimer(), 1, false, function()
                            DestroyEffect(mark)
                        end)
                        BlzSetSpecialEffectColorByPlayer(mark, Player(1)) -- 
                        local speed = dist / 80
                        SetUnitAnimationByIndex(data.UnitHero, 25)
                        BlzSetUnitFacingEx(data.UnitHero, angle)
                        MakeUnitArtMissile(data.UnitHero, data.CatchUnit, angle, speed, dist, 300)
                        data.CatchUnit = nil
                    else
                        --print("- ",differenceZ,IsUnitFall[GetHandleId(data.CatchUnit)])
                    end

                end
            end
            data.LMBIsPressed = true
            data.inputEffectNumber = GetRandomInt(1, 8)
        end
    end)

    local TrigDEPressLMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigDEPressLMB, Player(i), EVENT_PLAYER_MOUSE_UP)
    end
    TriggerAddAction(TrigDEPressLMB, function()
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_LEFT then
            local data = HERO[GetPlayerId(GetTriggerPlayer())]
            data.LMBIsPressed = false
            data.UnitMissile = false
            --ShapeDetectorClear(data)
            --ClearPoints(data)
        end
    end)
    ---------------------- RMB
    local TrigPressRMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigPressRMB, Player(i), EVENT_PLAYER_MOUSE_DOWN)
    end
    TriggerAddAction(TrigPressRMB, function()
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_RIGHT then
            --print(" ")

            local x, y = BlzGetTriggerPlayerMouseX(), BlzGetTriggerPlayerMouseY()
            local data = HERO[GetPlayerId(GetTriggerPlayer())]

            local angle = AngleBetweenXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), x, y) / bj_DEGTORAD
            local delay = 0.3 --   
            local ChargesReloadSec = 5
            if not data.MissileCharges then
                data.MissileCharges = 3
            end
            data.RMBIsPressed = true
            if not data.CatchUnit then
                local dist = DistanceBetweenXY(x, y, GetUnitXY(data.UnitHero))
                local tmpCatch = FindNearEnemyXY(data.UnitHero, 120, GetUnitXY(data.UnitHero))
                if GetUnitTypeId(tmpCatch) == FourCC("h00C") or GetUnitTypeId(tmpCatch) == FourCC("h00R")  then
                    data.CatchUnit = tmpCatch
                    data.CatchUnitEffect = AddSpecialEffectTarget("diwo1", data.CatchUnit, "origin")
                    local angleMagnet = AngleBetweenUnits(data.CatchUnit, data.UnitHero)
                    local distMagnet = DistanceBetweenXY(GetUnitX(data.CatchUnit), GetUnitY(data.CatchUnit), GetUnitXY(data.UnitHero))
                    SetUnitFacing(data.CatchUnit, angleMagnet)
                    UnitAddForceSimple(data.CatchUnit, angleMagnet, 5, distMagnet)
                    SetUnitZ(data.CatchUnit,0)
                else
                    data.CatchUnit = false
                end
                if not data.CatchUnit then
                    --print("   ")
                    if dist <= 400 then
                        tmpCatch = FindNearEnemyXY(data.UnitHero, 120, x, y)
                        --print(dist)
                        if GetUnitTypeId(tmpCatch) == FourCC("h00C") or GetUnitTypeId(tmpCatch) == FourCC("h00R") then
                            data.CatchUnit = tmpCatch
                            data.CatchUnitEffect = AddSpecialEffectTarget("diwo1", data.CatchUnit, "origin")
                            local angleMagnet = AngleBetweenUnits(data.CatchUnit, data.UnitHero)
                            local distMagnet = DistanceBetweenXY(GetUnitX(data.CatchUnit), GetUnitY(data.CatchUnit), GetUnitXY(data.UnitHero))
                            SetUnitFacing(data.CatchUnit, angleMagnet)
                            UnitAddForceSimpleClean(data.CatchUnit, angleMagnet, 5*2, distMagnet,{"Dust"})
                            SetUnitZ(data.CatchUnit,0)
                        else
                            data.CatchUnit = false
                        end
                    end
                end

            end
            if not data.CatchUnit then
                if data.MissileCharges > 0 and not data.RMBAttack and UnitAlive(data.UnitHero) and not data.Sit and not IsUnitStunned(data.UnitHero) and not FREE_CAMERA then
                    data.MissileCharges = data.MissileCharges - 1
                    data.RMBAttack = true
                    --BlzFrameSetText(data.DashChargesFH, data.DashCharges)
                    TimerStart(CreateTimer(), ChargesReloadSec, false, function()
                        data.MissileCharges = data.MissileCharges + 1
                        DestroyTimer(GetExpiredTimer())
                        --print(" ",data.DashCharges)
                    end)

                    local dist = DistanceBetweenXY(x, y, GetUnitXY(data.UnitHero))
                    if dist >= 600 then
                        dist = 600
                        x, y = MoveXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), dist, angle)
                    end

                    local mark = AddSpecialEffect("Spell Marker TC", x, y)
                    BlzSetSpecialEffectScale(mark, 1)
                    TimerStart(CreateTimer(), delay, false, function()
                        --DestroyEffect(mark)
                    end)
                    BlzSetSpecialEffectColorByPlayer(mark, Player(1)) -- 
                    local speed = dist / 80
                    --QueueUnitAnimation(data.UnitHero,"Attack")
                    SetUnitAnimationByIndex(data.UnitHero, 25)
                    BlzSetUnitFacingEx(data.UnitHero, angle)
                    UnitCreateArtMissile(data.UnitHero, angle, speed, dist, 300, nil, "ChainFrost",mark)

                    TimerStart(CreateTimer(), delay, false, function()

                        data.RMBAttack = false
                        DestroyTimer(GetExpiredTimer())
                        --print(" ?")
                    end)


                end
            end

            local id = GetPlayerId(GetTriggerPlayer())
            if not data.LastCastName == "wave" then
                GetPlayerMouseX[id] = BlzGetTriggerPlayerMouseX()
                GetPlayerMouseY[id] = BlzGetTriggerPlayerMouseY()
            else
                data.StartWaveCastX = BlzGetTriggerPlayerMouseX()
                data.StartWaveCastY = BlzGetTriggerPlayerMouseY()
            end
        end
    end)

    local TrigDEPressRMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigDEPressRMB, Player(i), EVENT_PLAYER_MOUSE_UP)
    end
    TriggerAddAction(TrigDEPressRMB, function()
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_RIGHT then
            local data = HERO[GetPlayerId(GetTriggerPlayer())]
            data.CatchUnit = false
            DestroyEffect(data.CatchUnitEffect)
            data.RMBIsPressed = false
            local id = GetPlayerId(GetTriggerPlayer())
            if not data.LastCastName == "wave" then
                GetPlayerMouseX[id] = BlzGetTriggerPlayerMouseX()
                GetPlayerMouseY[id] = BlzGetTriggerPlayerMouseY()
            else
                data.EndWaveCastX = BlzGetTriggerPlayerMouseX()
                data.EndWaveCastY = BlzGetTriggerPlayerMouseY()
            end

            --SpellCastByName(data, data.LastCastName)
            --ClearPoints(data)
        end
    end)
end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.04.2021 23:55
---
GetPlayerMouseX = {}
GetPlayerMouseY = {}
function InitMouseMoveTrigger()
    local MouseMoveTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        local player = Player(i)
        TriggerRegisterPlayerEvent(MouseMoveTrigger, player, EVENT_PLAYER_MOUSE_MOVE)
        GetPlayerMouseX[i] = 0
        GetPlayerMouseY[i] = 0
    end
    TriggerAddAction(MouseMoveTrigger, function()
        local id = GetPlayerId(GetTriggerPlayer())
        local data=HERO[id]
        if BlzGetTriggerPlayerMouseX() ~= 0 then
            GetPlayerMouseX[id] = BlzGetTriggerPlayerMouseX()
            GetPlayerMouseY[id] = BlzGetTriggerPlayerMouseY()
            --print("   "
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 30.09.2023 11:38
---
do
    local RANGE             = 10 -- ,    
    local DUMMY             = FourCC('wolg') --     

    local rect---@type rect
    local item ---@type item

    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        rect = Rect(0, 0, 128, 128)
        item = CreateItem(DUMMY, 0, 0)
        SetItemVisible(item, true)
    end

    local items = {}
    local function hide()
        local target = GetEnumItem()
        if not IsItemVisible(target) then return end
        table.insert(items, target)
        SetItemVisible(target, false)
    end

    ---@param x real
    ---@param y real
    ---@return boolean
    function IsTerrainWalkable(x, y)
        MoveRectTo(rect, x, y)
        EnumItemsInRect(rect, nil, hide)

        SetItemPosition(item, x, y)
        local dx = GetItemX(item) - x
        local dy = GetItemY(item) - y
        SetItemVisible(item, false)

        for i = 1, #items do
            SetItemVisible(items[i], false)
        end
        items = {}

        return dx * dx + dy * dy <= RANGE * RANGE and not IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY),GetItemX(item),GetItemY(item)
    end
end

---@param x real
---@param y real
---@return boolean
function IsTerrainDeepWater (x, y)
    return not IsTerrainPathable(x, y, PATHING_TYPE_FLOATABILITY) and IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY)
end

---@param x real
---@param y real
---@return boolean
function IsTerrainShallowWater (x, y)
    return not IsTerrainPathable(x, y, PATHING_TYPE_FLOATABILITY) and not IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY) and IsTerrainPathable(x, y, PATHING_TYPE_BUILDABILITY)
end

---@param x real
---@param y real
---@return boolean
function IsTerrainLand(x, y)
    return IsTerrainPathable(x, y, PATHING_TYPE_FLOATABILITY)
end

---@param x real
---@param y real
---@return boolean
function IsTerrainPlatform (x, y)
    return not IsTerrainPathable(x, y, PATHING_TYPE_FLOATABILITY) and not IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY) and not IsTerrainPathable(x, y, PATHING_TYPE_BUILDABILITY)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 27.05.2020 23:15
---
---
---
--[[
do
    local DestroyTimerOrigin = DestroyTimer --  DestroyTimer  
    local PauseTimerCached = PauseTimer --          
    function DestroyTimer(t)
        PauseTimerCached(t)  --  PauseTimer  
        DestroyTimerOrigin(t) --  DestroyTimer  
    end
end]]
UnitPauseCounter = {}
local origBlzPauseUnitEx = BlzPauseUnitEx
function BlzPauseUnitEx(whichUnit, flag)
    origBlzPauseUnitEx(whichUnit, flag)
    local h = GetHandleId(whichUnit)
    if not UnitPauseCounter[h] then
        UnitPauseCounter[h] = 0
    end
    if flag then
        UnitPauseCounter[h] = UnitPauseCounter[h] + 1
    else
        UnitPauseCounter[h] = UnitPauseCounter[h] - 1
    end
    --print("   ", GetUnitName(whichUnit), UnitPauseCounter[h])
end

local origResetUnitAnimation = ResetUnitAnimation
function ResetUnitAnimation(whichUnit)
    if UnitAlive(whichUnit) then
        origResetUnitAnimation(whichUnit, "stand")
        --print("reset from orin")
    end
end
local origSetUnitAnimation = SetUnitAnimation
function SetUnitAnimation(whichUnit, whichAnimation)
    if UnitAlive(whichUnit) then
        origSetUnitAnimation(whichUnit, whichAnimation)
    end
end

local origSetUnitAnimationByIndex = SetUnitAnimationByIndex
function SetUnitAnimationByIndex(whichUnit, whichAnimation)
    if UnitAlive(whichUnit) then
        origSetUnitAnimationByIndex(whichUnit, whichAnimation)
    end
end

local origQueueUnitAnimation = QueueUnitAnimation
function QueueUnitAnimation(whichUnit, whichAnimation)
    if UnitAlive(whichUnit) then
        origQueueUnitAnimation(whichUnit, whichAnimation)
    end
end

local origDestroyTimer = DestroyTimer
function DestroyTimer(t)

    if t == nil then
        t = GetExpiredTimer()
        if t == nil then
            --print("     -  ")
            return
        end
    end
    PauseTimer(t)
    GCountTimers = GCountTimers - 1
    origDestroyTimer(t)
end

local realTimerStart = TimerStart
GCountTimers = 0
TimerStart = function(timer, duration, repeating, callback)
    local pcallback = function()
        if callback == nil then
            return
        end
        local status, err = pcall(callback)
        if not status then
            print(err)
        end
    end
    GCountTimers = GCountTimers + 1
    --print(" ", GCountTimers)
    realTimerStart(timer, duration, repeating, pcallback)
end

local realTriggerAddAction = TriggerAddAction
TriggerAddAction = function(trig, callback)
    local pcallback = function()
        local status, err = pcall(callback)
        if not status then
            print(err)
        end
    end
    realTriggerAddAction(trig, pcallback)
end

function StartGCTracker()
    local t = CreateTimer()
    local track_gc
    local meta = {
        __gc = function(self)
            --print('   ' , TimerGetElapsed(t))
            track_gc()
        end
    }

    track_gc = function()
        setmetatable({}, meta)
    end

    TimerStart(t, 86400, false)
    track_gc()
end




---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 01.12.2021 18:39
---
do
    Vector = {}
    Vector.__index = Vector
end

function Vector:new(x, y, z)
    local v = { x = x, y = y, z = z }
    setmetatable(v, self)
    return v
end

function Vector:copy()
    return Vector:new(self.x, self.y, self.z)
end

function Vector:dot(other)
    return self.x * other.x + self.y * other.y + self.z * other.z
end

function Vector:length()
    return math.sqrt(self.x * self.x + self.y * self.y + self.z * self.z)
end

function Vector:length2d()
    return math.sqrt(self.x * self.x + self.y * self.y)
end

function Vector:__mul(num)
    return Vector:new(self.x * num, self.y * num, self.z * num)
end
function VectorMulNumber(vector, num)
    return Vector:new(vector.x * num, vector.y * num, vector.z * num)
end

function Vector:__div(num)
    return Vector:new(self.x / num, self.y / num, self.z / num)
end

function Vector:normalize(clone)
    if clone then
        return self / self:length()
    end
    local l = self:length()
    self.x = self.x / l
    self.y = self.y / l
    self.z = self.z / l
    return self
end

function Vector:differenceRegardingUp(other)
    local a = self:angleBetweenUP()
    local b = other:angleBetweenUP()

    return math.max(a, b) - math.min(a, b);
end

function Vector:angleBetweenUP()
    return math.acos(self:dot(Vector:new(0, 1, 0)) / 1 / self:length())
end

function Vector:angleBetween(other)
    return math.acos(self:dot(other) / other:length() / self:length())
end

function Vector:yaw()
    return math.atan(self.y, self.x)
end

function Vector:pitch()
    return math.atan(self.z, self:length2d())
end

function Vector:yawPitchOffset(distance, yaw, pitch)
    --Add Bergi
    return Vector:new(
            distance * math.cos(yaw) * math.cos(pitch),
            distance * math.sin(yaw) * math.cos(pitch),
            distance * math.cos(pitch)
    )
end
function Distance(vector1, vector2)
    -- Add Oferist
    return DistanceBetweenXY(vector1.x, vector1.y, vector2.x, vector2.y)
end

function VectorSubtract(vector1, vector2)
    return Vector:new(vector1.x - vector2.x, vector1.y - vector2.y, vector1.z - vector2.z)
end

function VectorSum(vector1, vector2)
    return Vector:new(vector1.x + vector2.x, vector1.y + vector2.y, vector1.z + vector2.z)
end
function VectorMulVector(vector1, vector2)
    return Vector:new(vector1.x * vector2.x, vector1.y * vector2.y, vector1.z * vector2.z)
end

function Vector:angleBetween2Vectors(vector1, vector2)
    --  - Bergi 
    return AngleBetweenXY(vector1.x, vector1.y, vector2.x, vector2.y) / bj_DEGTORAD
end

function GetVectorFromPoint2D(x1, y1, x2, y2)
    return Vector:new(x2 - x1, y2, -y1, 0)
end
---   
function DotProduct(v1, v2)
    local dot = v1.x * v2.x + v1.y * v2.y + v1.z * v2.z
    print("dot", dot)
    return dot -- 
end

--
function Reflect(ray, normal)
    local dot = DotProduct(ray, normal)
    local a = -2 * dot --
    local b = VectorMulNumber(normal, a)
    local c = VectorSum(b, ray)
    local ref = c

    --return -2 * DotProduct(ray, normal) * normal + ray
    return ref
end
function GetNormal(a, b, c)
    local v1 = Vector:new(0, 0, 0)
    local v2 = Vector:new(0, 0, 0)
    local normal = Vector:new(0, 0, 0)

    v1.x = a.x - b.x
    v1.y = a.y - b.y
    v1.z = a.z - b.z

    v2.x = b.x - c.x
    v2.y = b.y - c.y
    v2.z = b.z - c.z

    local wrki = SquareRoot(math.sqrt(v1.y * v2.z - v1.z * v2.y) + math.sqrt(v1.z * v2.x - v1.x * v2.z) + math.sqrt(v1.x * v2.y - v1.y * v2.x))
    normal.x = (v1.y * v2.z - v1.z * v2.y) / wrki
    normal.y = (v1.z * v2.x - v1.x * v2.z) / wrki
    normal.z = (v1.x * v2.y - v1.y * v2.x) / wrki
    print(" ? ", normal.x, normal.y, normal.z)
    return normal -- vector3
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 13.02.2021 18:35
---
function normal_sound (s, x, y, volume)
    local snd = CreateSound(s, false, true, true, 10, 10, "CombatSoundsEAX")
    if not volume then
        volume = 250
    end
    if not x then
        x,y=GetUnitXY(HERO[0].UnitHero)
    end
    --print(s)
    SetSoundChannel(snd, 40)
    SetSoundVolume(snd, volume)
    SetSoundPitch(snd, 1)
    SetSoundDistances(snd, 600, 10000)
    SetSoundDistanceCutoff(snd, 5000)
    SetSoundConeAngles(snd, 0.0, 0.0, 127)
    SetSoundConeOrientation(snd, 0.0, 0.0, 5000)
    SetSoundPosition(snd, x, y, 50)
    StartSound(snd)
    return snd
    --KillSoundWhenDone(snd)
end

function PlayList()
    ClearMapMusicBJ()
    PlayMusicBJ("MP3\\Ancientgroover")
    --PlayMusicBJ("MP3\\PeacefulForest")
    --PlayMusicBJ("MP3\\TreasureHunter")
    --PlayMusicBJ("MP3\\Undertheground")
    --PlayMusicBJ("MP3\\NanoEast")
    --PlayMusicBJ("MP3\\PronteraTheme")
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 27.05.2020 13:57
---
stuneff="Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget"
StunSystem={}
function StunUnit(hero,dur,flag)
	if not StunSystem[GetHandleId(hero)] then
		--	print("  ")
		StunSystem[GetHandleId(hero)]={
			Time=0,
			Eff=nil,
			Timer=nil,
			Status=nil
		}
	end
	local data=StunSystem[GetHandleId(hero)]

	local curdur=0
	if data.Time==0 then
		data.Timer=CreateTimer()
		--print("  ")
		data.Eff=AddSpecialEffectTarget(stuneff,hero,"overhead")
		BlzPauseUnitEx(hero,true)
		--SetUnitTimeScale(hero,0)
		if flag=="stagger" and  data.Status~="frise" then
			SetUnitVertexColor(hero,255,0,0,255)
			data.Status="stagger"
		end
		if flag=="frise" then
			SetUnitVertexColor(hero,0,0,255,255)
			data.Status="frise"
		end
	end

	if data.Time<dur  then
		--print("  ,  ")
		data.Time=dur
	else
		--print("   ")
		return
	end

	TimerStart(data.Timer, 0.1, true, function()
		curdur=curdur+0.1
		data.Time=data.Time-0.1
		--print(data.Time)
		if curdur>=dur or not UnitAlive(hero) then
			--print("  ")
			if flag=="stagger" or flag=="frise" then
				SetUnitVertexColor(hero,255,255,255,255)
			end
			ClearStun(hero)
			--[[
			SetUnitTimeScale(hero,1)
			BlzPauseUnitEx(hero,false)
			--BlzPauseUnitEx(hero,false)
			DestroyTimer(GetExpiredTimer())
			data.Time=0
			DestroyEffect(data.Eff)
			data.Timer=nil
			data.Status=nil
			]]
		end
	end)
end

function StunArea(hero,x,y,range,duration)
	local e=nil
	--DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster",x,y))
	GroupEnumUnitsInRange(perebor,x,y,range,nil)
	while true do
		e = FirstOfGroup(perebor)

		if e == nil then break end
		if UnitAlive(e) and IsUnitEnemy(e,GetOwningPlayer(hero)) and not IsUnitType(e,UNIT_TYPE_STRUCTURE) then
			--	print(GetUnitName(e))
			StunUnit(e,duration,"stagger")
		end
		GroupRemoveUnit(perebor,e)
	end
end

function IsUnitStunned(hero)
	local isStunned=false
	if not StunSystem[GetHandleId(hero)] then
		StunSystem[GetHandleId(hero)]={
			Time=0,
			Eff=nil,
			Timer=nil,
			Status=nil
		}
	end
	local data=StunSystem[GetHandleId(hero)]

	if data.Time>0 then
		isStunned=true
	end
	return isStunned,data.Status
end

function UnitRemoveStun(hero)
	if not StunSystem[GetHandleId(hero)] then
		StunSystem[GetHandleId(hero)]={
			Time=0,
			Eff=nil,
			Timer=nil,
			Status=nil
		}
	end
	local data=StunSystem[GetHandleId(hero)]
	if data.Time>0 then
		--print(" ",data.Time)
		ClearStun(hero)
		--ResetUnitAnimation(hero)
	end
end

function ClearStun(hero)
	if not StunSystem[GetHandleId(hero)] then
		StunSystem[GetHandleId(hero)]={
			Time=0,
			Eff=nil,
			Timer=nil,
			Status=nil
		}
	end
	local data=StunSystem[GetHandleId(hero)]
	SetUnitTimeScale(hero,1)
	DestroyTimer(data.Timer)
	data.Time=0
	DestroyEffect(data.Eff)
	data.Timer=nil
	data.Status=nil
	BlzPauseUnitEx(hero,false)
end
---@param text string
---@param textSize real
---@param x real
---@param y real
---@param z real
---@param red integer
---@param green integer
---@param blue integer
---@param alpha integer
---@param xvel real
---@param yvel real
---@param fadepoint real
---@param lifespan real
---@param player player
---@return texttag
function FlyTextTag(text, textSize, x, y, z, red, green, blue, alpha, xvel, yvel, fadepoint, lifespan, player, flag)
    local t = CreateTextTag()
    SetTextTagText(t, text, textSize)
    SetTextTagPos(t, x, y, z)
    SetTextTagColor(t, red, green, blue, alpha)
    SetTextTagVelocity(t, xvel, yvel)
    SetTextTagFadepoint(t, fadepoint)
    SetTextTagLifespan(t, lifespan)
    SetTextTagPermanent(t, false)
    if not flag then
        if player ~= nil then
            SetTextTagVisibility(t, player == GetLocalPlayer())
        end
    else
        SetTextTagVisibility(t, flag)
    end
    return t
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagGoldBounty(target, text, player)
    return FlyTextTag(text, 0.024, GetWidgetX(target) - 16, GetWidgetY(target), 0, 255, 220, 0, 255, 0, 0.03, 2, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagLumberBounty(target, text, player)
    return FlyTextTag(text, 0.024, GetWidgetX(target) - 16, GetWidgetY(target), 0, 0, 200, 80, 255, 0, 0.03, 2, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagMiss(target, text, player)
    return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 255, 0, 0, 255, 0, 0.03, 1, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagCriticalStrike(target, text, player, flag)
    return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 255, 0, 0, 255, 0, 0.04, 2, 10, player, flag)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagManaBurn(target, text, player)
    return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 82, 82, 255, 255, 0, 0.04, 2, 5, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagShadowStrike(target, text, player)
    return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 160, 255, 0, 255, 0, 0.04, 2, 5, player)
end

function FlyTextTagHealXY(x, y, text, player)
    --print(" ?")
    if player==Player(PLAYER_NEUTRAL_PASSIVE) then
        player=Player(0)
       -- print("  ")
    end
    local rx=GetRandomReal(-0.03,0.03)
    return FlyTextTag(text, 0.024, x, y, 150, 88, 250, 13, 255, rx, 0.03, 1, 3, player)
end

function FlyTextTagShieldXY(x, y, text, player, flag)
    --
    local xr = GetRandomReal(-0.05, 0, 05)
    local r, g, b = 128, 128, 128
    local see = false
    if flag == "blue" then
        r, g, b = 0, 128, 255
        see = true
    end
    if flag == "red" then
        r, g, b = 255, 128, 128
        see = true
    end
    if flag == "SeeAll" then
        see = true
    end

    return FlyTextTag("" .. text, 0.018, x, y, 150, r, g, b, 255, xr, 0.03, 1, 3, player, see)
end

function CreateStaticGoldTag(text, x, y)
    --print("  ")
    local t = CreateTextTag()
    SetTextTagText(t, text, 0.03)
    SetTextTagPos(t, x, y, 150)
    SetTextTagColor(t, 255, 220, 0, 255)
    --SetTextTagVelocity(t, 0, 0.03)
    SetTextTagFadepoint(t, 2)
    --SetTextTagLifespan(t, 5)
    SetTextTagPermanent(t, true)
    if text > 0 then
        SetTextTagVisibility(t, true)
    else
        SetTextTagVisibility(t, false)
    end
    return t
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 11.03.2020 22:30
function FindUnitOfType(id,flag,x,y)
	--flag nil -  
	--flag any - 
	local unit=nil
	local e=nil
	local k=0
	--print("")
	local rg={}
	if not flag then
		GroupEnumUnitsInRect(perebor,bj_mapInitialPlayableArea,nil)
		while true do
			e = FirstOfGroup(perebor)

			if e == nil then break end
			if UnitAlive(e) and GetUnitTypeId(e)==id then
				k=k+1
				rg[k]=e
				unit=e
			end
			GroupRemoveUnit(perebor,e)
		end
	else
			GroupEnumUnitsInRange(perebor,x,y,flag,nil)
			while true do
				e = FirstOfGroup(perebor)

				if e == nil then break end
				if UnitAlive(e) and GetUnitTypeId(e)==id then
					k=k+1
					rg[k]=e
					unit=e
				end
				GroupRemoveUnit(perebor,e)
			end
	end


	if k>1 then
	--	print("  "..k.." ")
	end
	if k>2 then
		unit=rg[GetRandomInt(1,#rg)]
	end
	if unit==nil then
	--	print("     ")
	end
	return unit,k,rg
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.04.2021 23:56
---
function UnitDamageArea(u, damage, x, y, range, flag, paramTable)
    local isdamage = false
    local e = nil
    local hero = nil
    if not x then
        x, y = GetUnitXY(u)
        range = 150
    end
    local attackIsLow=false
    local missDamage=false
    if paramTable then
        for i = 1, #paramTable do
            if paramTable[i]=="low" then
                --print(" ,     ")
                attackIsLow=true
            end
        end

    end

    GroupEnumUnitsInRange(perebor, x, y, range, nil)
    local k = 0
    local all = {}
    local deadDamage = false

    while true do
        e = FirstOfGroup(perebor)
        if e == nil then
            break
        end
        if not IsUnitFall[GetHandleId(e)] then --      
            if flag=="All" then
                UnitDamageTarget(u, e, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
                DamageDestructableInRangeXY(u,damage,range,x,y)
                --  
                UnitRemoveAbility(e, FourCC("A002"))
                UnitRemoveAbility(e, FourCC("B000"))
            end
            if UnitAlive(e) and not UnitAlive(u) and (IsUnitEnemy(e, GetOwningPlayer(u)) or GetOwningPlayer(e) == Player(PLAYER_NEUTRAL_PASSIVE)) and IsUnitType(u, UNIT_TYPE_HERO) then
                --print("     "..GetUnitName(u))
                local data = GetUnitData(u)
                --local talon = GlobalTalons[GetPlayerId(GetOwningPlayer(u)) + 1]["HeroBlademaster"][8]
                if data.KamikazeCDGH then
                    local m = data.KamikazeMDamage
                    --local data = HERO[GetPlayerId(GetOwningPlayer(u))]
                    --print(m)
                    if data.KamikazeCurrentCD <= 0 then
                        local cd = 7
                        data.KamikazeCurrentCD = cd
                        StartFrameCD(cd, data.KamikazeCDGH)
                        --- 
                        deadDamage = true
                        FlyTextTagCriticalStrike(u, L("", "Kamikaze"), GetOwningPlayer(u))
                        AddLife(data)
                        damage = damage * m
                        --ReviveHero(u, GetUnitX(u), GetUnitY(u), true)
                        SetUnitState(u, UNIT_STATE_LIFE, 1)
                        ------
                        TimerStart(CreateTimer(), cd, false, function()
                            DestroyTimer(GetExpiredTimer())
                            data.KamikazeCurrentCD = 0
                        end)
                    end


                end
            end
            --
            if UnitAlive(e) and (UnitAlive(u) or deadDamage) and (IsUnitEnemy(e, GetOwningPlayer(u)) or GetOwningPlayer(e) == Player(PLAYER_NEUTRAL_PASSIVE) or flag == "all") then
                --
                --print(damage," ?")
                if flag == "shotForce" then
                    --    
                    -- x1, x2 -   
                    -- x2, y2 -   
                    -- orientation -     
                    -- width -     
                    -- radius -    
                    --print("")
                    --local data = HERO[GetPlayerId(GetOwningPlayer(u))]
                    local xb, yb = MoveXY(GetUnitX(u), GetUnitY(u), 60, GetUnitFacing(u) - 180)
                    local speed = 20
                    local dist = 300

                    if IsPointInSector(GetUnitX(e), GetUnitY(e), xb, yb, GetUnitFacing(u), 90, range) then
                        UnitAddForceSimple(e, AngleBetweenUnits(u, e), speed, dist, nil, u)
                    end
                end
                if flag == "ForceTotem" then
                    --print(" ")
                    local tempA = AngleBetweenXY(x, y, GetUnitXY(e)) / bj_DEGTORAD
                    UnitAddForceSimple(e, tempA, 20, 300, nil, u)
                end
                if flag == "push" then
                    local distance = GetUnitData(u).DashPerAttack
                    local tempA = GetUnitFacing(u)
                    UnitAddForceSimple(e, tempA, 15, distance, nil, u)
                end
                if flag == "all" then
                    if GetPlayerController(GetOwningPlayer(u)) == MAP_CONTROL_USER then
                        local data = HERO[GetPlayerId(GetOwningPlayer(u))]
                        if not data.AddDamageTrap then
                            data.AddDamageTrap = 1
                        end
                        --damage = data.AddDamageTrap

                        --print("  ")
                        damage = damage / data.AddDamageTrap
                    else

                    end
                end
                if flag == "blackHole" then
                    if not IsUnitInRange(e, u, 15) then
                        UnitAddForceSimple(e, AngleBetweenUnits(e, u), 5, 50)
                    end
                end
                if flag == "longForce" then
                    --   
                    -- x1, x2 -   
                    -- x2, y2 -   
                    -- orientation -     
                    -- width -     
                    -- radius -    
                    --print("")
                    local data = HERO[GetPlayerId(GetOwningPlayer(u))]
                    local xb, yb = MoveXY(GetUnitX(u), GetUnitY(u), 80, GetUnitFacing(u) - 180)
                    local speed = 20
                    local dist = 150
                    if data.TaurenDash then
                        speed = speed * 2
                        dist = dist * 3
                    end
                    if IsPointInSector(GetUnitX(e), GetUnitY(e), xb, yb, GetUnitFacing(u), 70, range) then
                        UnitAddForceSimple(e, AngleBetweenUnits(u, e), speed, dist, nil, u)
                    else
                        damage = 0
                    end
                end
                if attackIsLow and IsUnitType(e,UNIT_TYPE_HERO) then
                    local data=GetUnitData(hero)
                    if data then
                        if data.SpaceForce then
                            missDamage=true
                        end
                    end
                end
                if not missDamage then
                    if UnitDamageTarget(u, e, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS) then
                        if GetUnitTypeId(e) ~= FourCC("nglm") and GetUnitTypeId(e) ~= FourCC("hdhw") then
                            --      
                            isdamage = true
                            hero = e
                            k = k + 1
                            all[k] = e
                            --print(GetUnitName(e))

                        end
                    end
                else
                    FlyTextTagShieldXY(GetUnitX(e), GetUnitY(e), "", GetOwningPlayer(e))
                end
                if (flag == "all" or IsUnitTrap(u)) and not UnitAlive(e) then
                    local ex, ey = GetUnitXY(e)
                    --FlyTextTagShieldXY(ex, ey, "  ", GetOwningPlayer(e), "SeeAll")
                    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
                        if PlayerIsPlaying[i] then
                            local data = HERO[i]
                            if UnitAlive(data.UnitHero) then
                                if IsUnitInRange(data.UnitHero, e, 1000) then
                                    if data.EvilMaskHeal then
                                        HealUnit(data.UnitHero, data.EvilMaskHeal)
                                        local rm = {
                                            L("", "Heh"),
                                            L("", "Hah"),
                                            L("", "Yhha"),
                                            L("", "Hihig"),
                                        }
                                        CreateInfoBoxForAllPlayerTimed(data, rm[GetRandomInt(1, #rm)], 1)
                                    end
                                else

                                end
                            end
                        end

                    end
                end
            end
        end
        GroupRemoveUnit(perebor, e)
    end
    if PointContentDestructable(x, y, range, true, 1 + damage, u) then
        isdamage = true
        --print(" ?")
        if IsUnitType(u,UNIT_TYPE_HERO) or GetUnitTypeId(u)==FourCC("h000") then
            local data=GetUnitData(u)
            if data.damageIsBouncing then --    
                isdamage = false
            end
        end

    end
    return isdamage, hero, k, all
end


function DamageDestructableInRangeXY(unit,damage,range,x,y)
    SetRect(GlobalRect, x - range, y - range, x + range, y + range)
    EnumDestructablesInRect(GlobalRect, nil, function()
        local d = GetEnumDestructable()
        if GetDestructableLife(d) > 0 and GetDestructableTypeId(d)~=FourCC("B005")  and GetDestructableTypeId(d)~=FourCC("OTip")  and GetDestructableTypeId(d)~=FourCC("B00G") then --   and GetDestructableTypeId(d)~=FourCC("B00C")
            if not IsDestructableInvulnerable(d) then
                SetDestructableLife(d, GetDestructableLife(d) - damage)
            end
        end
    end)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 06.05.2023 22:21
---
function CHKVictory()
    TimerStart(CreateTimer(), 5, true, function()
        local victory = false
        if IsQuestCompleted(udg_QStarAnime) and IsQuestCompleted(udg_QYetty) and IsQuestCompleted(udg_QWine) and IsQuestCompleted(udg_QWolf) and IsQuestCompleted(udg_QDragon) then
            print("   ,   ")
            victory = true
            DestroyTimer(GetExpiredTimer())
            UnitAddAbility(gg_unit_Oths_0011,FourCC("A604"))
        end
    end)
    --return victory
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 13.04.2022 16:56
---
function ActivateBulletTrap(unit,effect,range)
    if not range then
        range=1200
    end
    SetUnitAnimation(unit,"attack")
    TimerStart(CreateTimer(), 0.3, false, function()
        local angle = GetUnitFacing(unit)
        local new = CreateAndForceBullet(unit, angle, 20, effect, nil, nil, 2, range,150)
        BlzSetSpecialEffectYaw(new, math.rad(angle))
    end)
end

function IsUnitInLine(unit,dist,angle,xs,ys)
    local step=40
    local range=80
    local endi=dist//step
    local inLine=false
    local x,y=xs,ys
    for i=1,endi do
        x,y=MoveXY(x,y,step,angle)
        if IsUnitInRangeXY(unit,x,y,range) then
            --print("  ")
            --DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x,y))
            inLine=true
            return inLine
        end
    end
    return inLine
end

function IsUnitTrap (unit)
    return GetUnitAbilityLevel(unit,FourCC("A001"))>0
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 11.11.2023 17:34
---
---
function StartBlackHole(unit, timed)
    local x, y = GetUnitXY(unit)
    local range = 1200
    local eff=nil
    if not timed then
        UnitAddAbility(unit, FourCC("Aloc"))
        --AddCircleAreaForUnit(unit, 2500, 9999)
        eff=AddSpecialEffect("Shadow Ball",x,y)
        BlzSetSpecialEffectZ(eff,GetTerrainZ(x,y)-200)
        BlzSetSpecialEffectScale(eff,1.2)
    else
        range = 2400
    end

    local data = HERO[0]
    local maxSpeed = 6
    local minSpeed = 0.2
    local realSpeed = 1
    local imp = range * 2
    TimerStart(CreateTimer(), 0.1, true, function()
        if udg_HoleIsWork then
            BlzSetSpecialEffectTimeScale(eff,1)
            UnitDamageArea(unit, 30, x, y, 150)
            if GetRandomInt(1,3)==1 then
                CreateHoleEffect(unit, range)
            end

            if IsUnitInRange(data.UnitHero, unit, range) then
                data.BH = unit
                local dist = DistanceBetweenXY(x, y, GetUnitXY(data.UnitHero))
                realSpeed = imp / dist
                if realSpeed >= maxSpeed then
                    realSpeed = maxSpeed
                end

                if realSpeed <= minSpeed then
                    realSpeed = minSpeed
                end
                data.BHSpeed = realSpeed
                --print(data.BHSpeed)
            else
                data.BH = nil
            end

            local e = nil
            -- local k=0
            GroupEnumUnitsInRange(perebor, x, y, range, nil)
            while true do
                e = FirstOfGroup(perebor)
                --print(GetUnitName(e), " ")
                if e == nil then
                    break
                end

                if UnitAlive(e) and e ~= unit and not IsUnitType(e, UNIT_TYPE_HERO) then
                    --k=k+1
                    local angle = AngleBetweenUnits(e, unit)
                    if IsUnitInRange(e, unit, 100) then
                    else
                        local dist = DistanceBetweenXY(x, y, GetUnitXY(e))
                        realSpeed = imp / dist
                        if realSpeed >= maxSpeed then
                            realSpeed = maxSpeed
                        end

                        if realSpeed <= minSpeed then
                            realSpeed = minSpeed
                        end

                        UnitAddForceSimpleClean(e, angle, realSpeed, 50) --   ?
                    end
                end
                GroupRemoveUnit(perebor, e)
            end
            --print("  ",k)
        else
            data.BH = nil
            BlzSetSpecialEffectTimeScale(eff,0)
        end
        if timed then
            timed = timed - TIMER_PERIOD64
            if timed <= 0 then
                DestroyTimer(GetExpiredTimer())
                data.BH = nil
                --print("  ")
            end
        end
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
            data.BH = nil
        end
    end)
end

function CreateHoleEffect(unit, range)
    local x, y = GetUnitXY(unit)
    local ra = GetRandomInt(0, 360)
    local nx, ny = MoveXY(x, y, range, ra)
    local angle = AngleBetweenXY(nx, ny, x, y) / bj_DEGTORAD
    local eff = AddSpecialEffect("Windwalk", nx, ny)
    local rs = 10
    local timed=range/rs*1.5/100
    MoveEffectTimedWSpeed(eff, rs, angle, timed)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 08.12.2023 19:30
---
function InitAllFallenWall()
    local id = FourCC('h00V')
    local _, k, rg = FindUnitOfType(id)
    --print(k, " ")


    for i = 1, #rg do
        StartStopWall(rg[i])
    end

    -- 
     _, k, rg = FindUnitOfType(FourCC('h00W'))
    for i = 1, #rg do
        MakeUnitInfinityBouncing(rg[i])
    end
end

function StartStopWall(unit)
    local t = CreateStompWall(unit)

    local zs = GetUnitZ(unit)
    local z = zs
    local zMax = z + 500
    local speed = 10
    local up = true
    local down = false
    local x, y = GetUnitXY(unit)

    CreateSquareDestrutablesID(x, y, FourCC("Ytlc")) -- B00H -  Ytlc -  

    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        if up then
            z = z + speed
            for i=1,#t do
                BlzSetSpecialEffectZ(t[i], z)
            end

            if z >= zs + 200 then --  
                local range = 128
                SetRect(GlobalRect, x - range, y - range, x + range, y + range)
                EnumDestructablesInRect(GlobalRect, nil, function()
                    local d = GetEnumDestructable()
                    RemoveDestructable(d)
                end)
            end
            if z >= zMax then
                up = false
                down = true
            end
        else
            if down then
                z = z - speed * 4
                for i=1,#t do
                    BlzSetSpecialEffectZ(t[i], z)
                end

                if z <= zs+100 then
                    down = false
                    CreateSquareDestrutablesID(x, y, FourCC("Ytlc"))
                    DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", x, y))

                    local hero=FindNearEnemyXY(unit,250,x,y)
                    if IsUnitInRangeXY(hero, x, y, 200) then
                        local ab = AngleBetweenXY(x, y, GetUnitXY(hero))/ bj_DEGTORAD
                        UnitFallGround(hero, ab, 200,{"Stun"})
                    end
                    TimerStart(CreateTimer(), 2, false, function()
                        up = true
                    end)
                end
            end
        end

        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
            for i=1,#t do
                DestroyEffect(t[i])
                BlzSetSpecialEffectZ(t[i], z)
                BlzSetSpecialEffectPosition(t[i],OutPoint,OutPoint,0)
            end
            local range = 128
            SetRect(GlobalRect, x - range, y - range, x + range, y + range)
            EnumDestructablesInRect(GlobalRect, nil, function()
                local d = GetEnumDestructable()
                RemoveDestructable(d)
            end)
        end
    end)
end

function CreateStompWall(unit)
    UnitAddAbility(unit, FourCC("Aloc"))
    ShowUnit(unit, false)
    SetUnitInvulnerable(unit, true)
    local x, y = GetUnitXY(unit)
    local t={}
    local eff = AddSpecialEffect("ConcreteCliffFloorCenter", x, y)
    BlzSetSpecialEffectMatrixScale(eff, 2, 2, 4)

    --local eff2 = AddSpecialEffect("ConcreteCliffSide", x, y)
    --BlzSetSpecialEffectYaw(eff2, math.rad(180))
    --BlzSetSpecialEffectMatrixScale(eff2, 2, 2, 1)

    local eff2 = AddSpecialEffect("MechaImpale", x, y)
    BlzSetSpecialEffectPitch(eff2, math.rad(0))
    BlzSetSpecialEffectMatrixScale(eff2, 2,2,1)
    BlzPlaySpecialEffect(eff2, ANIM_TYPE_ATTACK)


    local eff3 = AddSpecialEffect("MechaImpale", x, y)
    --BlzSetSpecialEffectZ(eff3, z - 500)
    BlzSetSpecialEffectPitch(eff3, math.rad(180))
    BlzSetSpecialEffectMatrixScale(eff3, 2,2,1)
    BlzPlaySpecialEffect(eff3, ANIM_TYPE_ATTACK)


    table.insert(t,eff)
    table.insert(t,eff2)
    table.insert(t,eff3)
    return t
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 11.11.2023 15:56
---
function HeroFixRespPos()
    local data = HERO[0]
    data.ResPointX, data.ResPointY=GetUnitXY(data.UnitHero)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 11.11.2023 21:09
---
function FlyTimer(max)
    local s=normal_sound("TikTok")
    TimerStart(CreateTimer(), 1, true, function()
        FlyTextTagManaBurn(udg_HERO,R2I(max),Player(0))
        max=max-1
        if max<1 then
            DestroyTimer(GetExpiredTimer())
            KillSoundWhenDone(s)
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 09.11.2023 22:40
---

function ReplaceIdToSpikeTraps(id)
    local tmp, k, all = FindUnitOfType(id)
    --print(" "..k.."    "..#all)
    for i = 1, #all do
        --print(" ", GetUnitName(all[i]), i,GetUnitFacing(all[i]))

        CreateSpikeTrap(all[i])
    end
end

function ReplaceIdToStaticTrap(id)
    local tmp, k, all = FindUnitOfType(id)
    for i = 1, #all do
        CreateSpikeTrapStatic(all[i])
    end
end
function CreateSpikeTrapStatic(unit)
    local enterTrig = CreateTrigger()
    local range = 80
    local x, y = GetUnitXY(unit)
    local z = GetUnitZ(unit)
    local eff = AddSpecialEffect("MechaImpale", x, y)

    ShowUnit(unit, false)
    SetUnitInvulnerable(unit, true)
    UnitAddAbility(unit, FourCC("Aloc"))

    BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
    TriggerRegisterUnitInRange(enterTrig, unit, range, nil)
    local work=false
    TriggerAddAction(enterTrig, function()
        local entering = GetTriggerUnit()
        if not work  and GetUnitTypeId(entering)~=FourCC("h00C") then --      
            work=true
            BlzPlaySpecialEffect(eff, ANIM_TYPE_BIRTH)

            TimerStart(CreateTimer(), 0.15, false, function()
                --print(" ?")
                UnitDamageArea(unit, 50, GetUnitX(unit), GetUnitY(unit), 60)
            end)
            TimerStart(CreateTimer(), 0.7, false, function()
                BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
                work=false
            end)
        end

    end)
end

function CreateSpikeTrap(unit, timed)
    ShowUnit(unit, false)
    SetUnitInvulnerable(unit, true)
    UnitAddAbility(unit, FourCC("Aloc"))
    local x, y = GetUnitXY(unit)
    local z = GetUnitZ(unit)
    local eff = AddSpecialEffect("MechaImpale", x, y)
    local sec = 0
    local delay = 0.01
    if timed then
        UnitApplyTimedLife(unit, FourCC('BTLF'), timed)
    end
    local ta = 2 -- time attack
    if GetUnitFacing(unit) > 89 and GetUnitFacing(unit) < 91 then
        delay = 2
    end
    TimerStart(CreateTimer(), delay, false, function()
        TimerStart(CreateTimer(), 1, true, function()
            sec = sec + 1
            if sec == ta then
                BlzPlaySpecialEffect(eff, ANIM_TYPE_BIRTH)
                TimerStart(CreateTimer(), 0.15, false, function()
                    --print(" ?")
                    UnitDamageArea(unit, 50, GetUnitX(unit), GetUnitY(unit), 80)
                end)
            else
                BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
            end
            if sec >= 4 then
                sec = 0
            end
            if not UnitAlive(unit) then
                DestroyTimer(GetExpiredTimer())
                BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
                DestroyEffect(eff)
            end
        end)
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 13.04.2022 15:32
---
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), 0.1, false, function()
            -- 
            --InitAllTraps()
            --InitAllButton()
            --InitLaserTrap()
            ReplaceIdToSpikeTraps(FourCC("h00G"))
            ReplaceIdToStaticTrap(FourCC("h00Q"))

        end)
    end
end

function InitLaserTrap()
    local _, k, rg = FindUnitOfType(FourCC("h00B"))
    --print(k, "   ")
    for i = 1, #rg do
        local u = rg[i]
        InitUnitLaserTrap(u)
    end
end

--InitUnitLaserTrap(GetEnumUnit())
function InitUnitLaserTrap(u)
    UnitAddAbility(u, FourCC("Aloc"))
    local lengthDef = 2000
    local dist = 800 --    
    local length = dist / lengthDef --   
    local step = 55
    TimerStart(CreateTimer(), 3, true, function()
        local x, y = GetUnitXY(u)
        local angle = GetUnitFacing(u)
        local eff = AddSpecialEffect("Effect\\BeamZero", 0, 0)
        x, y = MoveXY(x, y, 25, angle - 180)
        SetUnitAnimation(u, "attack")
        BlzSetSpecialEffectX(eff, x - 16)
        BlzSetSpecialEffectY(eff, y)
        BlzSetSpecialEffectZ(eff, GetUnitZ(u) + 10)
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        BlzSetSpecialEffectMatrixScale(eff, length, 1, 1)
        --BlzSetSpecialEffectColor(eff, 255, 0, 0)
        local damageTimer = CreateTimer()
        TimerStart(CreateTimer(), 0.2, false, function()
            local s = normal_sound("Effect\\AngelBeam.mp3", x, y)
            local grow = GetRandomReal(0.5, 2)
            --print(grow)
            SetSoundPitch(s, grow)
            TimerStart(damageTimer, 0.07, true, function()
                DamageInLine(x, y, angle - 180, dist - step, u, step)
            end)
        end)
        TimerStart(CreateTimer(), 1.1, false, function()
            BlzSetSpecialEffectTimeScale(eff, 1)
            TimerStart(CreateTimer(), 0.1, false, function()
                BlzSetSpecialEffectX(eff, 5000)
                BlzSetSpecialEffectY(eff, 5000)
                DestroyEffect(eff)
                DestroyTimer(damageTimer)
            end)

        end)
        if not UnitAlive(u) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

ITSATRAP = false
function InitAllTraps()
    InitTrapByID(FourCC("h000"))
    InitTrapByID(FourCC("h001"))
    ITSATRAP = true
end

function TrapShotByID(id, u, range, force)
    if ITSATRAP or force then
        if id == FourCC("h000") then
            ActivateBulletTrap(u, "Abilities\\Weapons\\LichMissile\\LichMissile.mdl", range)
        elseif id == FourCC("h001") then
            ActivateBulletTrap(u, "Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", range)
        end
    end
end

function InitTrapByID(id)
    local _, k, rg = FindUnitOfType(id)

    --print(k, "   ")
    for i = 1, #rg do
        local u = rg[i]
        InitUnitBulletTrap(u)
    end
end

--InitUnitBulletTrap(GetEnumUnit(), true)

function InitUnitBulletTrap(u, force)
    local radiusActivate = 500
    local distanceSee = 1200
    local id = GetUnitTypeId(u)
    UnitAddAbility(u, FourCC("Aloc"))
    local enterTrig = CreateTrigger()
    local hp = R2I(GetUnitLifePercent(u)) --     HP  ,    
    --print(hp.."%".."  "..R2S(BlzGetUnitMaxHP(u)))
    if hp == 100 then
        --    

        TriggerRegisterUnitInRange(enterTrig, u, radiusActivate, nil)
        TriggerAddAction(enterTrig, function()
            local entering = GetTriggerUnit()
            if IsUnitType(entering, UNIT_TYPE_HERO) then
                TimerStart(CreateTimer(), 0.5, true, function()
                    if not IsUnitInRange(entering, u, radiusActivate + 500) then
                        --print("  ")
                        DestroyTimer(GetExpiredTimer())
                        --DestroyTrigger(enterTrig)
                    else
                        if IsUnitInLine(entering, distanceSee, GetUnitFacing(u), GetUnitXY(u)) and IsUnitEnemy(u, GetOwningPlayer(entering)) then
                            TrapShotByID(id, u, nil, force)
                        end
                    end
                    if not UnitAlive(u) then
                        DestroyTimer(GetExpiredTimer())
                    end
                end)
            end
        end)
    elseif hp == 1 then
        --print("  ")
        TimerStart(CreateTimer(), 2, true, function()
            TrapShotByID(id, u, nil, force)
            if not UnitAlive(u) then
                DestroyTimer(GetExpiredTimer())
            end
        end)
    elseif hp == 3 then
        --print(" ")
        TimerStart(CreateTimer(), 4, true, function()
            local count = 3
            TimerStart(CreateTimer(), 0.5, true, function()
                count = count - 1
                TrapShotByID(id, u, nil, force)
                if count <= 0 then
                    DestroyTimer(GetExpiredTimer())
                end
                if not UnitAlive(u) then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    elseif hp == 5 then
        --5-11   
        --   
        TimerStart(CreateTimer(), 2, true, function()
            TrapShotByID(id, u, 2400, force)
            if not UnitAlive(u) then
                DestroyTimer(GetExpiredTimer())
            end
        end)
    elseif hp == 7 then
        TimerStart(CreateTimer(), 0.5, false, function()
            TimerStart(CreateTimer(), 2, true, function()
                TrapShotByID(id, u, 2400, force)
                if not UnitAlive(u) then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    elseif hp == 9 then
        TimerStart(CreateTimer(), 1, false, function()
            TimerStart(CreateTimer(), 2, true, function()
                TrapShotByID(id, u, 2400, force)
                if not UnitAlive(u) then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    elseif hp == 10 then
        TimerStart(CreateTimer(), 1.5, false, function()
            TimerStart(CreateTimer(), 2, true, function()
                TrapShotByID(id, u, 2400, force)
                if not UnitAlive(u) then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 22.11.2023 19:48
---Culvert/Flash Light White.mdl
Trapdoor = 1
function InitLightFromFloor()
    local whichTrigger = CreateTrigger()
    EnumDestructablesInRect(bj_mapInitialPlayableArea, nil, function()
        local d = GetEnumDestructable()
        -- print("  ",GetDestructableName(d))
        TriggerRegisterDeathEvent(whichTrigger, d)
    end)

    TriggerAddAction(whichTrigger, function()
        --print(GetDestructableName(GetDyingDestructable()), "  ")
        local d = GetDyingDestructable()
        if GetDestructableTypeId(d) == FourCC("B00B") then
            --   
            --print("   ")
            local dx, dy = GetDestructableX(d), GetDestructableY(d)
            local z = GetTerrainZ(dx, dy) - 500
            PlayPudgeSpeechNumber(Trapdoor)
            Trapdoor=Trapdoor+1
            TimerStart(CreateTimer(), 0.5, false, function()
                local eff = AddSpecialEffect("Culvert\\Flash Light White", dx, dy)
                BlzSetSpecialEffectZ(eff, z)
                BlzSetSpecialEffectMatrixScale(eff, 4, 4, 5)
            end)
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 18.11.2023 9:13
---
---
---MoveDestructableDown(gg_dest_B00G_16112, -500, 5)
--MoveDestructableDown(GetEnumDestructable(), -500, 5)



function CreateFloorInRoom(x, y, h, w)
    if not x then
        x, y = GetDestructableX(gg_dest_DTfx_17980), GetDestructableY(gg_dest_DTfx_17980)
    end
    local step = 256
    local id = FourCC("B00G") --  
    local z = 896--GetTerrainZ(x,y)
    for i = 1, h do
        for k = 1, w do
            local r = GetRandomInt(1, 4)
            local nx, ny = x + ((i - 1) * step), y - ((k - 1) * step)
            CreateDestructableZ(id, nx, ny, z, 90 * r, 2, 1)
            local eff = AddSpecialEffect("MechaImpale", nx, ny)
            BlzSetSpecialEffectZ(eff, z - 500)
            BlzSetSpecialEffectScale(eff, 2)
            BlzPlaySpecialEffect(eff, ANIM_TYPE_ATTACK)
        end
    end
end

function MoveDestructableDown(d, maxZ, speed)
    local x, y = GetDestructableX(d), GetDestructableY(d)
    local id = GetDestructableTypeId(d)
    local currentZ = GetTerrainZ(x, y)
    maxZ = currentZ + maxZ
    CreateSquareDestrutables(x, y)
    local lastD = nil
    local tmdD = d
    PlayerSeeNoiseInRangeTimed(0.5, x, y)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        currentZ = currentZ - speed

        if currentZ <= maxZ then
            DestroyTimer(GetExpiredTimer())
            lastD = tmdD
            PlayerSeeNoiseInRangeTimed(0.5, x, y)
        else
            RemoveDestructable(d)
            d = CreateDestructableZ(id, x, y, currentZ, 0, 2, 1)
            tmdD = d
        end
    end)
end

function MoveDestructableUp(d, maxZ, speed)
    local x, y = GetDestructableX(d), GetDestructableY(d)
    local id = GetDestructableTypeId(d)
    local currentZ = GetTerrainZ(x, y) - maxZ
    maxZ = 896
    PlayerSeeNoiseInRangeTimed(0.5, x, y)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        currentZ = currentZ + speed
        if currentZ >= maxZ then
            --print("!")
            DestroyTimer(GetExpiredTimer())
            RemoveTableDestructable(x, y)
            PlayerSeeNoiseInRangeTimed(0.5, x, y)
        else
            RemoveDestructable(d)
            d = CreateDestructableZ(id, x, y, currentZ, 0, 2, 1)
        end
    end)
end

function RemoveTableDestructable(x, y)
    local range = 128
    SetRect(GlobalRect, x - range, y - range, x + range, y + range)
    EnumDestructablesInRect(GlobalRect, nil, function()
        local d = GetEnumDestructable()
        if GetDestructableTypeId(d) == FourCC("B00H") or GetDestructableTypeId(d) == FourCC("B005") then
            RemoveDestructable(d)
        end
    end)
end

function CreateSquareDestrutables(x, y)
    local id = FourCC("B005") -- B005 - ,  B00H - 
    local t = {}
    local step = 64
    local nx, ny = x - step, y - step
    local d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x + step, y + step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x - step, y + step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x + step, y - step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    for i = 1, #t do
        local dx, dy = GetDestructableX(t[i]), GetDestructableY(t[i])
        UnitDamageArea(udg_HERO, 60, dx, dy, 60, "All")
    end
end

function DownFloorInTimedXY(timed, nx, ny)
    local d = FindFloorInPoint(nx, ny)
    MoveDestructableDown(d, -500, 15)
    TimerStart(CreateTimer(), timed, false, function()
        d = FindFloorInPoint(nx, ny)
        MoveDestructableUp(d, 500, 5)
    end)
end

function CreateSquareDestrutablesID(x, y, id)
    local t = {}
    local step = 64
    local nx, ny = x - step, y - step
    local d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x + step, y + step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x - step, y + step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    nx, ny = x + step, y - step
    d = CreateDestructableZ(id, nx, ny, GetTerrainZ(x, y), 0, 1, 1)
    table.insert(t, d)
    for i = 1, #t do
        local dx, dy = GetDestructableX(t[i]), GetDestructableY(t[i])
        UnitDamageArea(udg_HERO, 60, dx, dy, 60, "All")
    end
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 02.12.2023 20:26
---
function InitRailWagon()
    --print(" ")
    local _, k, rg = FindUnitOfType(FourCC("h00T"))

    for i = 1, #rg do
        StartRailWagon(rg[i])
    end
end

function StartRailWagon(unit)
    SetUnitZ(unit,GetUnitZ(unit)+20)
    UnitAddAbility(unit, FourCC("Aloc"))
    local unitsT = FindNearUnitByID(unit, FourCC("h00U"))
    local speed = 4
    local way = {
        x = 0,
        y = 0
    }
    for i = 1, #unitsT do
        way[i] = {
            x = GetUnitX(unitsT[i]),
            y = GetUnitY(unitsT[i])
        }
    end
    local currentPoint = 1
    TimerStart(CreateTimer(), 0.1, true, function()
        if currentPoint < #way then
        else
            currentPoint = 1
            --print(" ")
        end
        --print("  ",currentPoint)
        local x, y = way[currentPoint].x, way[currentPoint].y
        --IssuePointOrder(unit,"move",x,y)
        local angle = -180 + AngleBetweenXY(x, y, GetUnitXY(unit)) / bj_DEGTORAD
        UnitAddForceSimpleClean(unit, angle, speed, 70,{"MoveWMe"})
        SetUnitFacing(unit,angle)
        if IsUnitInRangeXY(unit, x, y, 50) then
            currentPoint = currentPoint + 1
            --print("   ",currentPoint)
        end
    end)
end

function FindNearUnitByID(unit, id)
    local e = nil
    local result = nil
    local min = 1000
    local x, y = GetUnitXY(unit)
    local range = 4000
    local unitsT = {}
    local distanceT = {}
    GroupEnumUnitsInRange(perebor, x, y, range, nil)
    while true do
        e = FirstOfGroup(perebor)
        --print(" ",GetUnitName(e))
        if e == nil then
            break
        end

        if GetUnitTypeId(e) == id then
            local dist = DistanceBetweenXY(x, y, GetUnitXY(e))
            if dist <= min then
                min = dist
                result = e
            end
            table.insert(unitsT, e)
            table.insert(distanceT, dist)

            --print("",GetUnitName(e),dist)

        end
        GroupRemoveUnit(perebor, e)
    end

    TimerStart(CreateTimer(), 1, false, function()
        for i=1,#unitsT do
            UnitAddAbility(unitsT[i], FourCC("Aloc"))
            ShowUnit(unitsT[i], false)
            SetUnitInvulnerable(unitsT[i], true)
        end
    end)
    return unitsT
end

function SortUnitInTableByRange(unitsT, distanceT)

    table.sort(distanceT)
    for i = 1, #distanceT do
        print(i, tbl[i])
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 14.11.2023 23:17
---
function InitRestartLevel()
    ----------------------------------------------------------------- OSKEY_R
    local gg_trg_EventUpR = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpR, Player(i), OSKEY_R, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpR, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseR then
            data.ReleaseR = true
            --print("R")
            data.REffect=AddSpecialEffect("CircleCastBarR",GetUnitXY(data.UnitHero))
            local eff=data.REffect
            local duration =3
            BlzSetSpecialEffectScale(eff, 1.5)
            BlzSetSpecialEffectTimeScale(eff, duration)
            local z,x,y=GetUnitZ(data.UnitHero),GetUnitXY(data.UnitHero)
            BlzSetSpecialEffectPosition(eff, x, y, z+200)
            TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                duration = duration - TIMER_PERIOD64
               -- z,x,y=GetUnitZ(data.UnitHero),GetUnitXY(data.UnitHero)
                --BlzSetSpecialEffectPosition(eff, x, y, z+200)
                if duration <= 0 then
                    --print("")
                    if not data.ResPointX then
                        data.ResPointX, data.ResPointY = GetPlayerStartLocationX(Player(data.pid)), GetPlayerStartLocationY(Player(data.pid))
                    end
                    SetUnitPositionSmooth(data.UnitHero,data.ResPointX, data.ResPointY)
                    UnitStartFallAnim(data.UnitHero,1000)
                    DestroyTimer(GetExpiredTimer())
                    DestroyEffect(data.REffect)
                    BlzSetSpecialEffectPosition(eff, OutPoint, OutPoint, z+200)
                end
                if not data.REffect then
                    DestroyTimer(GetExpiredTimer())
                    DestroyEffect(data.REffect)
                end
            end)
        end
    end)
    local TrigDepressR = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressR, Player(i), OSKEY_R, 0, false)
    end
    TriggerAddAction(TrigDepressR, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseR = false
        DestroyEffect(data.REffect)
        data.REffect=nil
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 28.11.2023 19:01
---
function CreateSplatXY(texture,x,y)
    local size=100
    local img = CreateImage(texture, size, size, size, 4000, 4000, 0, 0, 0, 1000, 3)
    SetImageRenderAlways(img, true)
    SetImagePosition(img,x-size/2,y-size/2,1000)
    ShowImage(img, true)

end
function InitRSFGHD()
    local t={
        "r",
        "s",
        "f",
        "g",
        "h",
        "d"
    }
    for i=1,#t do
        local texture="image"..t[i]
        local x,y=GetDestructableX(udg_Buttons[i]),GetDestructableY(udg_Buttons[i])
        CreateSplatXY(texture,x,y)
        --print(t[i])
    end
end

function AddCircleAreaForUnit(unit, radius, timed)
    local path = "replaceabletextures\\selection\\rangeindicator" --    
    local CircleImage = CreateImage(path, radius, radius, radius, 5000, 5000, 0, 0, 0, 0, 1)

    SetImageRenderAlways(CircleImage, true)
    ShowImage(CircleImage, true)
    --SetImagePosition(CircleImage, GetUnitX(unit), GetUnitY(unit), 0)
    local alpha = 255
    local str = timed
    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        alpha = alpha - str
        --SetImageColor(CircleImage, 255, 0, 0, alpha)
        timed = timed - TIMER_PERIOD
        local xs, ys = GetUnitX(unit) - radius / 2 - 16, GetUnitY(unit) - radius / 2 - 16
        SetImagePosition(CircleImage, xs, ys, 0)

        if timed <= 0 then
            DestroyTimer(GetExpiredTimer())
            DestroyImage(CircleImage)
            ShowImage(CircleImage, false)
        end
    end)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 03.01.2023 22:16
function GetPortraitFromBD(id)
    local TexturePortraits={
        [FourCC("e003")]="TexturePortraits\\SnowManPortrait",
        [FourCC("n000")]="TexturePortraits\\Yetty", -- 
        [FourCC("n001")]="TexturePortraits\\DragonPortrait", -- 
        [FourCC("n002")]="TexturePortraits\\Wolf", -- 
        [FourCC("u000")]="TexturePortraits\\WivernPortrait",
        [FourCC("h009")]="TexturePortraits\\Anime",
        [FourCC("n007")]="TexturePortraits\\Butcher",
    }
    if TexturePortraits[id] then
        return TexturePortraits[id]
    else
        return "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn"
    end
end

BugsFH={}

function CreateBOSSHPBar(boss,name)
    local into=BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)

    BlzFrameSetTexture(into, "Replaceabletextures\\Teamcolor\\Teamcolor00.blp", 0, true)
    BlzFrameSetSize(into, 0.76, 0.02)
    BlzFrameSetAbsPoint(into, FRAMEPOINT_LEFT, 0.018, 0.03)

    local charges = BlzCreateFrameByType("BACKDROP", "Face", into, "", 0)
    local new_FrameChargesText = BlzCreateFrameByType("TEXT", "ButtonChargesText", charges, "", 0)

    BlzFrameSetTexture(charges, "HPBOX", 0, true)
    BlzFrameSetSize(charges, 0.8, 0.066)
    BlzFrameSetAbsPoint(charges, FRAMEPOINT_LEFT, 0, 0.03)
    --BlzFrameSetPoint(charges, FRAMEPOINT_BOTTOM, wood, FRAMEPOINT_BOTTOM, 0,0)
    BlzFrameSetText(new_FrameChargesText, name)
    BlzFrameSetPoint(new_FrameChargesText, FRAMEPOINT_CENTER, charges, FRAMEPOINT_CENTER, 0., 0.)
    BlzFrameSetVisible(into, true)


    local portrait = BlzCreateFrameByType("BACKDROP", "Face", into, "", 0)
    BlzFrameSetParent(portrait, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(portrait, GetPortraitFromBD(GetUnitTypeId(boss)), 0, true)
    BlzFrameSetSize(portrait, 0.06, 0.06)
    BlzFrameSetAbsPoint(portrait, FRAMEPOINT_LEFT, -0.05, 0.05)
    table.insert(BugsFH,portrait)


    TimerStart(CreateTimer(), 0.05, true, function()
        local hp = 0
        hp = GetUnitLifePercent(boss)
        if not UnitAlive(boss) then
            hp = 0
            --print(" ,    ",hp)

            BlzFrameSetSize(into, 0, 0)
            BlzFrameSetVisible(into, false)
            --BlzFrameSetText(textCurrent, hp)
            --BlzFrameSetText(textMax, R2I(BlzGetUnitMaxHP(hero)))
        else
            --BlzFrameSetVisible(into, GetLocalPlayer() == GetOwningPlayer(hero))
            --BlzFrameSetText(textCurrent, R2I(GetUnitState(hero, UNIT_STATE_LIFE)))
            --BlzFrameSetText(textMax, R2I(BlzGetUnitMaxHP(hero)))
            BlzFrameSetSize(into, 0.76 * hp / 100, 0.02)
            --BlzFrameSetAlpha(chargesBox, 128)
        end
    end)
    return into
end

function CreateMarkOnBossBar(into,marcPercent)
    local mark = BlzCreateFrameByType("BACKDROP", "Face", into, "", 0)
    BlzFrameSetParent(mark, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(mark, "HPBOXMark", 0, true)
    BlzFrameSetSize(mark, 0.05, 0.05)
    BlzFrameSetPoint(mark, FRAMEPOINT_CENTER, into, FRAMEPOINT_LEFT,0.77*marcPercent/100 , 0.02)
    table.insert(BugsFH,mark)
    return mark
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 23.11.2023 22:40
---
function PlayPudgeSpeechNumber(n)
    local BD = {
        "     ...",
        "?",
        " - ?",
        ",     !",
        "      -    ",
        ",     ?",
        "    ,     ",
        "       ",
        "     !",
        "  !?",
        ",      ?",
        "    ,  ,     ",
        "     , ,     ?",
        "    ,      ",
        "   ?       "
    }
    --if not GBoss then
        GBoss = FindUnitOfType(FourCC("n007"))
        --print(' ')
    --end
    CameraSetEQNoiseForPlayer(Player(0), 6)
    TimerStart(CreateTimer(), 2, false, function()
        CameraClearNoiseForPlayer(Player(0))
    end)
    PlayBossSpeech("Speech\\Pudge\\Q" .. n, BD[n])

    local portrait = BlzCreateFrameByType("BACKDROP", "Face",  BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(portrait, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(portrait, GetPortraitFromBD(nil), 0, true)
    BlzFrameSetSize(portrait, 0.06, 0.06)
    BlzFrameSetAbsPoint(portrait, FRAMEPOINT_LEFT, -0.05, 0.05)
    TimerStart(CreateTimer(), GBossSoundDuration, false, function()
        BlzDestroyFrame(portrait)
    end)
    --table.insert(BugsFH,portrait)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 11.02.2023 17:28
---
SnowManDefenceGame = false
function StartSnowManDefence()
    SnowManDefenceGame = true
    local boss = FindUnitOfType(FourCC('e003'))
    local xs, ys = GetUnitXY(boss)
    local BossFight = true
    local into = CreateBOSSHPBar(boss, " ")

    local clock = CreateAndStartClock(0.05, 0.06, true, 0, 5, 0, into)

    UnitSetHitBoxOverSize(boss, 150)
    UnitAddAbility(boss, FourCC('Abun'))
    SetUnitState(boss, UNIT_STATE_LIFE, 5000)
    --SetUnitPosition(boss, xs, ys)
    --SetUnitOwner(boss, Player(10), true)
    local range = 1000
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("The Broken Fellowship")
    SetMusicVolumeBJ(100)
    --local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    --FogModifierStart(FW)

    local phase = 4 -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    TimerStart(CreateTimer(), 1, true, function()
        -- 
        local bx, by = GetUnitXY(boss)

        if DEFENSEND then
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            print(" ,   ")
            QuestSetCompletedBJ(udg_QSnowMan, true)
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)
        end

        if not UnitAlive(boss) then
            --   
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            print(",     ")
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, 2000) then
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then
                            if phase == 1 then
                                --print("  ")
                                --local angle = AngleBetweenUnits(boss, hero)
                                --SetUnitFacing(boss, angle)
                                --WolfSlashAttack(boss, phase)

                            end
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)

                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end
                if k > 0 and not BossFight then
                    print("  ") --   
                    BlzFrameSetVisible(into, true)
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    --HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    BlzDestroyFrame(clock)
                    PlayMusicBJ("Salve Springs")
                    SetMusicVolumeBJ(100)
                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            --   
            sec = sec + 1
            if sec >= 30 then
                sec = 0
                phase = GetRandomInt(1, 5) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
            end
            --
            local hero = HERO[0].UnitHero
            if phase == 1 and PhaseOn then
                PhaseOn = false
                print("", phase)
                local k = 6
                TimerStart(CreateTimer(), 5, true, function()
                    k = k - 1
                    if phase ~= 1 or k <= 0 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        CreateUnitRoundOnFreePosition(FourCC("n004"), 6, 1500, boss)
                    end
                end)

            end

            if phase == 2 and PhaseOn then
                PhaseOn = false
                print("", phase)
                CreateUnitRoundOnFreePosition(FourCC("n005"), 6, GetRandomInt(1200,1800), boss)
                local k = 3
                TimerStart(CreateTimer(), 10, true, function()
                    k = k - 1
                    if phase ~= 2 or k <= 0 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        CreateUnitRoundOnFreePosition(FourCC("n005"), 6,  GetRandomInt(1200,1800), boss)
                    end
                end)
            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                print("", phase)
                CreateUnitRoundOnFreePosition(FourCC("n006"), 8,  GetRandomInt(1200,1800), boss)
                local k = 3
                TimerStart(CreateTimer(), 10, true, function()
                    k = k - 1
                    if phase ~= 3 or k <= 1 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        CreateUnitRoundOnFreePosition(FourCC("n006"), 8,  GetRandomInt(1200,1800), boss)
                    end
                end)

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                print("", phase)
                CreateUnitRoundOnFreePosition(FourCC("n007"), 8,  GetRandomInt(1200,1800), boss)
                local k = 3
                TimerStart(CreateTimer(), 10, true, function()
                    k = k - 1
                    if phase ~= 4 or k <= 1 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        CreateUnitRoundOnFreePosition(FourCC("n007"), 9,  GetRandomInt(1200,1800), boss)
                    end
                end)

            end
            if phase == 5 and PhaseOn then
                PhaseOn = false
                CreateUnitRoundOnFreePosition(FourCC("n008"), 2,  GetRandomInt(1200,1800), boss)
                local k = 3
                TimerStart(CreateTimer(), 15, true, function()
                    k = k - 1
                    if phase ~= 5 or k <= 1 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        CreateUnitRoundOnFreePosition(FourCC("n008"), 2,  GetRandomInt(1200,1800), boss)
                    end
                end)

            end
            if phase == 6 and PhaseOn then
                PhaseOn = false
                print("", phase)


            end
            if phase == 7 and PhaseOn then
                PhaseOn = false
                print("", phase)

            end


        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                clock = CreateAndStartClock(0.05, 0.06, true, 0, 5, 0, into)
                ClearMapMusicBJ()
                PlayMusicBJ("The Broken Fellowship")
                SetUnitPositionSmooth(boss, xs, ys) --  
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
            end
        end--
    end)
end

function StarExplodeAI(unit,target)
    TimerStart(CreateTimer(), GetRandomReal(0.8,1.2), true, function()
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        else
            if IsUnitInRange(unit, target, 200) then
                local mark = AddSpecialEffect("Spell Marker TC", GetUnitXY(unit))
                BlzSetSpecialEffectScale(mark, 2)
                local delay=1
                --local eff=AddSpecialEffect("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",GetUnitX(unit), GetUnitY(unit))
                TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                    delay=delay-TIMER_PERIOD64
                    BlzSetSpecialEffectX(mark,GetUnitX(unit))
                    BlzSetSpecialEffectY(mark,GetUnitY(unit))

                    if delay<=0 then

                        DestroyEffect(mark)
                        UnitDamageArea(unit, 50, GetUnitX(unit), GetUnitY(unit), 250)
                        local eff=AddSpecialEffect("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",GetUnitX(unit), GetUnitY(unit))
                        DestroyTimer(GetExpiredTimer())
                        KillUnit(unit)
                    end
                end)
            end
        end
    end)
end

function StartTrollMeteorFall(unit)
    local k = 4
    TimerStart(CreateTimer(), GetRandomReal(0.8,1.2), true, function()
        k = k + 1
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        else
            --   
            if IsUnitInRange(unit, enemy, 800) then
                IssueImmediateOrder(unit, "stop")
                SetUnitFacing(unit, AngleBetweenUnits(unit, enemy))
            end
            if k > 5 then
                k = 0
                local hero=HERO[0].UnitHero
                if IsUnitInRange(unit,hero,700) then
                    BlzPauseUnitEx(unit, true)
                    SetUnitAnimation(unit, "spell")

                    local x,y=GetUnitXY(hero)
                    MarkAndFall(x, y, "Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile", unit,1)
                    TimerStart(CreateTimer(), 2, false, function()
                        if UnitAlive(unit) then
                            ResetUnitAnimation(unit)
                        end
                        BlzPauseUnitEx(unit, false)
                    end)
                end
            end
        end
    end)
end

function StartTrollFireBallAI(unit, enemy)
    local k = 4
    TimerStart(CreateTimer(), 1, true, function()
        k = k + 1
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        else
            --   
            if IsUnitInRange(unit, enemy, 800) then
                IssueImmediateOrder(unit, "stop")
                SetUnitFacing(unit, AngleBetweenUnits(unit, enemy))
            end
            if k > 5 then
                k = 0
                BlzPauseUnitEx(unit, true)
                SetUnitAnimation(unit, "spell")
                CreateAndForceBullet(unit, GetUnitFacing(unit), 15, "FireBallMissileNoOmni")
                TimerStart(CreateTimer(), 1, false, function()
                    if UnitAlive(unit) then
                        ResetUnitAnimation(unit)
                    end
                    BlzPauseUnitEx(unit, false)
                end)
            end
        end
    end)
end

function CreateUnitRoundOnFreePosition(unitID, count, range, unitTarget)
    local x, y = GetUnitXY(unitTarget)
    local hero=HERO[0].UnitHero
    local ri=GetRandomReal(0,360)
    for i = 1, count do
        local nx, ny = MoveXY(x, y, range, (i * 360 / count)+ri)
        if not IsTerrainPathable(nx, ny, PATHING_TYPE_WALKABILITY) and not IsUnitInRangeXY(hero,nx,ny,800) then
            local new = CreateUnit(Player(10), unitID, nx, ny, 0)
            if unitID == FourCC("n005") then
                StartTrollFireBallAI(new, unitTarget)
            end
            if unitID == FourCC("n006") then
                StartTrollMeteorFall(new)
            end
            if unitID == FourCC("n007") then
                StarExplodeAI(new,unitTarget)
            end

            if IssueTargetOrder(new, "attack", unitTarget) then

            else
                IssueTargetOrder(new, "move", unitTarget)
            end
        end
    end

end

BigHP_ID = FourCC("e004") --  
HP_LINK = {}
function UnitSetHitBoxOverSize(unit, size)
    local units = {}
    local x, y = GetUnitXY(unit)
    local max = 24
    for i = 1, max do
        local nx, ny = MoveXY(x, y, size, i * 360 / max)
        local new = CreateUnit(GetOwningPlayer(unit), BigHP_ID, nx, ny, 0)
        table.insert(units, new)
        HP_LINK[GetHandleId(new)] = {
            RealUnit = unit
        }
    end
    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        if false then
            --      
            x, y = GetUnitX(unit)
            for i = 1, #units do
                local nx, ny = MoveXY(x, y, size, i * 360 / max)
                SetUnitX(units[i], nx)
                SetUnitY(units[i], ny)
            end
        end
        if not UnitAlive(unit) then
            for i = 1, #units do
                KillUnit(units[i])
            end
            DestroyTimer(GetExpiredTimer())
        else
            UnitFakeCollisionPush(unit, size * 1.5)
        end


    end)
end

function GetRealUnit(hpBoxUnit)

    if GetUnitTypeId(hpBoxUnit) == BigHP_ID then
        local data = HP_LINK[GetHandleId(hpBoxUnit)]
        hpBoxUnit = data.RealUnit
    else
        print("   ")
    end
    return hpBoxUnit
end

function UnitFakeCollisionPush(unit, range)
    --  
    local e = nil
    local x, y = GetUnitXY(unit)
    local has = false
    GroupEnumUnitsInRange(perebor, x, y, range, nil)
    while true do
        e = FirstOfGroup(perebor)

        if e == nil then
            break
        end
        if UnitAlive(e) and GetOwningPlayer(e) ~= GetOwningPlayer(unit) then
            local angle = AngleBetweenUnits(unit, e)
            --print("    ")

            UnitAddForceSimple(e, angle, 5, 80)
            has = true

        end
        GroupRemoveUnit(perebor, e)
    end
    return has
end
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectAnime()
        end)
    end
end

function InitTrig_EnterInRectAnime()

    --print("  ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_AIStartBoss)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            --print("12")
            local boss = FindUnitOfType(FourCC('h009'))

            StartAnimeAI(GetUnitXY(boss))
            DisableTrigger(gg_trg_EnterInRect)
            local enterTrig = CreateTrigger()
            TriggerRegisterUnitInRange(enterTrig, boss, 200, nil)
            TriggerAddAction(enterTrig, function()
                local entering = GetTriggerUnit()
                --print(GetUnitName(entering))

            end)

        end
    end)
end

function StartAnimeAI(xs, ys)
    xs, ys = -12079, 8680 --  
    local boss = FindUnitOfType(FourCC('h009'))
    local BossFight = true
    local into = CreateBOSSHPBar(boss, " ")

    local allyPeon = FindUnitOfType(FourCC('o002'))
    if UnitRemoveAbility(allyPeon, FourCC("A604")) then
        StartPeonAllyAI()
    end
    StartFlowerCreation(boss)
    local hpMark = { 100, 88, 76, 64, 52, 40, 28 }
    local phaseCHK = {
        true,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
    }
    local HPMarkFH = {}
    for i = 1, #hpMark do
        --table.insert(phaseCHK, true)
        if i >= 2 then
            table.insert(HPMarkFH, CreateMarkOnBossBar(into, hpMark[i]))
            --table.insert(phaseCHK, false)
        end
    end

    UnitAddAbility(boss, FourCC('Abun'))
    --SetUnitPosition(boss, xs, ys)
    SetUnitOwner(boss, Player(10), true)
    local range = 2500
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("The Hollow Reef")
    SetMusicVolumeBJ(100)
    --local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    --FogModifierStart(FW)

    local phase = 1--GetRandomInt(1, 1) -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    local OnSecondPhaseMove = 0
    local bulletCounter = 0
    local r = GetRandomInt(1, 3)

    TimerStart(CreateTimer(), 1, true, function()
        -- 
        local bx, by = GetUnitXY(boss)
        GBoss = boss
        if not UnitAlive(boss) then
            --   
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            CreateVictoryElderBorder()
            QuestSetCompletedBJ(udg_QStarAnime, true)
            if UnitAlive(allyPeon) then
                QuestSetCompletedBJ(udg_QNudeFriend, true)
                HealUnit(allyPeon)
                AllyPeonCanTP=true
                DisableTrigger(gg_trg_DeathNudeFriend)
            end
            CreateUnit(Player(0), FourCC("h008"), GetUnitX(boss), GetUnitY(boss), 0)
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, range) then
                        --     
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then
                            if phase == 1 then
                                --print("  ")

                            end
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)

                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Salve Springs")
                    SetMusicVolumeBJ(100)

                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            local hero = HERO[0].UnitHero
            --   
            sec = sec + 1
            if sec >= 5 then
                sec = 0
                phase = GetRandomInt(1, 1) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
            end
            -- print(" ",GetUnitLifePercent(boss))
            if GetUnitLifePercent(boss) <= hpMark[2] then
                phase = 2
                --print(" 1")
                if not phaseCHK[phase] then
                    --print(" 2")
                    AnitAddArmorTimed(boss, 50, 10)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    phaseCHK[phase] = true
                    OnSecondPhaseMove = 0
                    --Blink2Point(boss, xs, ys)
                    --CreateBeemInRange(boss, 7)

                    --print("   ", phase, " ", sec)
                    sec = 0
                end
            end

            if GetUnitLifePercent(boss) <= hpMark[3] then
                phase = 3
                if not phaseCHK[phase] then
                    AnitAddArmorTimed(boss, 50, 10)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase, " ", sec)
                    sec = 0
                    --AnimeJumpToPoint(boss, true, GetUnitXY(hero))
                    phaseCHK[phase] = true
                end
            end

            if GetUnitLifePercent(boss) <= hpMark[4] then
                phase = 4
                if not phaseCHK[phase] then
                    AnitAddArmorTimed(boss, 50, 10)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --CreateAndMoveChakram(boss, hero, bulletCounter)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[5] then
                phase = 5
                if not phaseCHK[phase] then
                    AnitAddArmorTimed(boss, 50, 10)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --FlyAroundHero(boss, hero)

                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[6] then
                phase = 6
                if not phaseCHK[phase] then
                    AnitAddArmorTimed(boss, 50, 10)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --CreateAnimeLineDelay(boss, hero, 10)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[7] then
                phase = 7
                if not phaseCHK[phase] then
                    AnitAddArmorTimed(boss, 50, 120)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --SunStrikeArea(boss, hero, xs, ys)
                    phaseCHK[phase] = true
                end
            end

            --

            bulletCounter = bulletCounter + 1
            if bulletCounter >= 5 then
                bulletCounter = 1
            end
            if phase == 1 and PhaseOn then
                PhaseOn = false
                AnimeRangeAttack(boss, hero, bulletCounter)
                MakeUnitBulletCatcherTimed(boss, 2)
            end

            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                end
            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    AnimeJumpToPoint(boss, true, GetUnitXY(hero)) --  
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                elseif rph == 3 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                end

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    AnimeJumpToPoint(boss, true, GetUnitXY(hero)) --  
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                elseif rph == 3 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                elseif rph == 4 then
                    CreateAndMoveChakram(boss, hero, bulletCounter)
                end


            end
            if phase == 5 and PhaseOn then
                PhaseOn = false

                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    AnimeJumpToPoint(boss, true, GetUnitXY(hero)) --  
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                elseif rph == 3 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                elseif rph == 4 then
                    CreateAndMoveChakram(boss, hero, bulletCounter)
                elseif rph == 5 then
                    FlyAroundHero(boss, hero)
                end


            end
            if phase == 6 and PhaseOn then
                PhaseOn = false
                --print("", phase)

                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    AnimeJumpToPoint(boss, true, GetUnitXY(hero)) --  
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                elseif rph == 3 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                elseif rph == 4 then
                    CreateAndMoveChakram(boss, hero, bulletCounter)
                elseif rph == 5 then
                    FlyAroundHero(boss, hero)
                elseif rph == 6 then
                    CreateAnimeLineDelay(boss, hero, 10)
                end

            end
            if phase == 7 and PhaseOn then
                PhaseOn = false
                --print("", phase)

                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    AnimeJumpToPoint(boss, true, GetUnitXY(hero)) --  
                elseif rph == 2 then
                    AnimeRangeAttack(boss, hero, bulletCounter)
                elseif rph == 3 then
                    Blink2Point(boss, xs, ys)
                    CreateBeemInRange(boss, GetRandomInt(phase, 7))
                elseif rph == 4 then
                    CreateAndMoveChakram(boss, hero, bulletCounter)
                elseif rph == 5 then
                    FlyAroundHero(boss, hero)
                elseif rph == 6 then
                    CreateAnimeLineDelay(boss, hero, 10)
                elseif rph == 7 then
                    SunStrikeArea(boss, hero, xs, ys)
                end
            end


        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("The Hollow Reef")
                SetUnitPositionSmooth(boss, xs, ys) --  
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
                phaseCHK = {
                    true,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                }
            end
        end--
    end)
end

function StartFlowerCreation(boss)
    --Doodads\Felwood\Rocks\Felwood_Spires\Felwood_Spires
    TimerStart(CreateTimer(), 0.1, true, function()
        local x,y=GetUnitXY(boss)
        local dist=GetRandomInt(0,300)
        local angle=GetRandomInt(0,360)
        local nx,ny=MoveXY(x,y,dist,angle)
        local r=GetRandomInt(0,2)
        local eff=AddSpecialEffect("Doodads\\Felwood\\Rocks\\Felwood_Spires\\Felwood_Spires"..r,nx,ny)
        BlzSetSpecialEffectYaw(eff, math.rad(GetRandomInt(0,360)))
        BlzSetSpecialEffectScale(eff,GetRandomReal(3,5))
        BlzPlaySpecialEffect(eff,ANIM_TYPE_STAND)
        TimerStart(CreateTimer(), 10, false, function()
            DestroyEffect(eff)
        end)
        if not UnitAlive(boss) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function MakeUnitBulletCatcherTimed(boss, timed)
    SetUnitUserData(boss, 100)
    TimerStart(CreateTimer(), timed, false, function()
        SetUnitUserData(boss, 0)
    end)
end

function AnitAddArmorTimed(unit, armor, timed)
    BlzSetUnitArmor(unit, BlzGetUnitArmor(unit) + armor)
    local eff = AddSpecialEffectTarget("effect\\Bubble", unit, "chest")
    DestroyEffect(AddSpecialEffectTarget("Effect\\File00000341", unit, "chest"))
    local x,y=GetUnitXY(unit)
    local _, _, _, units = UnitDamageArea(unit, 1, x, y, 500)

    for i = 1, #units do
        local angle=AngleBetweenUnits(unit,units[i])
        local dist=500-DistanceBetweenXY(x,y,GetUnitXY(units[i]))
        BlzPauseUnitEx(units[i], true) --  
        UnitAddJumpForce(units[i],angle,40,dist,250)
    end
    TimerStart(CreateTimer(), timed, false, function()
        BlzSetUnitArmor(unit, BlzGetUnitArmor(unit) - armor)
        DestroyEffect(eff)
    end)
end

function SunStrikeArea(boss, hero, xs, ys)
    --CreateSunStrikeSingle(boss, GetUnitXY(hero))
    local period = 0.5
    local dist = 1500
    TimerStart(CreateTimer(), period, true, function()
        normal_sound("sun_strike", GetUnitXY(boss))
        local max = dist // 30
        local angle = 360 / max
        for i = 1, max do
            local nx, ny = MoveXY(xs, ys, dist, angle * i)
            CreateSunStrikeSingle(boss, nx, ny)
        end
        dist = dist - 250
        if dist <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function CreateSunStrikeSingle(boss, x, y)
    local eff1 = AddSpecialEffect("SunStrikeCharge", x, y)
    local eff2 = AddSpecialEffect("SunStrikeImpact", x, y)
    local mark = AddSpecialEffect("Spell Marker TC", x, y)

    TimerStart(CreateTimer(), 1.8, false, function()
        DestroyEffect(eff1)
        DestroyEffect(eff2)
        DestroyEffect(mark)
        UnitDamageArea(boss, 200, x, y, 125)
    end)
end

function CreateAndMoveChakram(boss, hero, max)
    SetUnitAnimationByIndex(boss, 3)
    TimerStart(CreateTimer(), 1, true, function()
        local x, y = GetUnitXY(boss)
        local eff = AddSpecialEffect("chakram", x, y)
        local z = GetTerrainZ(x, y) + 60
        local angle = AngleBetweenUnits(boss, hero)
        local timed = 10
        --gr=gr+1
        --print(gr)
        normal_sound("Buildings/Human/HumanLumberMill/HumanLumberMillWhat1", x, y)
        TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
            timed = timed - TIMER_PERIOD64
            x, y, z = BlzGetLocalSpecialEffectX(eff), BlzGetLocalSpecialEffectY(eff), BlzGetLocalSpecialEffectZ(eff)
            x, y = MoveXY(x, y, 7, angle)
            BlzSetSpecialEffectPosition(eff, x, y, z)
            BlzSetSpecialEffectYaw(eff, math.rad(angle))
            local is, enemy = UnitDamageArea(boss, 50, x, y, 185)

            if is then
                angle = AngleBetweenXY(x, y, GetUnitXY(hero)) / bj_DEGTORAD
            end
            if IsUnitInRangeXY(enemy, x, y, 300) then
                angle = -180 + AngleBetweenXY(x, y, GetUnitXY(hero)) / bj_DEGTORAD
            end
            if false then
                local _, _, _, units = UnitDamageArea(boss, 1, x, y, 300)
                for i = 1, #units do
                    --print("")
                    local xu, yu = GetUnitXY(units[i])
                    local d = DistanceBetweenXY(x, y, xu, yu) - 1
                    local angleW = 1 + AngleBetweenXY(x, y, xu, yu) / bj_DEGTORAD
                    local vector = Vector:new(x, y, z)
                    local newVector = vector
                    newVector = VectorSum(newVector, vector:yawPitchOffset(d, angleW * (math.pi / 180), 0.0))
                    SetUnitPositionSmooth(units[i], newVector.x, newVector.y)
                end
            end

            if timed <= 0 then
                DestroyEffect(eff)
                DestroyTimer(GetExpiredTimer())
            end
        end)
        max = max - 1
        if max <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function FlyAroundHero(boss, hero)
    local t = CreateTimer()
    local dist = 500
    local speed = 2
    local ri = GetRandomInt(0, 360)
    local i = ri
    local revers = 1
    local blink = false

    SetUnitAnimationByIndex(boss, 2)--WALK
    TimerStart(t, TIMER_PERIOD64, true, function()
        local xs, ys = GetUnitXY(hero)

        local nx, ny = MoveXY(xs, ys, dist, speed * i)
        if not blink then
            blink = true
            Blink2Point(boss, nx, ny)
        end
        i = i + revers
        --print(i, "i")
        dist = dist - 1
        local angle = AngleBetweenXY(nx, ny, MoveXY(xs, ys, dist, speed * (i + revers))) / bj_DEGTORAD
        --QueueUnitAnimation(boss,"Walk fast")
        SetUnitPosition(boss, nx, ny)
        BlzSetUnitFacingEx(boss, angle)
    end)
    TimerStart(CreateTimer(), 3.4, false, function()
        DestroyTimer(t)
        AnimeJumpToPoint(boss, true, GetUnitXY(hero))
    end)
end

function AnimeJumpToPoint(boss, HasMarker, x, y)
    local mark = nil
    local angle = AngleBetweenXY(GetUnitX(boss), GetUnitY(boss), x, y) / bj_DEGTORAD
    local dist = DistanceBetweenXY(GetUnitX(boss), GetUnitY(boss), x, y)
    if HasMarker then
        mark = AddSpecialEffect("Spell Marker TC", x, y)
        BlzSetSpecialEffectScale(mark, 3)
    end
    TimerStart(CreateTimer(), 0.9, false, function()
        DestroyEffect(mark)
        --SetUnitTimeScale(boss, 0.3)
        SetUnitAnimation(boss, "Spell Slam")
        QueueUnitAnimation(boss, "Stand")
        --print(r)
        --r=r+1
        UnitAddJumpForce(boss, angle, 60, dist, 500, false, "Earthshock")
        MakeUnitBulletCatcherTimed(boss, 3)
    end)
end

function CreateAnimeLineDelay(boss, hero, max)
    local t = CreateTimer()
    local period = 0.3
    TimerStart(t, period, true, function()
        local angle = AngleBetweenUnits(boss, hero)
        SetUnitFacing(boss, angle)
        SetUnitAnimation(boss, "Attack")
        normal_sound("Sound\\Units\\Combat\\MetalLightSliceFlesh2", GetUnitXY(hero))
        QueueUnitAnimation(boss, "Stand")
        local x, y = GetUnitXY(hero)
        x, y = MoveXY(x, y, 1000, GetRandomInt(0, 360))
        local eff = AddSpecialEffect("LightOnly", x, y)
        local z = GetTerrainZ(x, y) + 80
        angle = AngleBetweenXY(x, y, GetUnitXY(hero)) / bj_DEGTORAD
        BlzSetSpecialEffectZ(eff, z)
        BlzSetSpecialEffectPitch(eff, math.rad(-90))
        BlzSetSpecialEffectYaw(eff, math.rad(-180 + angle))
        BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
        BlzSetSpecialEffectMatrixScale(eff, 1.5, 1.5, 5)
        TimerStart(CreateTimer(), 1, false, function()
            DamageInLine(x, y, angle - 180, 2000, boss)
            BlzSetSpecialEffectColor(eff, 255, 0, 0)
            TimerStart(CreateTimer(), 0.5, false, function()
                BlzSetSpecialEffectColor(eff, 255, 255, 255)
                DestroyEffect(eff)
            end)
        end)
        max = max - 1
        if max <= 0 then
            -- DestroyEffect(eff)
            DestroyTimer(t)
        end
    end)

    TimerStart(CreateTimer(), 4.5, false, function()

        Blink2Point(boss, GetUnitXY(hero))

    end)
end

function CreateBeemInRange(boss, count)
    local x, y = GetUnitXY(boss)
    local angle = 360 / count
    --CreateBeemLighting(boss)
    local element = {}
    local t = CreateTimer()
    SetUnitAnimation(boss, "Spell looping")
    for i = 1, count do
        local eff = AddSpecialEffect("LightOnly", x, y)
        local z = GetTerrainZ(x, y) + 80
        BlzSetSpecialEffectZ(eff, z)
        BlzSetSpecialEffectPitch(eff, math.rad(-90))
        BlzSetSpecialEffectYaw(eff, math.rad(-180 + angle * i))
        BlzPlaySpecialEffect(eff, ANIM_TYPE_STAND)
        BlzSetSpecialEffectMatrixScale(eff, 1.5, 1.5, 5)

        table.insert(element, eff)
        TimerStart(CreateTimer(), 4.5, false, function()
            DestroyEffect(eff)
            DestroyTimer(t)
        end)
    end
    local a = 0
    local r = 1
    if GetRandomInt(1, 2) == 1 then
        r = -1
    end
    local speed = 1 * r
    local damageTime = false
    TimerStart(CreateTimer(), 1, false, function()
        damageTime = true
        normal_sound("LaserSound3", x, y)
    end)
    TimerStart(t, TIMER_PERIOD, true, function()
        a = a + speed
        QueueUnitAnimation(boss, "Spell looping")

        for i = 1, #element do
            local angleCurrent = -180 + angle * i + a
            BlzSetSpecialEffectYaw(element[i], math.rad(angleCurrent))
            if damageTime then
                DamageInLine(nil, nil, angleCurrent, 2000, boss)
                BlzSetSpecialEffectColor(element[i], 255, 0, 0)
            end
            BlzSetSpecialEffectMatrixScale(element[i], 3, 3, 5)
        end
    end)

end

function DamageInLine(x, y, angle, distance, boss, step)
    if not step then
        step=80
    end
    local max = distance / step
    --print(max,"max")
    if not x then
        x, y = GetUnitXY(boss)
    end
    local isDamage = 0
    --BlzSetSpecialEffectYaw(eff, math.rad(angle))
    for i = 1, max do
        local nx, ny = MoveXY(x, y, step * i, angle - 180)
        --DestroyEffect(AddSpecialEffect("BlinkCasterNoOmni", nx, ny))
        local is, enemy = UnitDamageArea(boss, 50, nx, ny, step,nil,{"low"})
        --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", nx, ny))
        if is then
            DestroyEffect(AddSpecialEffect("AncestralGuardianMissileNoOmni", GetUnitXY(enemy)))
            isDamage = i * step
            --print(isDamage)
        end
    end
    return isDamage
end

function AnimeRangeAttack(boss, hero, max)
    local eff = nil
    local t = CreateTimer()

    TimerStart(t, 1, true, function()
        local angle = AngleBetweenUnits(boss, hero)
        SetUnitFacing(boss, angle)
        SetUnitAnimation(boss, "Attack")
        QueueUnitAnimation(boss, "Stand")
        normal_sound("PoisonArrowHit1", GetUnitXY(boss))
        eff = CreateAndForceBullet(boss, angle, 20, "BlastMissile")
        max = max - 1
        if max <= 0 then
            DestroyTimer(t)
        end
    end)

    TimerStart(CreateTimer(), 4.5, false, function()
        local xe, ye = BlzGetLocalSpecialEffectX(eff), BlzGetLocalSpecialEffectY(eff)
        Blink2Point(boss, xe, ye)
        SetUnitFacing(boss, AngleBetweenUnits(boss, hero))
    end)
end
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectButcher()
        end)
    end
end

function InitTrig_EnterInRectButcher()
    --print("  ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_EnterBoss)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            local boss = FindUnitOfType(FourCC('n007'))
            StartButcherAI(GetUnitXY(boss))
            DisableTrigger(gg_trg_EnterInRect)

        end
    end)
end

function StartButcherAI(xs, ys)
    --xs, ys = -12079, 8680 --  
    local boss = FindUnitOfType(FourCC('n007'))
    local BossFight = true
    local into = CreateBOSSHPBar(boss, "  ")

    local hpMark = { 100, 90, 80, 70, 60, 50, 40, 30, 20, 10 }
    local phaseCHK = {
        true,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
    }
    local HPMarkFH = {}
    for i = 1, #hpMark do
        --table.insert(phaseCHK, true)
        if i >= 2 then
            table.insert(HPMarkFH, CreateMarkOnBossBar(into, hpMark[i] - 1.5))
            --table.insert(phaseCHK, false)
        end
    end

    UnitAddAbility(boss, FourCC('Abun'))
    SetUnitOwner(boss, Player(10), true)
    local range = 8000
    ClearMapMusicBJ()
    PlayMusicBJ("The Chimerical Corridor")
    SetMusicVolumeBJ(100)
    --local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    --FogModifierStart(FW)

    local phase = 1--GetRandomInt(1, 1) -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    local OnSecondPhaseMove = 0
    local bulletCounter = 0
    local r = GetRandomInt(1, 3)

    TimerStart(CreateTimer(), 1, true, function()
        -- 
        --local bx, by = GetUnitXY(boss)
        GBoss = boss
        if not UnitAlive(boss) then
            --    
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            CreateVictoryElderBorder()
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)
            BlzFrameSetVisible(STAT, true)
            TimerStart(CreateTimer(), 15, false, function()
                CustomVictoryBJ(Player(0), true, true)
            end)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, range) then
                        --     
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then

                            local angle = AngleBetweenUnits(boss, hero)
                            SetUnitFacing(boss, angle)
                            --SetUnitAnimation(boss,"Attack")

                            YettyCouchHero(boss, hero, 3)
                            PlayBossSpeech("Speech\\Pudge\\InFight\\F1", ", ")
                            if phase == 1 then
                                --print("  ")

                            end
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)

                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Salve Springs")
                    SetMusicVolumeBJ(100)

                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            local hero = HERO[0].UnitHero
            --   
            sec = sec + 1
            if sec >= 5 then
                sec = 0
                phase = GetRandomInt(1, 1) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
            end
            -- print(" ",GetUnitLifePercent(boss))
            if GetUnitLifePercent(boss) <= hpMark[2] then
                phase = 2
                --print(" 1")
                if not phaseCHK[phase] then
                    --print(" 2")
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    phaseCHK[phase] = true
                    OnSecondPhaseMove = 0
                    --Blink2Point(boss, xs, ys)
                    --CreateBeemInRange(boss, 7)

                    --print("   ", phase, " ", sec)
                    sec = 0
                end
            end

            if GetUnitLifePercent(boss) <= hpMark[3] then
                phase = 3
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase, " ", sec)
                    sec = 0
                    --AnimeJumpToPoint(boss, true, GetUnitXY(hero))
                    phaseCHK[phase] = true
                end
            end

            if GetUnitLifePercent(boss) <= hpMark[4] then
                phase = 4
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --CreateAndMoveChakram(boss, hero, bulletCounter)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[5] then
                phase = 5
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --FlyAroundHero(boss, hero)

                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[6] then
                phase = 6
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --CreateAnimeLineDelay(boss, hero, 10)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[7] then
                phase = 7
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    --print("   ", phase)
                    --SunStrikeArea(boss, hero, xs, ys)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[8] then
                phase = 8
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[9] then
                phase = 9
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= hpMark[10] then
                phase = 10
                if not phaseCHK[phase] then
                    ButcherAddArmorTimed(boss, phase, 30 + phase * 2)
                    BlzFrameSetVisible(HPMarkFH[phase - 1], false)
                    phaseCHK[phase] = true
                end
            end

            --
            if phase == 1 and PhaseOn then
                PhaseOn = false
                --print(" 1,  ")
                BossHooked(boss, 5)

            end

            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.1)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                end
            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.2)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                end

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.3)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                end


            end
            if phase == 5 and PhaseOn then
                PhaseOn = false

                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.4)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                end


            end
            if phase == 6 and PhaseOn then
                PhaseOn = false
                --print("", phase)

                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.5)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                elseif rph == 6 then
                    BulletHellButcher(boss, GetRandomInt(1, 2))
                end

            end
            if phase == 7 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.6)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                elseif rph == 6 then
                    BulletHellButcher(boss, GetRandomInt(1, 2))
                elseif rph == 7 then
                    BossBlackHoleTimed(boss, 4)
                end
            end
            if phase == 8 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.7)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                elseif rph == 6 then
                    BulletHellButcher(boss, GetRandomInt(1, 2))
                elseif rph == 7 then
                    BossBlackHoleTimed(boss, 5)
                elseif rph == 8 then
                    FallenRoof(boss, 6)
                end
            end
            if phase == 9 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.8)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                elseif rph == 6 then
                    BulletHellButcher(boss, GetRandomInt(1, 2))
                elseif rph == 7 then
                    BossBlackHoleTimed(boss, 6)
                elseif rph == 8 then
                    FallenRoof(boss, 6)
                elseif rph == 9 then
                    ButcherRoundSpike(boss, 10)
                end
            end
            if phase == 10 and PhaseOn then
                PhaseOn = false
                local rph = GetRandomInt(1, phase)
                if rph == 1 then
                    BossHooked(boss, 5, 1.9)
                elseif rph == 2 then
                    ButcherThrowGround(boss, hero)
                elseif rph == 3 then
                    StrongWalk(boss, hero)
                elseif rph == 4 then
                    BossSpikeWave(boss, hero)
                elseif rph == 5 then
                    BossAxeThrow(boss, hero)
                elseif rph == 6 then
                    BulletHellButcher(boss, GetRandomInt(1, 2))
                elseif rph == 7 then
                    BossBlackHoleTimed(boss, 7)
                elseif rph == 8 then
                    FallenRoof(boss, 7)
                elseif rph == 9 then
                    ButcherRoundSpike(boss, 15)
                elseif rph == 10 then
                    BossHooked(boss, 5, 2)
                end
            end


        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("The Hollow Reef")
                SetUnitPositionSmooth(boss, xs, ys) --  
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
                phaseCHK = {
                    true,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                }
            end
        end--
    end)
end

function ButcherAddArmorTimed(boss, lvl, timed)
    --1  50 


    DestroyEffect(AddSpecialEffectTarget("Effect\\File00000341", boss, "chest")) -- 
    local x, y = GetUnitXY(boss)
    local _, _, _, units = UnitDamageArea(boss, 1, x, y, 500)

    for i = 1, #units do
        local angle = AngleBetweenUnits(boss, units[i])
        local dist = 500 - DistanceBetweenXY(x, y, GetUnitXY(units[i]))
        --BlzPauseUnitEx(units[i], true) --  
        --UnitAddJumpForce(units[i],angle,40,dist,250)
        local ab = AngleBetweenXY(x, y, GetUnitXY(units[i])) / bj_DEGTORAD
        UnitFallGround(units[i], ab, 200, { "Stun" })
    end

    UnitAddAbility(boss, FourCC("A002"))
    SetUnitAbilityLevel(boss, FourCC("A002"), lvl)
    TimerStart(CreateTimer(), timed, false, function()
        UnitRemoveAbility(boss, FourCC("A002"))
        UnitRemoveAbility(boss, FourCC("B000"))
    end)
end

function ButcherRoundSpike(boss, k)
    SetUnitAnimation(boss, "Spell Slam")
    local x, y = GetUnitXY(boss)
    local dist = 50
    if not k then
        k = 15
        --normal_sound("howl", x, y)
    end
    local n = 0
    TimerStart(CreateTimer(), 0.3, true, function()
        local angle = 360 / (15 + n)
        for i = 1, 15 + n do
            local nx, ny = MoveXY(x, y, dist, angle * i)
            --print("i",angle*i)
            local eff = AddSpecialEffect("MechaImpaleNoDust", nx, ny)
            BlzSetSpecialEffectYaw(eff, math.rad(GetRandomInt(0, 360))) --angle
            TimerStart(CreateTimer(), 0.3, false, function()
                UnitDamageArea(boss, 50, nx, ny, 80)
            end)
            TimerStart(CreateTimer(), 0.7, false, function()
                DestroyEffect(eff)
            end)
        end
        dist = dist + 70
        n = n + 3
        k = k - 1
        --print(k,"k")
        if k <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
    end)

end

function FallenRoof(boss, timed)

    SetUnitAnimation(boss, "Spell")
    --QueueUnitAnimation(boss, "Stand")
    local period = 0.08
    PlayBossSpeech("Speech\\Pudge\\InFight\\F2", " ")
    TimerStart(CreateTimer(), period, true, function()
        timed = timed - period
        if timed < 1 then
            DestroyTimer(GetExpiredTimer())
            QueueUnitAnimation(boss, "Stand")
        else
            QueueUnitAnimation(boss, "Spell")
            local x, y = GetUnitXY(boss)
            local range = GetRandomInt(300, 2500)
            local angle = GetRandomInt(0, 360)
            local nx, ny = MoveXY(x, y, range, angle)
            MarkAndFall(nx, ny, "ConcreteCliffFloorCenter", boss, 0.5)
        end
    end)
end

function BossBlackHoleTimed(boss, timed)
    StartBlackHole(boss, timed)
    udg_HoleIsWork = true
    SetUnitAnimationByIndex(boss, 12)
    QueueUnitAnimation(boss, "Stand")
    PlayBossSpeech("Speech\\Pudge\\InFight\\F3", "")
    TimerStart(CreateTimer(), 1, true, function()
        SetUnitAnimationByIndex(boss, 12)
        QueueUnitAnimation(boss, "Stand")
        timed = timed - 1
        if timed < 1 then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function BulletHellButcher(boss, r)
    local k = 3
    local x, y = GetUnitXY(boss)
    local r2Timer = CreateTimer()
    IssueImmediateOrder(boss, "stop")

    PlayBossSpeech("Speech\\Pudge\\InFight\\F4", "  ")

    TimerStart(CreateTimer(), 1, true, function()
        SetUnitAnimationByIndex(boss, 12)
        QueueUnitAnimation(boss, "Stand")
        k = k - 1
        if k < 1 then
            DestroyTimer(GetExpiredTimer())
            DestroyTimer(r2Timer)
        end
        if r == 1 then
            local count = 24
            local angle = 360 / count
            local ra = k * 25
            for i = 1, count do
                local eff = CreateAndForceBullet(boss, ra + (angle * i), 15, "Butcher\\Axe Missile")
                BlzSetSpecialEffectZ(eff, GetTerrainZ(x, y) + 100)
                BlzSetSpecialEffectScale(eff, 2)
            end
        elseif r == 2 then
            TimerStart(r2Timer, TIMER_PERIOD * 2, true, function()
                local eff = CreateAndForceBullet(boss, GetRandomInt(1, 360), 15, "Butcher\\Axe Missile")
                BlzSetSpecialEffectZ(eff, GetTerrainZ(x, y) + 100)
                BlzSetSpecialEffectScale(eff, 2)
            end)

        end
    end)
end

function BossAxeThrow(boss, hero)
    local k = 3
    TimerStart(CreateTimer(), 1.1, true, function()
        if k == 3 then
            PlayBossSpeech("Speech\\Pudge\\InFight\\F5", "")
        end
        if k == 2 then
            PlayBossSpeech("Speech\\Pudge\\InFight\\F6", "")
        end
        if k == 1 then
            PlayBossSpeech("Speech\\Pudge\\InFight\\F7", "")
        end
        k = k - 1
        if k < 1 then
            DestroyTimer(GetExpiredTimer())
        end
        IssueImmediateOrder(boss, "stop")
        SetUnitAnimationByIndex(boss, 13)
        QueueUnitAnimation(boss, "Stand")
        local angle = AngleBetweenUnits(boss, hero)
        SetUnitFacing(boss, angle)
        TimerStart(CreateTimer(), 0.4, false, function()
            angle = AngleBetweenUnits(boss, hero)
            local x, y = GetUnitXY(boss)
            BlzSetUnitFacingEx(boss, angle)
            local eff = CreateAndForceBullet(boss, angle, 40, "Butcher\\Axe Missile", x, y, 50, 1800, 15)
            BlzSetSpecialEffectZ(eff, GetTerrainZ(x, y) + 120)
            BlzSetSpecialEffectScale(eff, 3)
        end)
    end)
end

function BossSpikeWave(boss, hero)
    local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
    local angle = AngleBetweenUnits(boss, hero)
    BlzSetSpecialEffectScale(eff, 2)
    BlzSetSpecialEffectYaw(eff, math.rad(angle))
    IssueImmediateOrder(boss, "stop")
    SetUnitAnimation(boss, "Attack Slam")
    QueueUnitAnimation(boss, "Stand")
    TimerStart(CreateTimer(), 1.5, false, function()
        PlayBossSpeech("Speech\\Pudge\\InFight\\F8", " !")
        DestroyEffect(eff)
        local x, y = GetUnitXY(boss)
        local maxDist = 1800
        CreateSpikeInLine(angle, maxDist, x, y)
        local nx, ny = MoveXY(x, y, 128, 90)
        CreateSpikeInLine(angle, maxDist, nx, ny)
        nx, ny = MoveXY(x, y, 128, -90)
        CreateSpikeInLine(angle, maxDist, nx, ny)
    end)
end

function CreateSpikeInLine(angle, dist, x, y)
    local currentDist = 0
    local speed = 128
    TimerStart(CreateTimer(), TIMER_PERIOD * 2, true, function()
        local nx, ny = MoveXY(x, y, currentDist, angle)
        local id = FourCC("h00G")
        local tmp = CreateUnit(Player(2), id, nx, ny, angle)
        CreateSpikeTrap(tmp, 20)
        currentDist = currentDist + speed
        if currentDist >= dist then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function ButcherThrowGround(boss, hero)
    IssuePointOrder(boss, "move", GetUnitXY(hero))
    TimerStart(CreateTimer(), 1, false, function()
        IssueImmediateOrder(boss, "stop")
        --SetUnitAnimation(boss,"Attack Slam")
        SetUnitAnimationByIndex(boss, 4)
        QueueUnitAnimation(boss, "Stand")
        local x, y = GetUnitXY(boss)
        local nx, ny = MoveXY(x, y, 500, GetUnitFacing(boss) - 15)
        local mark = AddSpecialEffect("Spell Marker TC", nx, ny)
        BlzSetSpecialEffectScale(mark, 2)
        DestroyEffect(mark)
        TimerStart(CreateTimer(), 0.45, false, function()
            nx, ny = MoveXY(x, y, 500, GetUnitFacing(boss) - 15)
            DestroyEffect(AddSpecialEffect("Earthshock", nx, ny))
            DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", nx, ny))
            local _, du = UnitDamageArea(boss, 50, nx, ny, 220)
            DamageDestructableInRangeXY(boss, 50, 220, x, y)

            if IsUnitInRangeXY(hero, nx, ny, 250) then
                local ab = AngleBetweenXY(nx, ny, GetUnitXY(hero)) / bj_DEGTORAD
                UnitFallGround(hero, ab, 250, { "Stun" })
            end

            if du then
                PlayBossSpeech("Speech\\Pudge\\InFight\\F9", "")
            else
                PlayBossSpeech("Speech\\Pudge\\InFight\\F10", "")
            end
            DownFloorInTimedXY(120, nx, ny)
        end)
    end)
end

function FindFloorInPoint(x, y)
    local range = 128
    SetRect(GlobalRect, x - range, y - range, x + range, y + range)
    local res = nil
    EnumDestructablesInRect(GlobalRect, nil, function()
        local d = GetEnumDestructable()
        if GetDestructableTypeId(d) == FourCC("B00G") then
            res = d
        end
    end)
    return res
end

function StrongWalk(boss, hero)
    IssuePointOrder(boss, "move", GetUnitXY(hero))
    local sec = 5
    local period = GetRandomReal(0.8, 1.1)
    PlayBossSpeech("Speech\\Pudge\\InFight\\F11", " ")
    if IsUnitInRange(boss, hero, 1500) then
        TimerStart(CreateTimer(), period, true, function()
            sec = sec - period
            if sec <= 0 or not UnitAlive(boss) then
                DestroyTimer(GetExpiredTimer())
            end
            --Earthshock
            local x, y = GetUnitXY(boss)
            DestroyEffect(AddSpecialEffect("Earthshock", x, y))
            UnitDamageArea(boss, 50, x, y, 300)
            DamageDestructableInRangeXY(boss, 50, 300, x, y)
        end)
    end
end

function BossHooked(boss, timed, scale)
    StartHookAI(boss, timed, scale)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 02.05.2020 2:43
---
--stoneEffModel = "Abilities\\Weapons\\RockBoltMissile\\RockBoltMissile"
--Special = "Abilities\\Weapons\\ProcMissile\\ProcMissile"
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectBDragon()
        end)
    end
end

function InitTrig_EnterInRectBDragon()

    -- print("  ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_InitStartDragon)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            local boss = FindUnitOfType(FourCC('n001'))
            --StartDragonAI(GetUnitXY(boss))
            CustomCinematicMode(true)
            local s = normal_sound("Hlop", GetUnitXY(boss))
            TimerStart(CreateTimer(), 8, false, function()
                SetSoundVolume(s, 0)
            end)
            DisableTrigger(gg_trg_EnterInRect)
        end
    end)
end
dragonFrazeCount = 1
tFraze = {
    "",
    "    ??",
    "     ,    ",
    "    ,       ",
    " , ,     ,  ,     ",
    "   ,       ",
    "        ",
    "     ,   ,         ",
    ",      ,       ",
    "   ,    ,      ",
    "        ,        ",
    "       , ,  ",
    "   ,     -,      ",
    "-   ,   ?"
}
function StartDragonAI(xs, ys)
    local boss = FindUnitOfType(FourCC('n001'))
    local BossFight = true
    local into = CreateBOSSHPBar(boss, "  ")
    AuraDestroyableON(boss)
    UnitAddAbility(boss, FourCC('Abun'))
    SetUnitPosition(boss, xs, ys)
    SetUnitOwner(boss, Player(10), true)
    local range = 1000
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("A Wizard's Worst Nightmare")
    SetMusicVolumeBJ(100)
    local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    FogModifierStart(FW)

    local phase = 3 -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    TimerStart(CreateTimer(), 1, true, function()
        -- 
        GBoss = boss
        local bx, by = GetUnitXY(boss)

        if not UnitAlive(boss) then
            --   
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            TimerStart(CreateTimer(), 3, false, function()
                PlayMonoSpeech("Speech\\Peon\\Dragon\\vpeshereuavidelportal", "    , ,   ?")
            end)
            CreateVictoryElderBorder()
            ClearMapMusicBJ()
            PlayMusicBJ("Endless Snowbanks")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, 2000) then
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)
                            local angle = AngleBetweenUnits(boss, hero)
                            SetUnitFacing(boss, angle)
                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end
                if k > 0 and not BossFight then
                    print("  ") --   
                    BlzFrameSetVisible(into, true)
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Endless Snowbanks")
                    SetMusicVolumeBJ(100)
                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            --   
            sec = sec + 1

            local max = #tFraze[dragonFrazeCount] // 10
            if dragonFrazeCount >= #tFraze then
                --print(" ")
                max = 5
            end

            if max < 5 then
                max = 5
            end
            --print(max)
            if sec >= max then
                sec = 0
                phase = GetRandomInt(1, 4) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
                --print(#tFraze,dragonFrazeCount)
                if dragonFrazeCount + 1 <= #tFraze then
                    --print(tFraze[dragonFrazeCount+1], " ",dragonFrazeCount+1)
                    --normal_sound("Speech\\Dragon\\"..dragonFrazeCount+1,GetUnitXY(boss))
                    if dragonFrazeCount == 1 then
                        --print("  ?", dragonFrazeCount)
                        PlayMonoSpeech("Speech\\Peon\\Dragon\\tiykral", "   !,   -    ")
                        TimerStart(CreateTimer(), 5, false, function()
                            PlayBossSpeech("Speech\\Dragon\\" .. dragonFrazeCount + 1, tFraze[dragonFrazeCount + 1])
                        end)
                    else
                        --print(" ",dragonFrazeCount)
                        PlayBossSpeech("Speech\\Dragon\\" .. dragonFrazeCount + 1, tFraze[dragonFrazeCount + 1])
                    end
                    dragonFrazeCount = dragonFrazeCount + 1
                    TimerStart(CreateTimer(), 7, false, function()
                        --print(" ",dragonFrazeCount,GBossSoundDuration+3)
                        if dragonFrazeCount == 3 then
                            --PlayMonoSpeech("Speech\\Peon\\Dragon\\tiykral", "   !,   -    ")
                        elseif dragonFrazeCount == 5 then
                            PlayMonoSpeech("Speech\\Peon\\Dragon\\tochemtizanimalsa", ",   ,  ")
                        elseif dragonFrazeCount == 6 then
                            PlayMonoSpeech("Speech\\Peon\\Dragon\\ksozhaleniy", " ,   ")
                        elseif dragonFrazeCount == 9 then
                            PlayMonoSpeech("Speech\\Peon\\Dragon\\yztebetydasnezhkov", "     ")
                        elseif dragonFrazeCount == 11 then
                            PlayMonoSpeech("Speech\\Peon\\Dragon\\nesmeytrogat", "    !")
                        end

                    end)
                else
                    --print("      ")
                    local r = GetRandomInt(1, 5)
                    if r == 1 then
                        PlayBossSpeech("Speech\\Dragon\\Super", "      ")
                    end
                    --print(",     ?")
                end
            end
            --
            local hero = HERO[0].UnitHero
            if phase == 1 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                --print("   ")

                --local hero = HERO[0].UnitHero
                local angle = AngleBetweenUnits(boss, hero)
                IceImpale(boss, angle, false)
                TimerStart(CreateTimer(), 2, true, function()
                    -- 
                    --EttiDashAttackPrepare(boss, hero)

                    if phase ~= 1 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        angle = AngleBetweenUnits(boss, hero)
                        IceImpale(boss, angle, false)
                    end
                end)

            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                DragonDashAttackPrepare(boss, HERO[0].UnitHero)

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                DragonTripleShot(boss, hero)

            end
            if phase == 5 and PhaseOn then
                PhaseOn = false
                --print("", phase)

            end
            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                --print(" ")
                if GetRandomInt(1, 2) == 1 then
                    IceCrest(boss)
                else
                    MissileSpamInRandomPoint(boss,hero)
                end
            end

        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("A Wizard's Worst Nightmare")
                SetUnitPositionSmooth(boss, xs, ys)
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
            end
        end--
    end)
end

function MissileSpamInRandomPoint(boss,hero)
    local period=0.1
    local sec=0
    TimerStart(CreateTimer(), period, true, function()
        sec=sec+period

        local ra=GetRandomInt(1,360)
        local dist=GetRandomInt(250,1500)
        local speed = dist / 80
        local x, y = MoveXY(GetUnitX(boss), GetUnitY(boss), dist, ra)
        local mark = AddSpecialEffect("Spell Marker TC", x, y)
        SetUnitAnimation(boss, "attack")
        SetUnitFacing(boss,ra)
        UnitCreateArtMissile(boss, ra, speed, dist, 300, nil, "FrostWyrmMissileNoOmni",mark)
        if sec>=6 then
            DestroyTimer(GetExpiredTimer())
            IssuePointOrder(boss, "move", GetUnitXY(hero))
        end
    end)
end


function DragonDashAttackPrepare(boss, hero)
    if UnitAlive(boss) then
        local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
        local angle = AngleBetweenUnits(boss, hero)
        local k = GetUnitLifePercent(boss) / 100
        k = 1 - k
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        TimerStart(CreateTimer(), 1.5, false, function()
            DestroyEffect(eff)
        end)
        TimerStart(CreateTimer(), 1.2 - k, false, function()

            --print("")
            UnitAddForceSimple(boss, angle, 20 + 20 * k, 1000, "RunEtti")
            FallAfterRunDragon(boss)
            BlzPauseUnitEx(boss, true)
            --local r=GetRandomInt(0,8)
            --print(r)
            SetUnitAnimationByIndex(boss, 2)
            SetUnitTimeScale(boss, 3)
            BlzSetUnitFacingEx(boss, angle)
        end)
    end
end

function FallAfterRunDragon(boss)
    local x, y = GetUnitXY(boss)
    MarkAndFall(x, y, "Icicle", boss)
    local max = 7
    TimerStart(CreateTimer(), 0.1, true, function()
        max = max - 1
        x, y = MoveXY(x, y, 160, GetUnitFacing(boss))
        MarkAndFall(x, y, "Icicle", boss)
        if max <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function IceCrest(boss)
    BlzPauseUnitEx(boss, true)
    SetUnitTimeScale(boss, 0.3)
    SetUnitAnimation(boss, "Spell Slam")
    for i = 1, 4 do
        local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
        local angle = GetUnitFacing(boss)
        if i == 2 then
            angle = angle - 180
        elseif i == 3 then
            angle = angle - 90
        elseif i == 4 then
            angle = angle + 90
        end
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        TimerStart(CreateTimer(), 2, false, function()
            DestroyEffect(eff)
            IceImpale(boss, angle, true)
            IceImpale(boss, angle - 180, true)
            IceImpale(boss, angle + 90, true)
            IceImpale(boss, angle - 90, true)
            DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", GetUnitXY(boss)))
        end)
        TimerStart(CreateTimer(), 3, false, function()
            IssuePointOrder(boss, "move", GetUnitXY(HERO[0].UnitHero))
        end)
    end

    TimerStart(CreateTimer(), 2, false, function()
        BlzPauseUnitEx(boss, false)
        SetUnitTimeScale(boss, 1)
    end)
end

function IceImpale(boss, angle, notMove)
    local x, y = GetUnitXY(boss)
    BlzPauseUnitEx(boss, true)
    local r = GetRandomInt(1, 2)
    SetUnitAnimation(boss, "Spell Slam")
    SetUnitFacing(boss, angle)
    local hero = HERO[0].UnitHero
    local k = 0
    local step = 50
    local max = 26
    local range = 80
    local rangeAuto = 100 --    
    if notMove then
        step = 180
        max = 6
        range = 250
    end
    TimerStart(CreateTimer(), 0.7, false, function()
        BlzPauseUnitEx(boss, false)
        DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", GetUnitXY(boss)))
        TimerStart(CreateTimer(), 0.05, true, function()
            k = k + 1
            if IsUnitInRangeXY(hero, x, y, rangeAuto) and not notMove then
                angle = AngleBetweenXY(x, y, GetUnitXY(hero)) / bj_DEGTORAD
            end
            x, y = MoveXY(x, y, step, angle)
            local _, enemy = UnitDamageArea(boss, 10, x, y, range)
            CreateSpikeFromDeep(x, y, notMove)
            if k > max or enemy then
                local nd = CreateDestructableZ(FourCC("B006"), x, y, 900, GetRandomInt(0, 360), 2.5, 1)
                TimerStart(CreateTimer(), 10, false, function()
                    KillDestructable(nd)
                end)
                DestroyTimer(GetExpiredTimer())
                if not notMove then
                    -- IssuePointOrder(boss, "move", GetUnitXY(hero))
                end
            end
        end)

    end)
end

function DragonTripleShot(boss, hero)
    local angle = AngleBetweenUnits(boss, hero)
    SetUnitFacing(boss, angle)
    local max = 3
    BlzPauseUnitEx(boss, true)
    local effModel = "FrostWyrmMissileNoOmni"
    TimerStart(CreateTimer(), 0.5, true, function()
        max = max - 1
        SetUnitTimeScale(boss, 4)
        SetUnitAnimation(boss, "attack")
        CreateAndForceBullet(boss, GetUnitFacing(boss) - 30, 20, effModel)
        CreateAndForceBullet(boss, GetUnitFacing(boss), 20, effModel)
        CreateAndForceBullet(boss, GetUnitFacing(boss) + 30, 20, effModel)

        if max <= 0 then
            SetUnitTimeScale(boss, 1)
            DestroyTimer(GetExpiredTimer())
            angle = AngleBetweenUnits(boss, hero)
            SetUnitFacing(boss, angle)

            TimerStart(CreateTimer(), 0.3, false, function()
                CreateAndForceBullet(boss, GetUnitFacing(boss) - 30, 15, effModel)
                CreateAndForceBullet(boss, GetUnitFacing(boss) - 15, 15, effModel)
                CreateAndForceBullet(boss, GetUnitFacing(boss), 15, effModel)
                CreateAndForceBullet(boss, GetUnitFacing(boss) + 30, 15, effModel)
                CreateAndForceBullet(boss, GetUnitFacing(boss) + 15, 15, effModel)
                BlzPauseUnitEx(boss, false)
                --IceImpale(boss, AngleBetweenUnits(boss,hero), true)
            end)
        end
    end)
end

function CreateSpikeFromDeep(x, y, notMove)
    --print(GetTerrainZ(x, y))
    local size = GetRandomReal(0.8, 1.1)
    local id = FourCC('B001')
    if notMove then
        size = GetRandomReal(2.5, 3.1)
        id = FourCC("B006")
    end
    if not IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY) then
        local nd = CreateDestructableZ(id, x, y, 900, GetRandomInt(0, 360), size, 1)
        TimerStart(CreateTimer(), 20, false, function()
            KillDestructable(nd)
        end)
    end
end

function AuraDestroyableON(boss)
    --    
    TimerStart(CreateTimer(), 1, true, function()
        local x, y = GetUnitXY(boss)
        local range = 300
        SetRect(GlobalRect, x - range, y - range, x + range, y + range)
        EnumDestructablesInRect(GlobalRect, nil, function()
            local d = GetEnumDestructable()
            if GetDestructableTypeId(d) == FourCC("B001") or GetDestructableTypeId(d) == FourCC("B006") then
                KillDestructable(d)
            end
        end)
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 02.04.2023 16:47
---
function StartPeonAllyAI()
    local unit = FindUnitOfType(FourCC('o002'))
    local hero = HERO[0].UnitHero

    --print(" ")
    local reactSpeed = 1
    BlzSetUnitMaxHP(unit, 5000)
    HealUnit(unit)
    UnitAddAbility(unit, FourCC("Abun"))
    TimerStart(CreateTimer(), 1, true, function()
        local xh, yh = GetUnitXY(hero)
        local boss = FindFirstEnemy(unit,2000)
        if boss then
            if not IsUnitInRange(unit, hero, 800) then
                IssuePointOrder(unit, "move", xh, yh)

            else
                if IsUnitInRange(unit, boss, 1500)  and UnitAlive(boss) and UnitAlive(unit)  then
                    SetUnitFacingToFaceUnitTimed(unit, boss, 0)
                    --print(" ")

                    AllyAttackBoss(unit)

                    IssueImmediateOrder(unit, "stop")
                end
            end
        end

        if AllyPeonCanTP then
            if not IsUnitInRange(unit, hero, 2000) then
                Blink2Point(unit,GetUnitXY(hero))
            end
        end
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
            PlayMonoSpeech("Speech\\Peon\\yabessmertniy", "  ,   ")
        end
    end)
    --

    local DamageTrigger = CreateTrigger()
    TriggerRegisterUnitEvent(DamageTrigger, unit, EVENT_UNIT_DAMAGED) --   
    DestroyEffect(AddSpecialEffectTarget("Effect\\Concecration", unit, "chest"))
    TriggerAddAction(DamageTrigger, function()
       -- print(" !")
        DisableTrigger(DamageTrigger)
        local angle = GetRandomInt(0, 360)
        UnitAddJumpForce(unit, angle, 40, 300, 500, false)
        SetUnitInvulnerable(unit, true)
        TimerStart(CreateTimer(), 1, false, function()
            SetUnitInvulnerable(unit, false)
            EnableTrigger(DamageTrigger)
        end)
    end)
end

function AllyAttackBoss(unit, boss)
    SetUnitAnimation(unit, "Attack")
    TimerStart(CreateTimer(), 0.2, false, function()
        if not BlzIsUnitInvulnerable(unit) then
            local angle = GetUnitFacing(unit)
            CreateAndForceBullet(unit, angle, 40, "Melee")
            QueueUnitAnimation(unit,"stand")
        end
    end)

end

function FindNearEnemyXY(unit,range,x,y)
    local e = nil
    local result = nil
    local min=1000
    GroupEnumUnitsInRange(perebor, x, y, range, nil)
    while true do
        e = FirstOfGroup(perebor)
        if e == nil then
            break
        end

        if UnitAlive(e) and  not BlzIsUnitInvulnerable(e) and e~=unit then -- IsUnitEnemy(e, GetOwningPlayer(unit)) and --     
            local dist=DistanceBetweenXY(x,y,GetUnitXY(e))
            if dist<=min then
                min=dist
                result = e
            end
            --print("",GetUnitName(e))
        end
        GroupRemoveUnit(perebor, e)
    end
    return result
end

function FindFirstEnemy(unit, range)
    local e = nil
    local result = nil
    local xs, ys = GetUnitXY(unit)
    -- DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", xs, ys))
    GroupEnumUnitsInRange(perebor, xs, ys, range, nil)
    while true do
        e = FirstOfGroup(perebor)
        if e == nil then
            break
        end

        if UnitAlive(e) and IsUnitEnemy(e, GetOwningPlayer(unit)) and not BlzIsUnitInvulnerable(e) then
            --print("  ",GetUnitName(e))
            result = e
        end
        GroupRemoveUnit(perebor, e)
    end
    return result
end
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectWivern()
        end)
    end
end

function InitTrig_EnterInRectWivern()

    --print("  ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_EnterWivern)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            --print("12")
            local boss = FindUnitOfType(FourCC('u000'))

            StartWivernAI(GetUnitXY(boss))
            DisableTrigger(gg_trg_EnterInRect)
            local enterTrig = CreateTrigger()
            TriggerRegisterUnitInRange(enterTrig, boss, 200, nil)
            TriggerAddAction(enterTrig, function()
                local entering = GetTriggerUnit()
                --print(GetUnitName(entering))

                if GetUnitTypeId(entering) == FourCC("h006") then
                    -- 
                    if GetUnitUserData(entering) ~= 1 then
                        SetUnitUserData(entering, 1)
                        AddUnitAnimationProperties(entering, "alternate", false)


                        local r=GetRandomInt(1,3)
                        if r==1 then
                            PlayBossSpeech("Speech\\Wyvern\\".."1","   ")
                        elseif r==2 then
                            PlayBossSpeech("Speech\\Wyvern\\".."2"," , ")
                        elseif r==3 then
                            PlayBossSpeech("Speech\\Wyvern\\".."3","")
                        end

                        TimerStart(CreateTimer(), 10, false, function()
                            AddUnitAnimationProperties(entering, "alternate", true)
                            SetUnitUserData(entering, 0)
                            BirthFromEgg(entering)
                            r=GetRandomInt(1,3)
                            if r==1 then
                                PlayBossSpeech("Speech\\Wyvern\\".."4"," ,  !")
                            elseif r==2 then
                                PlayBossSpeech("Speech\\Wyvern\\".."5","  ,    ")
                            elseif r==2 then
                                PlayBossSpeech("Speech\\Wyvern\\".."6","    ,  ")
                            end
                        end)
                    end
                end
            end)

        end
    end)
end


function StartWivernAI(xs, ys)
    local boss = FindUnitOfType(FourCC('u000'))
    local BossFight = true
    local into = CreateBOSSHPBar(boss, "")
    CreateMarkOnBossBar(into, 80)
    --CreateMarkOnBossBar(into,60)
    CreateMarkOnBossBar(into, 40)
    CreateMarkOnBossBar(into, 20)
    local phaseCHK = {
        true,
        false,
        false,
        false,
        false
    }
    UnitAddAbility(boss, FourCC('Abun'))
    --SetUnitPosition(boss, xs, ys)
    SetUnitOwner(boss, Player(10), true)
    local range = 2500
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("The Hollow Reef")
    SetMusicVolumeBJ(100)
    --local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    --FogModifierStart(FW)

    local phase = 1--GetRandomInt(1, 1) -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    local OnSecondPhaseMove = 0

    local r=GetRandomInt(1,3)
    if r==1 then
        PlayBossSpeech("Speech\\Wyvern\\".."7","   ?!")
    elseif r==2 then
        PlayBossSpeech("Speech\\Wyvern\\".."8","      ")
    elseif r==3 then
        PlayBossSpeech("Speech\\Wyvern\\".."9",", !")
    end

    TimerStart(CreateTimer(), 1, true, function()
        -- 
        local bx, by = GetUnitXY(boss)
        GBoss=boss
        if not UnitAlive(boss) then
            --   
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            QuestSetCompletedBJ(udg_QWiverna, true)
            CreateVictoryElderBorder()
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, range) then
                        --     
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then
                            if phase == 1 then
                                --print("  ")

                            end
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)

                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Salve Springs")
                    SetMusicVolumeBJ(100)
                    r=GetRandomInt(1,3)
                    if r==1 then
                        PlayBossSpeech("Speech\\Wyvern\\".."10","!")
                    elseif r==2 then
                        PlayBossSpeech("Speech\\Wyvern\\".."11"," ?")
                    elseif r==3 then
                        PlayBossSpeech("Speech\\Wyvern\\".."12"," ,  ")
                    end
                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            --   
            sec = sec + 1
            if sec >= 5 then
                sec = 0
                phase = GetRandomInt(1, 1) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
            end

            if GetUnitLifePercent(boss) <= 80 then
                phase = 2
                if not phaseCHK[phase] then
                    phaseCHK[phase] = true
                    OnSecondPhaseMove = 0
                    local r=GetRandomInt(1,4)
                    if r==1 then
                        PlayBossSpeech("Speech\\Wyvern\\".."13",",       ")
                    elseif r==2 then
                        PlayBossSpeech("Speech\\Wyvern\\".."14",",      ,      ,    ")
                    elseif r==3 then
                        PlayBossSpeech("Speech\\Wyvern\\".."15","  ,      !")
                    elseif r==4 then

                    end



                    -- print("   ", phase)
                end
            end
            if GetUnitLifePercent(boss) <= 40 then
                phase = 3
                if not phaseCHK[phase] then
                    --print("   ", phase)
                    PlayBossSpeech("Speech\\Wyvern\\".."16"," ,   ")
                    PlayBossSpeech("Speech\\Wyvern\\".."17","  ,   ")
                    phaseCHK[phase] = true
                end
            end
            if GetUnitLifePercent(boss) <= 20 then
                phase = 4
                if not phaseCHK[phase] then
                    --print("   ", phase)
                    PlayBossSpeech("Speech\\Wyvern\\".."18","   ")
                    PlayBossSpeech("Speech\\Wyvern\\".."19","   ,      ")
                    PlayBossSpeech("Speech\\Wyvern\\".."20"," ,     ? ,  !")
                    phaseCHK[phase] = true
                end
            end

            --
            local hero = HERO[0].UnitHero
            if phase == 1 and PhaseOn then
                PhaseOn = false
                -- print("", phase)
                FlyOverPlayerWMark(boss, hero)

            end

            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                OnSecondPhaseMove = OnSecondPhaseMove + 1
                if OnSecondPhaseMove > 3 then
                    OnSecondPhaseMove = 0
                    FlyOverPlayerWMark(boss, hero)
                else
                    CreateCircleIce(boss, hero)
                end

            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                LineFastAttack(boss, hero)

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                local r = GetRandomInt(1, 3)
                if r == 1 then
                    FlyOverPlayerWMark(boss, hero)
                elseif r == 2 then
                    CreateCircleIce(boss, hero)
                elseif r == 3 then
                    LineFastAttack(boss, hero)
                end
                -- print("", phase)

            end
            if phase == 5 and PhaseOn then
                PhaseOn = false
                print("", phase)

            end
            if phase == 6 and PhaseOn then
                PhaseOn = false
                print("", phase)


            end
            if phase == 7 and PhaseOn then
                PhaseOn = false
                print("", phase)

            end


        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("The Hollow Reef")
                SetUnitPositionSmooth(boss, xs, ys) --  
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
                phaseCHK = {
                    true,
                    false,
                    false,
                    false,
                    false
                }
            end
        end--
    end)
end

function LineFastAttack(boss, hero)

    local r = GetRandomInt(1, 10)
    if r==1 then
        PlayBossSpeech("Speech\\Wyvern\\".."21","  !")
    elseif r==2 then
        PlayBossSpeech("Speech\\Wyvern\\".."22","  ")
    elseif r==3 then
        PlayBossSpeech("Speech\\Wyvern\\".."23","   ,     ")
    end

    local effModel = "FrostWyrmMissileNoOmni"
    SetUnitFacingToFaceUnitTimed(boss, hero, 0.1)
    local delay = 2.5
    TimerStart(CreateTimer(), 0.15, true, function()
        SetUnitTimeScale(boss, 4)
        local x, y = GetUnitXY(boss)
        QueueUnitAnimation(boss, "Attack")
        SetUnitFacingToFaceUnitTimed(boss, hero, 0.1)
        local nx, ny = MoveXY(x, y, 150, GetUnitFacing(boss))
        CreateAndForceBullet(boss, GetUnitFacing(boss), 30, effModel, nx, ny, 50, 2000)
        delay = delay - 0.15
        if delay <= 0 then
            DestroyTimer(GetExpiredTimer())
            ResetUnitAnimation(boss)
            SetUnitTimeScale(boss, 1)
            --print("end ")
            WolfIceDash(boss, GetUnitXY(hero))
            local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
            local angle = AngleBetweenUnits(boss, hero)
            SetUnitFacing(boss, angle)
            BlzSetSpecialEffectYaw(eff, math.rad(angle))

            TimerStart(CreateTimer(), 1, false, function()
                DestroyEffect(eff)
                BlzSetSpecialEffectPosition(eff, 0, 0, 0)
            end)
        end
    end)
end

function CreateCircleIce(boss, hero)
    local r = GetRandomInt(1, 10)
    if r==1 then
        PlayBossSpeech("Speech\\Wyvern\\".."24"," ,  ")
    elseif r==2 then
        PlayBossSpeech("Speech\\Wyvern\\".."25","    ")
    elseif r==3 then
        PlayBossSpeech("Speech\\Wyvern\\".."26",",  ")
    elseif r==4 then
        PlayBossSpeech("Speech\\Wyvern\\".."27","   ")
    end


    SetUnitAnimation(boss, "Attack")
    SetUnitFacingToFaceUnitTimed(boss, hero, 0.1)
    local mark = AddSpecialEffect("Spell Marker TC", GetUnitXY(hero))
    BlzSetSpecialEffectScale(mark, 4)
    local delay = 2
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        QueueUnitAnimation(boss, "Attack")
        local x, y = GetUnitXY(hero)
        BlzSetSpecialEffectX(mark, x)
        BlzSetSpecialEffectY(mark, y)
        delay = delay - TIMER_PERIOD64
        if delay <= 0 then
            DestroyTimer(GetExpiredTimer())
            ResetUnitAnimation(boss)
            MarkAndFall(x, y, "Icicle", boss, 0.01)

            TimerStart(CreateTimer(), 1, false, function()
                DestroyEffect(mark)
            end)
            local max = 16
            local angle = 360 / max
            local r = GetRandomInt(0, max)
            for i = 1, max do
                local nx, ny = MoveXY(x, y, 400, angle * i)
                if i ~= r then
                    MarkAndFall(nx, ny, "Icicle", boss, 0.01)
                else
                   -- print("?")
                    local mark2 = AddSpecialEffect("Spell Marker TC", nx, ny)

                    BlzSetSpecialEffectColorByPlayer(mark2,Player(1))
                    TimerStart(CreateTimer(), 1, false, function()
                        DestroyEffect(mark2)
                        BlzSetSpecialEffectPosition(mark2, 5000, 5000, 0)

                    end)
                end
            end
        end
    end)
end

function BirthFromEgg(egg)
    local x, y = GetUnitXY(egg)
    --local hero=HERO[0].UnitHero
    local r=GetRandomInt(1,5)
    for i = 1, r do
        local new = CreateUnit(GetOwningPlayer(egg), FourCC("n009"), x, y, GetRandomInt(0, 360))
        DestroyEffect(AddSpecialEffect("CrystalNova", GetUnitXY(new)))
        UnitApplyTimedLife(new, FourCC('BTLF'), 30)
    end
end

function FlyOverPlayerWMark(boss, hero)

    local r = GetRandomInt(1, 10)
    if r==1 then
        PlayBossSpeech("Speech\\Wyvern\\".."28",",  ")
    elseif r==2 then
        PlayBossSpeech("Speech\\Wyvern\\".."29","     ")
    elseif r==3 then
        PlayBossSpeech("Speech\\Wyvern\\".."30","    ")
    end


    SetUnitMoveSpeed(boss, 522)
    local x, y = GetUnitXY(boss)
    local angle = AngleBetweenUnits(boss, hero)
    local xEnd, yEnd = MoveXY(x, y, 1900, angle)
    IssuePointOrder(boss, "move", xEnd, yEnd)
    local delay = 4
    local period = 0.2
    TimerStart(CreateTimer(), period, true, function()
        delay = delay - period
        if delay <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
        x, y = GetUnitXY(boss)
        local mark = AddSpecialEffect("Spell Marker TC", x, y)
        BlzSetSpecialEffectColorByPlayer(mark, Player(0)) -- 
        BlzSetSpecialEffectScale(mark, 2)

        TimerStart(CreateTimer(), 0.4, false, function()
            DestroyEffect(mark)
            --DestroyEffect(AddSpecialEffect("CrystalNova", x, y))
            UnitDamageArea(boss, 50, x, y, 220)
        end)
    end)
end
--[[do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectWolf()
        end)
    end
end

function InitTrig_EnterInRectWolf()

    --print("  ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_EnterWolf)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            --print("12")
            local boss = FindUnitOfType(FourCC('n002'))
            gbxWolf, gbyWolf = GetUnitXY(boss)
            StartWolfAI(GetUnitXY(boss))
            DisableTrigger(gg_trg_EnterInRect)
        end
    end)
end
]]

function StartWolfAI()
    StartWolOnce = true
    local boss = FindUnitOfType(FourCC('n002'))
    local xs, ys = GetUnitXY(boss)
    local BossFight = true
    local into = CreateBOSSHPBar(boss, " ")
    --SetUnitLifePercentBJ(boss, 1)
    --
    UnitAddAbility(boss, FourCC('Abun'))
    --SetUnitPosition(boss, xs, ys)
    SetUnitOwner(boss, Player(10), true)
    local range = 1000
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("The Hunter on the Heath")
    SetMusicVolumeBJ(100)
    --local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    --FogModifierStart(FW)

    local phase = GetRandomInt(1, 6) -- 
    local sec = 0
    local PhaseOn = true
    local OnAttack = true
    local Control = false
    TimerStart(CreateTimer(), 1, true, function()
        -- 
        GBoss = boss
        local bx, by = GetUnitXY(boss)

        if not UnitAlive(boss) and not Control then
            Control = true
            local hero = HERO[0].UnitHero
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            CreateVictoryElderBorder()
            ClearMapMusicBJ()
            PlayMusicBJ("Salve Springs")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)
            SetUnitAnimation(boss, "death")

            SetUnitOwner(boss, Player(0), true)
            ResetUnitLookAt(boss)

            UnitAddAbility(hero, FourCC("AInv"))
            PlayMonoSpeech("Speech\\Wolf\\Peon\\PenFromWolf7", "  ,     ?")
            StunUnit(hero, 4)
            --StunUnit(hero,7)
            SetUnitFacingToFaceUnitTimed(hero, boss, 0)
            TimerStart(CreateTimer(), 5, false, function()
                UnitAddItemById(hero, FourCC("I000"))
                local dist = DistanceBetweenXY(GetUnitX(boss), GetUnitY(boss), GetUnitXY(hero))
                BlzPauseUnitEx(hero, true) --  
                local angle = AngleBetweenUnits(hero, boss)
                UnitAddJumpForce(hero, angle, 40, dist, 400)
                ResetUnitLookAt(boss)
                ResetUnitCustomPause(boss)
            end)
            TimerStart(CreateTimer(), 7, false, function()
                ShowUnit(hero, false)

                local data = GetUnitData(hero)
                data.peonAttach = AddSpecialEffectTarget("peonAttach", boss, "chest") --    
                data.UnitHero = boss
                InitAnimations(hero, data)
                --InitAnimations(udg_HERO, HERO[0])
                --
            end)


        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, 2000) then
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 250) then
                            if phase == 1 then
                                --print("  ")
                                local angle = AngleBetweenUnits(boss, hero)
                                SetUnitFacing(boss, angle)
                                WolfSlashAttack(boss, phase)

                            end
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)

                            --SetUnitAnimation(boss,"Attack")
                            if phase ~= 1 then
                                --PlaySound("Speech\\Yetti\\tineproidesh")
                                --EttiDashAttackPrepare(boss, hero)
                            end

                        end

                    end
                end
                if k > 0 and not BossFight then
                    print("  ") --   
                    BlzFrameSetVisible(into, true)
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Salve Springs")
                    SetMusicVolumeBJ(100)
                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            --   
            sec = sec + 1
            if sec >= 5 then
                sec = 0
                phase = GetRandomInt(1, 7) -- ,  
                PhaseOn = true
                --print("phase " .. phase)
            end
            --
            local hero = HERO[0].UnitHero
            if phase == 1 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfRoundMove(boss)

            end
            if phase ~= 1 then
                ResetUnitLookAt(boss)
            end
            if phase ~= 5 then
                WolfDoingFastWalk = false

            end
            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfDashAttack(boss, hero)
            end
            if phase == 3 and PhaseOn then
                PhaseOn = false
                --("", phase)
                sec = sec + GetRandomInt(2, 4)
                WolfHowlFreeze(boss)

            end
            if phase == 4 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfJump2Point(boss, true, GetUnitXY(hero))
                --DragonTripleShot(boss, hero)

            end
            if phase == 5 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfWinterMove(boss, xs, ys)

            end
            if phase == 6 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfIceDash(boss, GetUnitXY(hero))
                local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
                local angle = AngleBetweenUnits(boss, hero)
                SetUnitFacing(boss, angle)
                BlzSetSpecialEffectYaw(eff, math.rad(angle))

                local k = 3
                TimerStart(CreateTimer(), 1.2, true, function()
                    DestroyEffect(eff)
                    BlzSetSpecialEffectPosition(eff, 0, 0, 0)
                    k = k - 1
                    if k <= 0 then
                        DestroyTimer(GetExpiredTimer())
                    else
                        WolfIceDash(boss, GetUnitXY(hero))

                    end
                end)

            end
            if phase == 7 and PhaseOn then
                PhaseOn = false
                --print("", phase)
                WolfIceSpikeLine(boss, hero)
                WolfIceSpikeLine(boss, false, GetUnitFacing(boss) + 35)
                WolfIceSpikeLine(boss, false, GetUnitFacing(boss) - 35)
            end


        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("The Hunter on the Heath")
                SetUnitPositionSmooth(boss, xs, ys) --  
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
            end
        end--
    end)
end

function WolfIceSpikeLine(boss, hero, hardAngle)
    local xs, ys = GetUnitXY(boss)
    local angle = hardAngle--AngleBetweenXY(xs, ys, x, y) / bj_DEGTORAD
    if hero then
        angle = AngleBetweenUnits(boss, hero)
    end

    xs, ys = MoveXY(xs, ys, 120, angle)
    --BlzPauseUnitEx(boss, true)
    SetUnitAnimation(boss, "Attack Slam")
    SetUnitFacing(boss, angle)
    local d = 0
    local speed = 25
    TimerStart(CreateTimer(), 1, false, function()
        WolfRoundMove(boss)
    end)
    TimerStart(CreateTimer(), 0.30, false, function()
        local t = CreateTimer()
        TimerStart(t, 0.1, true, function()
            if hero then
                angle = AngleBetweenUnits(boss, hero)
            end
            local nx, ny = MoveXY(xs, ys, speed * d, angle)
            d = d + 1
            local eff = AddSpecialEffect("Ice Shard", nx, ny)
            BlzSetSpecialEffectYaw(eff, math.rad(GetRandomInt(0, 360))) --angle
            TimerStart(CreateTimer(), 0.3, false, function()
                if UnitDamageArea(boss, 50, nx, ny, 80) then
                    DestroyTimer(t)
                    local eff2 = AddSpecialEffect("Ice Shard", nx, ny)
                    BlzSetSpecialEffectYaw(eff2, math.rad(GetRandomInt(0, 360))) --angle
                    BlzSetSpecialEffectScale(eff2, 4)
                    TimerStart(CreateTimer(), 0.3, false, function()
                        --UnitDamageArea(boss, 50, nx, ny, 250)
                        local mark = AddSpecialEffect("Spell Marker TC", nx, ny)
                        BlzSetSpecialEffectScale(mark, 2)
                        DestroyEffect(mark)
                    end)
                    TimerStart(CreateTimer(), 0.7, false, function()
                        DestroyEffect(eff2)
                    end)
                end
            end)
            TimerStart(CreateTimer(), 0.7, false, function()
                DestroyEffect(eff)
            end)
            if d >= 30 then
                DestroyTimer(GetExpiredTimer())
                local eff2 = AddSpecialEffect("Ice Shard", nx, ny)
                BlzSetSpecialEffectYaw(eff2, math.rad(GetRandomInt(0, 360))) --angle
                BlzSetSpecialEffectScale(eff2, 4)
                TimerStart(CreateTimer(), 0.3, false, function()
                    UnitDamageArea(boss, 50, nx, ny, 250)
                    local mark = AddSpecialEffect("Spell Marker TC", nx, ny)
                    BlzSetSpecialEffectScale(mark, 2)
                    DestroyEffect(mark)
                end)
                TimerStart(CreateTimer(), 0.7, false, function()
                    DestroyEffect(eff2)
                end)
            end
        end)
    end)

end

function WolfIceDash(boss, xh, yh, delay)

    if not delay then
        delay = 1
    end
    if UnitAlive(boss) then
        --local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
        local angle = AngleBetweenXY(GetUnitX(boss), GetUnitY(boss), xh, yh) / bj_DEGTORAD
        local k = GetUnitLifePercent(boss) / 100
        k = 1 - k
        SetUnitFacing(boss, angle)
        --BlzSetSpecialEffectYaw(eff, math.rad(angle))

        --  DestroyEffect(eff)


        TimerStart(CreateTimer(), delay, false, function()

            --print("")
            --WolfSlashAttack(boss)
            local x, y = GetUnitXY(boss)
            local chargeEff = AddSpecialEffect("IceCharge", x, y)
            BlzSetSpecialEffectScale(chargeEff, 3)
            SetUnitAnimationByIndex(boss, 2)
            MoveEffectTimedWSpeed(chargeEff, 40, angle, 0.39)
            UnitAddForceSimple(boss, angle, 40, 1000, "RunEtti")

            BlzPauseUnitEx(boss, true)
            -- local r=GetRandomInt(0,8)
            --print("")
            --SetUnitAnimationByIndex(boss, r)
            SetUnitTimeScale(boss, 3)
            BlzSetUnitFacingEx(boss, angle)
        end)
    end


end

WolfDoingFastWalk = false

function WolfWinterMove(boss, xs, ys)
    if not WolfDoingFastWalk then
        local dist = 1100
        local ri = GetRandomInt(0, 360)
        --Blink2Point(boss, MoveXY(xs, ys, dist, ri))
        --print(ri, "ri")
        local speed = 2
        local tpx, tpy = MoveXY(xs, ys, dist, ri * speed)

        WolfIceDash(boss, tpx, tpy, 0.1)

        TimerStart(CreateTimer(), 0.7, false, function()
            local revers = 1
            if GetRandomInt(1, 2) == 1 then
                revers = -1
            end
            WolfDoingFastWalk = true
            local i = ri
            --SetUnitAnimation(boss,"Walk")
            local chargeEff = AddSpecialEffectTarget("IceCharge", boss, "origin")
            SetUnitAnimationByIndex(boss, 2)--WALK
            SetUnitTimeScale(boss, 3)

            TimerStart(CreateTimer(), 1 / 64, true, function()
                local nx, ny = MoveXY(xs, ys, dist, speed * i)
                i = i + revers
                --print(i, "i")
                dist = dist - 1
                local angle = AngleBetweenXY(nx, ny, MoveXY(xs, ys, dist, speed * (i + revers))) / bj_DEGTORAD
                SetUnitPosition(boss, nx, ny)
                BlzSetUnitFacingEx(boss, angle)
                UnitDamageArea(boss, 50, nx, ny, 120)
                if GetRandomInt(1, 10) == 1 then
                    local new = CreateUnit(GetOwningPlayer(boss), FourCC("ntor"), GetUnitX(boss), GetUnitY(boss), 0)
                    UnitApplyTimedLife(new, FourCC('BTLF'), 5)
                end
                if not WolfDoingFastWalk then
                    DestroyEffect(chargeEff)
                    DestroyTimer(GetExpiredTimer())
                    SetUnitTimeScale(boss, 1)
                    ResetUnitAnimation(boss)
                end
            end)
        end)
    else
        --print("  ")
        SandStorm(boss, xs, ys)
    end
end

function WolfJump2Point(boss, HasMarker, x, y)
    local mark = nil
    local angle = AngleBetweenXY(GetUnitX(boss), GetUnitY(boss), x, y) / bj_DEGTORAD
    local dist = DistanceBetweenXY(GetUnitX(boss), GetUnitY(boss), x, y)
    if HasMarker then
        mark = AddSpecialEffect("Spell Marker TC", x, y)
        BlzSetSpecialEffectScale(mark, 3)
    end
    TimerStart(CreateTimer(), 0.5, false, function()
        DestroyEffect(mark)
        --SetUnitTimeScale(boss, 0.3)
        SetUnitAnimationByIndex(boss, 8)
        --print(r)
        --r=r+1
        UnitAddJumpForce(boss, angle, 60, dist, 500, HasMarker,"ThunderclapCasterClassic")
    end)
end

function UnitAddJumpForce(hero, angle, speed, distance, MaxHeight, HasMarker, effModel)
    local currentdistance = 0
    local i = 0
    local ZStart = GetUnitZ(hero)
    if not MaxHeight then
        MaxHeight = 0
    end
    --SetUnitPathing(hero,false)
    --UnitDisablePath(hero)
    if UnitAlive(hero) then
        --   
        SetUnitFacing(hero, angle)
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()

            currentdistance = currentdistance + speed
            local x, y = GetUnitXY(hero)
            local f = ParabolaZ(MaxHeight / 2, distance, i * speed) + ZStart
            SetUnitZ(hero, f)
            i = i + 1
            local newX, newY = MoveX(x, speed, angle), MoveY(y, speed, angle)
            --local perepad = GetUnitZ(hero) - GetTerrainZ(MoveXY(x, y, speed * 3, angle))
            SetUnitX(hero, newX)
            SetUnitY(hero, newY)

            if i > 3 and f <= GetTerrainZ(GetUnitXY(hero)) then
                DestroyTimer(GetExpiredTimer())
                BlzPauseUnitEx(hero, false)
                SetUnitTimeScale(hero, 1)
                --SetUnitPathing(hero,true)
                SetUnitZ(hero, 0)
                --print("")
                if HasMarker then
                    if GetRandomInt(1, 3) == 1 then
                        WolfHowlFreeze(hero, GetRandomInt(4, 8))
                    end
                    WolfRoundMove(hero)
                end

                QueueUnitAnimation(hero, "stand")
                UnitDamageArea(hero, 150, newX, newY, 235)
                if not effModel then
                    --DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", newX, newY))
                else
                    DestroyEffect(AddSpecialEffect(effModel, newX, newY))
                    DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", newX, newY))
                end
            end
        end)
    end
end

function UnitDisablePath(unit)
    UnitAddAbility(hero, FourCC("AInv"))
    UnitAddItemById(unit, FourCC("I000")) --  
end

function WolfHowlFreeze(boss, k)
    --print("")

    SetUnitAnimation(boss, "Spell Slam")
    local x, y = GetUnitXY(boss)

    --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", x, y))
    --
    local dist = 50
    if not k then
        k = 15
        normal_sound("howl", x, y)
    end
    local n = 0
    TimerStart(CreateTimer(), 0.3, true, function()
        local angle = 360 / (15 + n)
        for i = 1, 15 + n do
            local nx, ny = MoveXY(x, y, dist, angle * i)
            --print("i",angle*i)
            local eff = AddSpecialEffect("Ice Shard", nx, ny)
            BlzSetSpecialEffectYaw(eff, math.rad(GetRandomInt(0, 360))) --angle
            TimerStart(CreateTimer(), 0.3, false, function()
                UnitDamageArea(boss, 50, nx, ny, 80)
            end)
            TimerStart(CreateTimer(), 0.7, false, function()
                DestroyEffect(eff)
            end)
        end
        dist = dist + 70
        n = n + 3
        k = k - 1
        --print(k,"k")
        if k <= 0 then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function WolfDashAttack(boss, hero)
    if UnitAlive(boss) then
        local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
        local angle = AngleBetweenUnits(boss, hero)
        local k = GetUnitLifePercent(boss) / 100
        k = 1 - k
        SetUnitFacing(boss, angle)
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        TimerStart(CreateTimer(), 1.2, false, function()
            DestroyEffect(eff)
        end)
        TimerStart(CreateTimer(), (1 - k) + 0.1, false, function()

            --print("")
            WolfSlashAttack(boss)
            UnitAddForceSimple(boss, angle, 20 + 20 * k, 1000, "AttackAndRunWolf")

            BlzPauseUnitEx(boss, true)
            -- local r=GetRandomInt(0,8)
            --print(r,"")
            --SetUnitAnimationByIndex(boss, r)
            SetUnitTimeScale(boss, 3)
            BlzSetUnitFacingEx(boss, angle)
        end)
    end
end

function WolfRoundMove(boss)
    local hero = HERO[0].UnitHero
    local x, y = GetUnitXY(hero)
    local angle = AngleBetweenUnits(hero, boss)
    x, y = MoveXY(x, y, 500, angle)
    --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", x, y))
    local xn, yn = x, y
    local i = 1
    local tx = {}
    local ty = {}
    TimerStart(CreateTimer(), 0.01, true, function()
        --print(angle-15*i)
        i = i + 1
        xn, yn = MoveXY(x, y, 300, -180 + angle - 15 * i)
        table.insert(tx, xn)
        table.insert(ty, yn)
        --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", xn, yn))
        if i >= 15 then
            DestroyTimer(GetExpiredTimer())
            if not IsUnitInRangeXY(boss, xn, yn, 400) then
                --Blink2Point(boss, xn, yn)
                WolfJump2Point(boss, false, xn, yn)
            end
            --SetUnitPositionSmooth(boss, xn, yn)

            --IssuePointOrder(boss, "move", xn, yn)
        end
    end)

    xn, yn = x, y
    i = #tx

    TimerStart(CreateTimer(), 0.2, true, function()
        --print(angle-15*i)
        i = i - 1

        IssuePointOrder(boss, "move", tx[i], ty[i])
        SetUnitFacing(boss, AngleBetweenUnits(boss, hero))

        local x1, y1 = GetUnitXY(hero)
        local x2, y2 = GetUnitXY(boss)
        --    
        -- x1, x2 -   
        -- x2, y2 -   
        -- orientation -     
        -- width -     
        -- radius -    

        if IsPointInSector(x1, y1, x2, y2, GetUnitFacing(boss) - 180, 30, 1000) then
            ResetUnitLookAt(boss)
            --WolfIceDash(boss, x1, y1, 0.1)
            --WolfHowlFreeze(boss,3)
            --print("    ")
        else
            SetUnitLookAt(boss, 'bone_head', hero, 0, 0, 90)
        end

        --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", tx[i], ty[i]))
        if i <= 1 then
            DestroyTimer(GetExpiredTimer())
        end
    end)

    IssuePointOrder(boss, "move", x, y)
    SetUnitLookAt(boss, 'bone_head', hero, 0, 0, 90)
end

function WolfSlashAttack(boss, phase)
    local speed = 20
    SetUnitTimeScale(boss, 3)
    QueueUnitAnimation(boss, "Attack Slam")
    local x, y = GetUnitXY(boss)
    local xe, ye = MoveXY(x, y, 200, GetUnitFacing(boss))
    local eff = AddSpecialEffect("animeslashfinal", xe, ye)
    normal_sound("Sound\\Units\\Combat\\MetalLightSliceFlesh2", x, y)
    BlzSetSpecialEffectPosition(eff, xe, ye, GetTerrainZ(xe, ye) + 80)
    BlzSetSpecialEffectYaw(eff, math.rad(GetUnitFacing(boss)))
    UnitDamageArea(boss, 300, xe, ye, 200)
    DestroyEffect(eff)
    MoveEffectTimedWSpeed(eff, speed, GetUnitFacing(boss), 1)
    if phase == 1 then
        TimerStart(CreateTimer(), 0.2, false, function()
            SetUnitTimeScale(boss, 1)
        end)
    end
end

function ResetUnitCustomPause(unit)
    local k = UnitPauseCounter[GetHandleId(unit)]
    if not k then
        k = 0
    end
    --print(k)
    if k > 0 then
        for i = 1, k do
            --print(" ", i)
            BlzPauseUnitEx(unit, false)
        end
    end
    if k < 0 then
        k = k * -1
        for i = 1, k do
            --print(" ", i)
            BlzPauseUnitEx(unit, true)
        end
    end


    return k
end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 02.05.2020 2:43
---
--stoneEffModel = "Abilities\\Weapons\\RockBoltMissile\\RockBoltMissile"
--Special = "Abilities\\Weapons\\ProcMissile\\ProcMissile"
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .01, false, function()
            DestroyTimer(GetExpiredTimer())

            InitTrig_EnterInRectB()
        end)
    end
end

function InitTrig_EnterInRectB()
    --   
    --print(" ")
    local gg_trg_EnterInRect = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_EnterInRect, gg_rct_Region_038)
    TriggerAddAction(gg_trg_EnterInRect, function()
        if IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) then
            --StartYettyAI(GetRectCenterX(gg_rct_Region_038), GetRectCenterY(gg_rct_Region_038))
            DisableTrigger(gg_trg_EnterInRect)
            CustomCinematicMode(true)
            --CinematicModeBJ(true, GetPlayersAll())
            --BlzHideOriginFrames(false)
            --TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_635", gg_snd_Intro4, "TRIGSTR_636", bj_TIMETYPE_ADD, 0.00, true)
        end
    end)
end

function StartYettyAI(xs, ys)
    CreateMoveTextureTimed(5)
    local boss = FindUnitOfType(FourCC('n000'))
    local BossFight = true
    local into = CreateBOSSHPBar(boss, " ")
    UnitAddAbility(boss, FourCC('Abun'))
    SetUnitPosition(boss, xs, ys)
    SetUnitOwner(boss, Player(10), true)
    local range = 1000
    local x, y = GetUnitXY(boss)
    ClearMapMusicBJ()
    PlayMusicBJ("The Icefalcon's Crest")
    SetMusicVolumeBJ(100)
    local FW = CreateFogModifierRectBJ(false, Player(0), FOG_OF_WAR_VISIBLE, GlobalRect)
    FogModifierStart(FW)

    local phase = 0 -- 
    local sec = 5
    local PhaseOn = true
    local OnAttack = true
    TimerStart(CreateTimer(), 1, true, function()
        -- 
        GBoss = boss
        local bx, by = GetUnitXY(boss)

        if not UnitAlive(boss) then
            --   
            StartSound(bj_questCompletedSound)
            DestroyTimer(GetExpiredTimer())
            phase = 0
            --print(" , ")
            CreateVictoryElderBorder()
            PlayMonoSpeech("Speech\\Peon\\nyizachemyaegoybil", "     ...")
            QuestSetCompletedBJ(udg_QYetty, true)
            CreateUnit(Player(0), FourCC("h003"), GetUnitX(boss), GetUnitY(boss), 0)
            ClearMapMusicBJ()
            PlayMusicBJ("Endless Snowbanks")
            SetMusicVolumeBJ(100)
            BlzFrameSetVisible(into, false)

        else
            --    ,   
            if BossFight then
                local k = 0
                for i = 0, 3 do
                    local hero = HERO[i].UnitHero
                    if IsUnitInRange(hero, boss, 2000) then
                        k = k + 1
                    end

                    --print("   ")
                    if OnAttack then
                        if IsUnitInRange(hero, boss, 145) then
                            --SetUnitTimeScale(boss,-1)
                            OnAttack = false
                            TimerStart(CreateTimer(), 5, false, function()
                                OnAttack = true
                            end)
                            local angle = AngleBetweenUnits(boss, hero)
                            SetUnitFacing(boss, angle)
                            --SetUnitAnimation(boss,"Attack")
                            --StunUnit(hero, 3)
                            YettyCouchHero(boss, hero, 3)



                            if phase ~= 1 then

                                EttiDashAttackPrepare(boss, hero)
                                --print(" ")

                            end

                        end

                    end
                end
                if k > 0 and not BossFight then
                    print("  ")
                    BlzFrameSetVisible(into, true)
                end

                if k == 0 then
                    BossFight = false
                    phase = 0
                    --print("  1  ,   ")
                    --print(BlzFrameIsVisible(into))
                    BlzFrameSetVisible(into, false)
                    --print(BlzFrameIsVisible(into))
                    HealUnit(boss)
                    SetUnitPositionSmooth(boss, xs, ys)
                    ClearMapMusicBJ()
                    PlayMusicBJ("Endless Snowbanks")
                    SetMusicVolumeBJ(100)
                end
            end
        end
        local xb, yb = GetUnitXY(boss)
        if BossFight then
            --   
            sec = sec + 1
            if sec >= 10 then
                sec = 0
                phase = phase + 1
                PhaseOn = true
                --print("phase " .. phase)
                if phase >= 4 then
                    phase = 0
                end
            end
            --
            if phase == 1 and PhaseOn then
                PhaseOn = false
                --print("   ")

                local hero = HERO[0].UnitHero
                --Speech\\Yetti\\rastopchy
                EttiDashAttackPrepare(boss, hero)
                --normal_sound("Speech\\Yetti\\rastopchy", GetUnitXY(HERO[0].UnitHero))

                local r = GetRandomInt(1, 3)
                if r == 1 then
                    PlayBossSpeech("Speech\\Yetti\\rastopchy", "")

                elseif r == 2 then
                    PlayBossSpeech("Speech\\Yetti\\dogony", "")
                elseif r == 3 then
                    PlayBossSpeech("Speech\\Yetti\\zatopchybolshiminogami", "  ")
                end
                local time = 0
                TimerStart(CreateTimer(), 0.1, true, function()
                    -- 
                    time = time + 0.1
                    if time >= 2 then
                        EttiDashAttackPrepare(boss, hero)
                        time = 0
                    end

                    if phase ~= 1 then
                        DestroyTimer(GetExpiredTimer())
                    end
                end)

            end
            if phase == 2 and PhaseOn then
                PhaseOn = false
                --print(" ")
                local effmodel = "Icicle"
                PlayBossSpeech("Speech\\Yetti\\polychisosulkojvglaz", "   ")
                local var = GetRandomInt(1, 2)
                TimerStart(CreateTimer(), 1, false, function()
                    if var == 1 then
                        TimerStart(CreateTimer(), .5, true, function()
                            -- 

                            SetUnitAnimationByIndex(boss, 3)
                            local rx, ry = GetRandomInt(-500, 500), GetRandomInt(-500, 500)
                            MarkAndFall(bx + rx, by + ry, effmodel, boss)
                            SetUnitFacing(boss, AngleBetweenXY(GetUnitX(boss), GetUnitY(boss), bx + rx, by + ry) / bj_DEGTORAD)
                            if phase ~= 2 then
                                DestroyTimer(GetExpiredTimer())
                                ResetUnitAnimation(boss)
                            end
                        end)
                        local k = GetUnitLifePercent(boss) / 100
                        k = 1 - k
                        --print(k)
                        TimerStart(CreateTimer(), 1.2 - k, true, function()
                            -- 
                            for i = 0, 3 do
                                local hero = HERO[i].UnitHero
                                if IsUnitInRange(hero, boss, 1000) then
                                    MarkAndFall(GetUnitX(hero), GetUnitY(hero), "Icicle", boss)
                                end
                            end

                            if phase ~= 2 then
                                DestroyTimer(GetExpiredTimer())
                                ResetUnitAnimation(boss)
                            end
                        end)
                    elseif var == 2 then
                        --print("    ")
                        local hero = HERO[0].UnitHero

                        local period = 0.6
                        local count = 30
                        TimerStart(CreateTimer(), period, true, function()
                            local px, py = GetUnitXY(boss)
                            local angle = 360 / count
                            SetUnitAnimationByIndex(boss, 3)
                            for i = 1, count do
                                local nx, ny = MoveXY(px, py, 30 * count, angle * i)
                                if IsUnitInRange(hero, boss, 1000) then
                                    MarkAndFall(nx, ny, "Icicle", boss)
                                end
                            end
                            count = count - 5
                            if phase ~= 2 then
                                DestroyTimer(GetExpiredTimer())
                                ResetUnitAnimation(boss)
                            end
                        end)
                    end
                end)
            end
            if phase == 3 and PhaseOn and sec == 5 then
                --  
                PhaseOn = false
                --print(" ")
                local r = GetRandomInt(1, 3)
                if r == 1 then
                    PlayBossSpeech("Speech\\Yetti\\zanimmoiminioni", "   ")
                elseif r == 2 then
                    PlayBossSpeech("Speech\\Yetti\\nesmeilomatetypartiy", "    ")
                elseif r == 3 then
                    PlayBossSpeech("Speech\\Yetti\\vsynochihlepil", "   ")
                end

                local hero = HERO[0].UnitHero
                for i = 1, GetRandomInt(10, 20) do
                    local xx, yy = GetLocationX(GetRandomLocInRect(gg_rct_Region_038)), GetLocationY(GetRandomLocInRect(gg_rct_Region_038))
                    if not IsUnitInRangeXY(hero, xx, yy, 600) then
                        local snowmanBlast = CreateUnit(GetOwningPlayer(boss), FourCC("e001"), xx, yy, 0)
                        IssueTargetOrder(snowmanBlast, "attack", hero)
                        local duration = 10
                        local mark = AddSpecialEffectTarget("Spell Marker TC", snowmanBlast, "origin")
                        BlzSetSpecialEffectColorByPlayer(mark, Player(1)) -- 
                        TimerStart(CreateTimer(), 0.5, true, function()
                            duration = duration - 0.5
                            --FlyTextTagManaBurn(snowmanBlast,duration,GetOwningPlayer(hero))
                            if not OrderId2String(GetUnitCurrentOrder(snowmanBlast)) == "move" then
                                IssuePointOrder(snowmanBlast, "move", GetUnitXY(hero))
                            end
                            if IsUnitInRange(snowmanBlast, hero, 200) then
                                DestroyEffect(AddSpecialEffect("FrostWyrmMissileNoOmni", GetUnitXY(snowmanBlast)))
                                UnitDamageArea(snowmanBlast, 100, GetUnitX(snowmanBlast), GetUnitY(snowmanBlast), 250)
                                KillUnit(snowmanBlast)
                                ShowUnit(snowmanBlast, false)
                            end
                            if not UnitAlive(snowmanBlast) or duration <= 0 then
                                DestroyTimer(GetExpiredTimer())
                                DestroyEffect(AddSpecialEffect("FrostWyrmMissileNoOmni", GetUnitXY(snowmanBlast)))
                                DestroyEffect(mark)
                                UnitDamageArea(snowmanBlast, 100, GetUnitX(snowmanBlast), GetUnitY(snowmanBlast), 250)
                                KillUnit(snowmanBlast)
                                ShowUnit(snowmanBlast, false)
                            end
                        end)
                    end
                end

                if phase ~= 3 then
                    DestroyTimer(GetExpiredTimer())
                end
            end

        else
            --  
            local k = 0
            for i = 0, 3 do
                local hero = HERO[i].UnitHero
                if IsUnitInRange(hero, boss, 1500) then
                    k = k + 1
                end
            end
            if k >= 1 then
                --print(" ,   ")
                ClearMapMusicBJ()
                PlayMusicBJ("The Icefalcon's Crest")
                SetMusicVolumeBJ(100)
                BlzFrameSetVisible(into, true)
                HealUnit(boss, 99999)
                BossFight = true
            end
        end--
    end)
end
QTEReadyToPress = false
function YettyCouchHero(boss, hero, duration)
    if UnitAlive(hero) and not BlzIsUnitInvulnerable(hero) then

        local r = GetRandomInt(1, 5)
        if r == 1 then
            PlayMonoSpeech("Speech\\Peon\\Yetty\\peon4", " !")
        elseif r == 2 then
            normal_sound("spine-bone-break-1", GetUnitXY(hero))
            PlayMonoSpeech("Speech\\Peon\\Yetty\\peon5", " !")
        elseif r == 3 then
            PlayMonoSpeech("Speech\\Peon\\Yetty\\peon6", "     !")
        elseif r == 4 then
            normal_sound("spine-bone-break-1", GetUnitXY(hero))
            PlayMonoSpeech("Speech\\Peon\\Yetty\\peon7", ",    !")
        elseif r == 5 then
            if GetUnitTypeId(boss)~=FourCC("n007") then
                PlayBossSpeech("Speech\\Yetti\\tineproidesh", "  ")
            end
        end

        StunUnit(hero, 3)
        local eff = AddSpecialEffect("CircleCastBarCannibalize", GetUnitXY(boss))
        BlzSetSpecialEffectScale(eff, 2)
        BlzSetSpecialEffectTimeScale(eff, duration)
        local qteFH = CreateQTEFrame()
        QTEReadyToPress = true
        local x, y = GetUnitXY(boss)
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            duration = duration - TIMER_PERIOD
            if duration <= 0 then
                UnitDamageArea(boss, 50)
                --print(" ")
                normal_sound("spine-bone-break-1", GetUnitXY(hero))
                BlzDestroyFrame(qteFH)
                QTEReadyToPress = false
                local effb = AddSpecialEffect("D9_blood_effect1", GetUnitXY(hero))
                BlzSetSpecialEffectScale(effb, 0.1)
                DestroyEffect(effb)
            end
            if duration <= 0 or not QTEReadyToPress or not UnitAlive(hero) then
                DestroyTimer(GetExpiredTimer())
                UnitAddForceSimple(hero, GetUnitFacing(boss), 40, 400)
                --print("")
                UnitRemoveStun(hero)
                DestroyEffect(eff)
                ResetUnitAnimation(boss)
                BlzDestroyFrame(qteFH)
                QTEReadyToPress = false
            else
                QueueUnitAnimation(boss, "spell")
                x, y = GetUnitXY(boss)
                local nx, ny = MoveXY(x, y, 100, GetUnitFacing(boss))
                SetUnitPositionSmooth(hero, nx, ny)
                local z = GetTerrainZ(nx, ny) + 200
                BlzSetSpecialEffectPosition(eff, nx, ny, z)
            end
        end)
    end
end

function MarkAndFall(x, y, effModel, hero, delay)
    local markModel = "Snipe Target"
    local scale = 5
    local angleCreations=GetRandomReal(0, 360)
    local damageRange=140
    if effModel == "ConcreteCliffFloorCenter" then
        markModel = "Spell Marker TC"
        scale = 2
        angleCreations=GetRandomInt(1,4)*90
        damageRange=250
    end
    local mark = AddSpecialEffect(markModel, x, y)
    BlzSetSpecialEffectScale(mark, scale)
    if not delay then
        delay = 2
    end

    local deep = 20
    if effModel == "Icicle" then
        deep = GetRandomInt(200, 400)
    end
    TimerStart(CreateTimer(), delay, false, function()

        local FallenEff = AddSpecialEffect(effModel, x, y)
        BlzSetSpecialEffectZ(FallenEff, GetTerrainZ(x, y) + 1000)
        BlzSetSpecialEffectYaw(FallenEff, math.rad(angleCreations))
        BlzSetSpecialEffectScale(FallenEff, scale)
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            local z = BlzGetLocalSpecialEffectZ(FallenEff)
            BlzSetSpecialEffectZ(FallenEff, z - 50)
            if z + deep <= GetTerrainZ(x, y) then
                DestroyEffect(mark)
                BlzSetSpecialEffectPosition(mark, 5000, 5000, 0)
                DestroyTimer(GetExpiredTimer())

                local nd = nil
                --SetDestructableInvulnerable(nd,true)
                DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", x, y))
                PlayerSeeNoiseInRangeTimed(0.5, x, y)
                UnitDamageArea(hero, 300, x, y, damageRange) --  
                local k = GetUnitLifePercent(hero) / 100
                k = 1 - k
                if effModel == "Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile" then
                    DestroyEffect(FallenEff)
                else
                    if effModel == "ConcreteCliffFloorCenter" then
                        DownFloorInTimedXY(10,x,y)
                        DestroyEffect(FallenEff)
                        BlzSetSpecialEffectPosition(FallenEff, OutPoint, OutPoint, 0)
                    else
                        nd = CreateDestructableZ(FourCC('B002'), x, y, 0, 0, 5, 1)
                    end

                end
                local duration = 5-- + (k * 5)
                TimerStart(CreateTimer(), duration, false, function()
                    DestroyEffect(FallenEff)
                    --BlzSetSpecialEffectPosition(FallenEff, 999, 999, 999)
                    KillDestructable(nd)
                end)
            end
        end)
    end)
end

function EttiDashAttackPrepare(boss, hero)
    if UnitAlive(boss) then
        local eff = AddSpecialEffect("BossArrow", GetUnitXY(boss))
        local angle = AngleBetweenUnits(boss, hero)
        local k = GetUnitLifePercent(boss) / 100
        k = 1 - k
        BlzSetSpecialEffectYaw(eff, math.rad(angle))
        TimerStart(CreateTimer(), 1.5, false, function()
            DestroyEffect(eff)
        end)
        TimerStart(CreateTimer(), 1.2 - k, false, function()

            --print("")
            UnitAddForceSimple(boss, angle, 20 + 20 * k, 1000, "RunEtti")
            BlzPauseUnitEx(boss, true)
            SetUnitAnimationByIndex(boss, 7)
            SetUnitTimeScale(boss, 3)
            BlzSetUnitFacingEx(boss, angle)
        end)
    end
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 29.10.2023 18:24
---
function InitHookUnits(id)
    local _, k, rg = FindUnitOfType(id)
    --print(k, "")
    for i = 1, #rg do
        --local unit = rg[i]
        StartHookAI(rg[i])
    end
end

function UnitCreateHook(unit, angle, totalScale)
    if not totalScale then
        totalScale = 1
    end
    local x, y = GetUnitXY(unit)
    local chainEff = "Chain"
    local hookEff = "abilities\\weapons\\wyvernspear\\wyvernspearmissile"
    local chains = {}
    local maxDist = 1000 * totalScale
    local hook = AddSpecialEffect(hookEff, x, y)
    local currentDist = 0
    local speed = 40 * totalScale
    local revers = false
    local k = 0
    local forward = true
    local scale = 3 * totalScale
    local k2 = 0
    local hero = nil
    local r = GetRandomInt(1, 4)
    normal_sound("Sound\\Units\\Undead\\AbominationYesAttack" .. r, GetUnitXY(unit))

    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        local nx, ny = MoveXY(x, y, currentDist, angle)
        --local nx2,ny2=MoveXY(x,y,currentDist*0.5,angle)
        local z = GetTerrainZ(nx, ny) + 80
        if currentDist < maxDist and not revers then
            currentDist = currentDist + speed
            k2 = k2 + 1
            if k2 >= 1 then
                local eff = AddSpecialEffect(chainEff, nx, ny)
                table.insert(chains, eff)
                BlzSetSpecialEffectYaw(eff, math.rad(angle))
                BlzSetSpecialEffectPosition(eff, nx, ny, z)
                BlzSetSpecialEffectMatrixScale(eff, scale, scale, scale)
            end

            BlzSetSpecialEffectPosition(hook, nx, ny, z)
            BlzSetSpecialEffectYaw(hook, math.rad(angle))
            BlzSetSpecialEffectMatrixScale(hook, 2 * totalScale, 2 * totalScale, 2 * totalScale)
            _, hero = UnitDamageArea(unit, 1, nx, ny, 80)
            if hero then
                if forward then
                    revers = true
                    --print(" ",#chains)
                    k = #chains
                    forward = false
                end
            end
        else
            if forward then
                revers = true
                --print(" ",#chains)
                k = #chains
                forward = false
            end
        end
        if revers then

            currentDist = currentDist - speed
            --print(" ",currentDist)
            BlzSetSpecialEffectPosition(hook, nx, ny, z)
            --BlzSetSpecialEffectMatrixScale(hook,2,2,2)
            --BlzSetSpecialEffectYaw(hook, math.rad(angle))
            DestroyEffect(chains[k])
            BlzSetSpecialEffectPosition(chains[k], 5000, 5000, 5000)
            k = k - 1
            if hero then
                SetUnitX(hero, nx)
                SetUnitY(hero, ny)
                StunUnit(hero, 0.5)
            end

            if currentDist <= speed then
                --print(" ")
                UnitRemoveStun(hero)

                --local enemy=FindFirstEnemy(unit,1200)
                local enemy = HERO[0].UnitHero
                --IssueTargetOrder(unit, "move", enemy)
                if IsUnitInRange(unit, enemy, 1000) then
                    IssuePointOrder(unit, "move", GetUnitXY(enemy))
                end
                hero = nil
                DestroyTimer(GetExpiredTimer())
                DestroyEffect(hook)
                for i = 1, #chains do
                    DestroyEffect(chains[i])
                    BlzSetSpecialEffectPosition(chains[i], 5000, 5000, 5000)
                end
            end
        end
    end)
end

function StartHookAI(unit, timed, scale)
    local hero = HERO[0].UnitHero
    local sec = 2
    local TimerFinder = CreateTimer()
    if not scale then
        scale = 1
    end

    if not timed then
        TimerStart(CreateTimer(), 0.2, true, function()
            if not UnitAlive(unit) then
                DestroyTimer(GetExpiredTimer())
            else
                KillDestructableByTypeInPoint(ButtonsIDTable, 100, GetUnitXY(unit))
            end
        end)
    else
        TimerStart(CreateTimer(), timed, false, function()
            DestroyTimer(TimerFinder)
        end)
    end

    TimerStart(TimerFinder, 1, true, function()
        sec = sec - 1
        if sec <= 0 then
            sec = 7
            if IsUnitInRange(unit, hero, 1000 * scale) and UnitAlive(unit) then
                --print("    ")
                local mark = AddSpecialEffect("BossArrowHook", GetUnitXY(unit))
                local markTimer = CreateTimer()
                local angle = AngleBetweenUnits(unit, hero)
                BlzSetSpecialEffectYaw(mark, math.rad(angle))
                TimerStart(markTimer, TIMER_PERIOD64, true, function()
                    angle = AngleBetweenUnits(unit, hero)
                    BlzSetSpecialEffectX(mark, GetUnitX(unit))
                    BlzSetSpecialEffectY(mark, GetUnitY(unit))
                    BlzSetSpecialEffectZ(mark, GetUnitZ(unit) + 50)
                    BlzSetSpecialEffectYaw(mark, math.rad(angle))
                    BlzSetSpecialEffectScale(mark, scale)
                    SetUnitFacing(unit, angle)
                end)
                TimerStart(CreateTimer(), 3, false, function()
                    DestroyEffect(mark)
                    DestroyTimer(markTimer)
                    BlzSetSpecialEffectPosition(mark, 5000, 5000, 5000)
                    IssueImmediateOrder(unit, "stop")
                    SetUnitAnimation(unit, "Attack")
                    BlzSetUnitFacingEx(unit, angle)

                    TimerStart(CreateTimer(), 0.2, false, function()
                        --print("  ")
                        QueueUnitAnimation(unit, "Stand")
                        if UnitAlive(unit) then
                            UnitCreateHook(unit, angle, scale)
                            if unit == GBoss then
                                local r = GetRandomInt(12, 16)
                                if r == 12 then
                                    PlayBossSpeech("Speech\\Pudge\\InFight\\F" .. r, " ")
                                elseif r == 13 then
                                    PlayBossSpeech("Speech\\Pudge\\InFight\\F" .. r, "")
                                elseif r == 14 then
                                    PlayBossSpeech("Speech\\Pudge\\InFight\\F" .. r, " ....")
                                elseif r == 15 then
                                    PlayBossSpeech("Speech\\Pudge\\InFight\\F" .. r, "    ")
                                elseif r == 16 then
                                    PlayBossSpeech("Speech\\Pudge\\InFight\\F" .. r, " ")
                                end
                            end
                        end
                    end)
                end)
            end
        end
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 06.11.2023 11:24
---
function InitBarrels(id)
    local _, k, rg = FindUnitOfType(id)
    --print(k, "")
    for i = 1, #rg do
        local new = rg[i]
        --StartHookAI(rg[i])
        local range=300
        CreepsX[GetHandleId(new)], CreepsY[GetHandleId(new)] = GetUnitXY(new)
        TimerStart(CreateTimer(), 0.2, true, function()
            if not UnitAlive(new) then
                DestroyTimer(GetExpiredTimer())
            else
                KillDestructableByTypeInPoint(ButtonsIDTable,range/3,GetUnitXY(new))
            end
        end)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 06.11.2023 17:26
---
function ReplaceId2InvisiblePlatform(id)
    local tmp, k, all = FindUnitOfType(id)
    --print(" "..k.."    "..#all)
    for i = 1, #all do
        -- print(" "..GetUnitName(all[i]))
        ShowUnit(all[i], false)
        SetUnitInvulnerable(all[i], true)
        CreateInvPlatform(all[i])
    end
end

function CreateInvPlatform(hero)
    local x, y = GetUnitXY(hero)
    local enterTrig = CreateTrigger()
    TriggerRegisterUnitInRange(enterTrig, hero, 100, nil)
    local free=true
    TriggerAddAction(enterTrig, function()
        local enemy = GetTriggerUnit()
        --print(GetUnitName(enemy).. "   ")
        free=false
        if not free then
            local eff = AddSpecialEffect("footswitchWhite", x, y)
            --BlzSetSpecialEffectColorByPlayer(eff, Player(1)) -- 
            local r=GetRandomInt(0,255)
            local r2=GetRandomInt(0,255)
            local r3=GetRandomInt(0,255)
            BlzSetSpecialEffectColor(eff,r,r2,r3)
            CreateEffectDown2Up(eff, x, y)
            TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
                if not IsUnitInRange(hero, enemy, 110) or not UnitAlive(enemy) then
                    DestroyTimer(GetExpiredTimer())
                    free=true
                    CreateEffectUp2Down(eff, x, y)
                    --print("")
                end
            end)
        end
    end)
end

function CreateEffectDown2Up(eff, x, y)
    BlzSetSpecialEffectColorByPlayer(eff, Player(1))
    local z = GetTerrainZ(x, y) - 500
    local zNormal = GetTerrainZ(x, y) - 50
    BlzSetSpecialEffectZ(eff, z)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        z = z + 50
        BlzSetSpecialEffectZ(eff, z)
        if z >= zNormal then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function CreateEffectUp2Down(eff, x, y)
    BlzSetSpecialEffectColorByPlayer(eff, Player(1))
    local zNormal = GetTerrainZ(x, y) - 500
    local z = GetTerrainZ(x, y) - 50
    BlzSetSpecialEffectZ(eff, z)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        z = z - 50
        BlzSetSpecialEffectZ(eff, z)
        if z <= zNormal then
            BlzSetSpecialEffectPosition(eff, OutPoint, OutPoint, 0)
            DestroyEffect(eff)
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

OutPoint=5000
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 29.10.2023 18:24
---
function InitPendulum(id)
    local _, k, rg = FindUnitOfType(id)
    --print(k, " ")
    for i = 1, #rg do
        --local unit = rg[i]
        StartPendulumAI(rg[i])
    end
end




function StartPendulumAI(unit)
    --local hero = HERO[0].UnitHero
    local sec=1
    local x,y=GetUnitXY(unit)
    local angle=GetUnitFacing(unit)
    UnitAddAbility(unit, FourCC("Aloc"))
    SetUnitTimeScale(unit,0)
    TimerStart(CreateTimer(), 1, true, function()
        sec = sec - 1
        --print(sec)
        if sec <= 0 then
            sec = 13
            --if IsUnitInRange(unit, hero, 1000) and UnitAlive(unit)  then
            --print(" ")
            SetUnitAnimation(unit,"Attack")
            SetUnitTimeScale(unit,1)
            TimerStart(CreateTimer(), 3.2, false, function()
                --print("   ")
                local xs,ys=MoveXY(x,y,900,angle)
                local speed=25
                local dist=0
                local damageTimer=CreateTimer()
                --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", xs,ys))
                TimerStart(damageTimer, TIMER_PERIOD, true, function()
                    dist=dist+speed
                    local nx,ny=MoveXY(xs,ys,dist,angle-180)
                    --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", nx,ny))
                    AttackMiniLine(unit,nx,ny)
                    --SetUnitAnimation(unit,"Attack")
                end)
                TimerStart(CreateTimer(), 1.8, false, function()
                   DestroyTimer(damageTimer)
                    --print("   ,   ")
                    --SetUnitAnimation(unit,"Attack")
                    --SetUnitTimeScale(unit,0)
                end)
                TimerStart(CreateTimer(), 3.9, false, function()
                    --print("    ")

                    local nx,ny=MoveXY(xs,ys,dist,angle-180)
                    --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", nx,ny))
                    local damageTimerReverse=CreateTimer()
                    TimerStart(damageTimerReverse, TIMER_PERIOD, true, function()
                        dist=dist-speed
                        nx,ny=MoveXY(xs,ys,dist,angle-180)
                        AttackMiniLine(unit,nx,ny)
                    end)
                    TimerStart(CreateTimer(), 1.8, false, function()
                        DestroyTimer(damageTimerReverse)
                       -- print("   ,  ")

                    end)
                end)
            end)
            --end
        end
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function AttackMiniLine(unit,x,y)
    local angle=GetUnitFacing(unit)
    local range=60
    local x2,y2=MoveXY(x,y,range/2,angle)
    local x3,y3=MoveXY(x,y,range/2,angle-180)
    DestroyEffect(AddSpecialEffect("AncestralGuardianMissileNoOmni", x,y))
    DestroyEffect(AddSpecialEffect("AncestralGuardianMissileNoOmni", x2,y2))
    DestroyEffect(AddSpecialEffect("AncestralGuardianMissileNoOmni", x3,y3))
    --UnitDamageArea(unit,50,x,y,range)
    --UnitDamageArea(unit,50,x2,y2,range)
    --UnitDamageArea(unit,50,x3,y3,range)
    DamageInLine(x, y, angle - 180, range*2.5, unit,range/2)
    DamageInLine(x, y, angle, range*2.5, unit,range/2)
    DamageInLine(x, y, angle-90, range*2, unit,range/2)
    DamageInLine(x, y, angle+90, range*2, unit,range/2)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 04.02.2023 21:54
---
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), .5, false, function()
            InitSnowMan(FourCC("h005")) --
            InitSnowMan(FourCC("n003")) -- 
            InitDeathEventCreep()
            InitScorpionAI(FourCC("n003")) -- 
            InitHookUnits(FourCC("u001")) --   
            InitPendulum(FourCC("h00E")) -- 
            InitBarrels(FourCC("h00C")) --    
            --InitAllFallenWall()
            ReplaceId2InvisiblePlatform(FourCC("h00F")) -- 
        end)
    end
end
CreepsX = {}
CreepsY = {}
function InitSnowMan(id)
    local _, k, rg = FindUnitOfType(id)
    --print(k,"")
    for i = 1, #rg do
        local u = rg[i]
        CreepsX[GetHandleId(u)], CreepsY[GetHandleId(u)] = GetUnitXY(u)
    end
end

function InitDeathEventCreep()
    local this = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddAction(this, function()
        local u = GetTriggerUnit() --  
        if GetUnitTypeId(u) == FourCC("h005") or GetUnitTypeId(u) == FourCC("n003") then
            local killer = GetKillingUnit()
            local id = GetUnitTypeId(u)
            local p = GetOwningPlayer(u)
            local x, y = CreepsX[GetHandleId(u)], CreepsY[GetHandleId(u)]
            local delay = GetRandomInt(30, 60)
            TimerStart(CreateTimer(), delay, false, function()
                local new = CreateUnit(p, id, x, y, GetRandomInt(0, 360))
                CreepsX[GetHandleId(new)], CreepsY[GetHandleId(new)] = GetUnitXY(new)
                if GetUnitTypeId(u) == FourCC("n003") then
                    StartScorpionAI(new)
                end

            end)
            TimerStart(CreateTimer(), delay - 5, false, function()
                DestroyEffect(AddSpecialEffect("HealingWater", x, y))
            end)
        end
        if GetUnitTypeId(u) == FourCC("h005") then
            --UnitBlastArea(u, "FrostWyrmMissileNoOmni", 12)
        end
        if GetUnitTypeId(u) == FourCC("h00C") then -- 
            local nx,ny=GetUnitXY(u)
            local range=300
            TimerStart(CreateTimer(), 0.2, false, function() --  
                UnitDamageArea(u,50,nx,ny,range,"All")
                KillDestructableByTypeInPoint(ButtonsIDTable,range,nx,ny)
                local delay = 2
                local x, y = CreepsX[GetHandleId(u)], CreepsY[GetHandleId(u)]
                local id = GetUnitTypeId(u)
                local p = GetOwningPlayer(u)
                TimerStart(CreateTimer(), delay, false, function()
                    if x then
                        local new = CreateUnit(p, id, x, y, GetRandomInt(0, 360))
                        CreepsX[GetHandleId(new)], CreepsY[GetHandleId(new)] = GetUnitXY(new)
                        TimerStart(CreateTimer(), 0.2, true, function()
                            if not UnitAlive(new) then
                                DestroyTimer(GetExpiredTimer())
                            else
                                if not IsUnitFall[GetHandleId(new)] then
                                    KillDestructableByTypeInPoint(ButtonsIDTable,range/3,GetUnitXY(new))
                                end
                            end
                        end)
                        UnitStartFallAnim(new,1000)
                    else
                        --print("    ")
                    end
                    --InitBarrels(new)
                end)
            end)
        end
    end)

end

function UnitBlastArea(unit, effModel, count)
    if not UnitAlive(unit) then
        --unit=FindUnitOfType(FourCC("e005"))--   
    else
        return
    end
    local angle = 360 / count
    for i = 1, count do
        CreateAndForceBullet(unit, angle * i, 30, effModel)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 05.02.2023 20:55
---
function InitScorpionAI(id)
    local _, k, rg = FindUnitOfType(id)
    --print(k, "")
    for i = 1, #rg do
        local unit = rg[i]
        StartScorpionAI(unit)
    end
end

function StartScorpionAI(unit)
    local phase = 3
    local sec = GetRandomInt(0,5)
    local hero = HERO[0].UnitHero

    local dmgTrig = CreateTrigger()
    TriggerRegisterUnitEvent(dmgTrig, unit, EVENT_UNIT_DAMAGED)
    TriggerAddAction(dmgTrig, function()
        --print("  ")
        local angle = AngleBetweenUnits(unit, hero) - 180
        if onForces[GetHandleId(unit)] then
            if phase==1 then
                UnitAddForceSimple(unit, angle, 20, 200)

            end
        end
    end)

    TimerStart(CreateTimer(), 1, true, function()
        sec = sec - 1
        if sec <= 0 then
            sec = 6
            phase = GetRandomInt(1, 3)

            if IsUnitInRange(unit, hero, 1000) and UnitAlive(unit)  then
                --print("  ")
                --print(phase)
                if phase == 1 then
                    ScorpionRunTo(unit, hero, 5)
                elseif phase == 2 then
                    ScorpionRangeAttack(unit, hero, 5)
                elseif phase == 3 then
                    ScorpioUnderGroundMove(unit, hero, 5)
                end
            end
        end
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function ScorpioUnderGroundMove(unit, hero, duration)
    local angle = AngleBetweenUnits(unit, hero)
    local asp = 0.02
    SetUnitAnimationByIndex(unit, 7)
    SetUnitInvulnerable(unit,true)
    TimerStart(CreateTimer(), 0.7, false, function()
        TimerStart(CreateTimer(), asp, true, function()
            duration = duration - asp
            angle = AngleBetweenUnits(unit, hero)
            BlzSetUnitFacingEx(unit, angle)
            UnitAddForceSimple(unit, angle, 5, 60, "ScorpioRun")
            DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitXY(unit)))
            if GetRandomInt(1,5)==1 then
                local eff=AddSpecialEffect("Ice Shard", GetUnitXY(unit))
                BlzSetSpecialEffectScale(eff,GetRandomInt(2,3))
                UnitDamageArea(unit, 50, GetUnitX(unit), GetUnitY(unit), 80)
                TimerStart(CreateTimer(), 0.7, false, function()
                    DestroyEffect(eff)
                end)
            end

            if not UnitAlive(unit) or duration-0.7 <= 0 then
                if not UnitAlive(unit) then
                    SetUnitAnimation(unit, "death")
                else
                    SetUnitAnimationByIndex(unit, 10)
                end
                SetUnitInvulnerable(unit,false)
                DestroyTimer(GetExpiredTimer())
            end
        end)
    end)
end

function ScorpionRangeAttack(unit, hero, duration)
    local angle = AngleBetweenUnits(unit, hero)
    local asp = 0.5
    TimerStart(CreateTimer(), asp, true, function()
        duration = duration - asp
        angle = AngleBetweenUnits(unit, hero)
        BlzSetUnitFacingEx(unit, angle)
        SetUnitAnimationByIndex(unit, 2)
        CreateAndForceBullet(unit, angle, 20, "Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", nil, nil, 2, 1500,150)
        if not UnitAlive(unit) or duration <= 0 then
            if not UnitAlive(unit) then
                SetUnitAnimation(unit, "death")
            end
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

function ScorpionRunTo(unit, hero, duration)

    SetUnitTimeScale(unit, 3)
    --SetUnitFacing(unit, angle)
    SetUnitAnimationByIndex(unit, 1)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        duration = duration - TIMER_PERIOD64
        local angle = AngleBetweenUnits(unit, hero)
        SetUnitFacing(unit, angle)
        UnitAddForceSimple(unit, angle, 5, 20, "ScorpioRun")
        UnitDamageArea(unit, 50, GetUnitX(unit), GetUnitY(unit), 80)
        SetUnitAnimationByIndex(unit, 1)
        if not UnitAlive(unit) or duration <= 0 then
            SetUnitTimeScale(unit, 1)
            if not UnitAlive(unit) then
                SetUnitAnimation(unit, "death")
            end
            DestroyTimer(GetExpiredTimer())
        end
    end)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 16.02.2023 22:32
---
GBossSoundDuration = 0
function PlayBossSpeech(sound, text)
    if not TexBoxBoss then
        --print(" ")
        CreteDialogBoxBoss()
    end
    if not text then
        text="   "
    end
    local s = nil
    if not BlzFrameIsVisible(TexBoxBoss) and UnitAlive(GBoss) then
        s = normal_sound(sound)
        if GetUnitTypeId(GBoss)==FourCC("n007") then --   
            SetSoundPitch(s, 0.8)
        end
        local sd = GetSoundDuration(s)
        --SetCinematicScene(HeroID, 1, "peon", "text", 2, 2)
        if sd <= 10 then
            sd = 3000
        end
        GV = 20
        SetMusicVolumeBJ(GV)
        BlzFrameSetVisible(TexBoxBoss, true)
        BlzFrameSetText(TexBoxTextBoss, text)
        --TransmissionFromUnitWithNameBJ(GetPlayersAll(), HERO[0].UnitHero, "", nil, "", bj_TIMETYPE_SET, GetSoundDuration(s) / 700, false)
        --print(GetSoundDuration(s))
        GBossSoundDuration = sd / 700
        local chkTimer = CreateTimer()
        TimerStart(CreateTimer(), 0.5, true, function()
            if not UnitAlive(GBoss) then
                StopSound(s, false, 0.5)
                DestroyTimer(chkTimer)
            end
        end)
        TimerStart(CreateTimer(), sd / 700, false, function()
            BlzFrameSetVisible(TexBoxBoss, false)
            DestroyTimer(chkTimer)
            TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                SetMusicVolumeBJ(GV)
                GV = GV + 1
                if GV >= 100 then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    end
    return s
end

function CreteDialogBoxBoss()
    --print("  ",toolTipTex)
    local tooltip = BlzCreateFrameByType("FRAME", "TestDialog", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "StandardFrameTemplate", 0)
    BlzFrameSetParent(tooltip, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    --local backdrop = BlzCreateFrame("QuestButtonDisabledBackdropTemplate", tooltip, 0, 0)
    local backdrop = BlzCreateFrameByType("BACKDROP", "Face", tooltip, "", 0)
    BlzFrameSetTexture(backdrop, "SpeechBoxBoss", 0, true)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", tooltip, "", 0)
    BlzFrameSetAbsPoint(tooltip, FRAMEPOINT_LEFT, 0, 0.09)
    BlzFrameSetSize(tooltip, 0.25, 0.125)
    BlzFrameSetSize(backdrop, 0.25, 0.125)
    BlzFrameSetSize(text, 0.28, 0.06)
    BlzFrameSetPoint(backdrop, FRAMEPOINT_CENTER, tooltip, FRAMEPOINT_CENTER, 0.0, 0.0)
    --BlzFrameSetAlpha(backdrop, 0)
    BlzFrameSetText(text, "      ,    ?,      ,    ?,      ,    ?,      ,    ?")
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, tooltip, FRAMEPOINT_LEFT, 0.02, -0.003)
    BlzFrameSetScale(text, 0.8)
    BlzFrameSetVisible(tooltip, false)

    TexBoxBoss = tooltip
    TexBoxTextBoss = text
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 04.08.2021 16:36
---
ActiveDialog = false
do
    local InitGlobalsOrigin = InitGlobals
    function InitGlobals()
        InitGlobalsOrigin()
        TimerStart(CreateTimer(), 1, false, function()
            CreteDialogBox()
            CreteDialogBoxBoss()

            --CreateAndMoveSpeechImage("start", 5, "left", "PeonEmotion\\normal_left", "       ,    ", 0)
            --CreateAndMoveSpeechImage("end", 5, "right", "PeonEmotion\\thing_right", "    ,  , ", 5)
        end)
    end
end

yDialog = 0.55
function CreateAndMoveSpeechImage(state, duration, position, texture, text, delay, name, sound)
    --print(" ")
    if not name then
        name = "<>"
    end
    sound = udg_sound
    TimerStart(CreateTimer(), delay, false, function()
        --BlzFrameSetText(TexBoxText, text)

        --print(sound, "  ")
        if name~="" then
            normal_sound(sound, GetUnitXY(GetRandomPeon()))
        else
            PlaySound(sound)
        end
        SetTexSlow(text, TexBoxText, TIMER_PERIOD / 2)
        BlzFrameSetAlpha(TexBox, 254)
        local xPoz = 0
        local yPoz = yDialog
        local x = 0
        local xs = 0
        local pos = FRAMEPOINT_LEFT
        if state == "start" then
            xPoz = 0.1
            ShowAllAbilitiesFrame(false)
            SetMusicVolumeBJ(40)
        end
        if position == "right" then
            xPoz = 0.7 + TIMER_PERIOD64
            x = 1.2
            pos = FRAMEPOINT_RIGHT
        elseif position == "left" then
            xPoz = 0.1 - TIMER_PERIOD64
            x = -0.4
            pos = FRAMEPOINT_LEFT
        else
            print("   ")
        end
        xs = x
        local image = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
        BlzFrameSetAlpha(image, 0)
        local alpha = 0
        BlzFrameSetTexture(image, texture, 0, true)
        BlzFrameSetSize(image, 0.2, 0.2)
        BlzFrameSetParent(image, BlzGetFrameByName("ConsoleUIBackdrop", 0))
        BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, xPoz, 1)
        local y = 1

        local nameSpeaker = BlzCreateFrameByType("TEXT", "ButtonChargesText", image, "", 0)
        BlzFrameSetSize(nameSpeaker, 0.2, 0.2)
        BlzFrameSetText(nameSpeaker, name)
        local tempRight = 0
        if position == "right" then
            tempRight = 0.1
        end
        BlzFrameSetPoint(nameSpeaker, pos, image, pos, 0.01 + tempRight, -0.17)
        BlzFrameSetScale(nameSpeaker, 1.5)

        TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
            alpha = alpha + 8
            if alpha >= 255 then
                alpha = 255
            end
            --BlzFrameSetAlpha(image, alpha)
            --print(alpha)
            --y = y - 0.03

            if position == "left" then
                x = x + TIMER_PERIOD64
                --print(y)
                BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, x, yPoz)
                if x >= xPoz then
                    -- print(x)
                    DestroyTimer(GetExpiredTimer())

                    if state == "start" then
                        BlzFrameSetVisible(TexBox, true)
                    end
                end
            else
                x = x - TIMER_PERIOD64
                BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, x, yPoz)
                if x <= xPoz then
                    DestroyTimer(GetExpiredTimer())

                    if state == "start" then
                        BlzFrameSetVisible(TexBox, true)

                    end
                end
            end
        end)
        --

        TimerStart(CreateTimer(), duration, false, function()
            y = 0.5
            alpha = 255

            TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                y = y + 0.03
                alpha = alpha - 15
                if alpha <= 0 then
                    alpha = 0
                end
                BlzFrameSetAlpha(image, alpha)

                --print(y)
                --[[BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, xPoz, y)
                if y > 1 then
                    DestroyTimer(GetExpiredTimer())
                    BlzFrameSetVisible(image, false)
                    if state == "end" then
                        BlzFrameSetVisible(TexBox, false)
                    end
                end]]
                if state == "end" then
                    BlzFrameSetAlpha(TexBox, alpha)
                    ShowAllAbilitiesFrame(true)
                    SetMusicVolumeBJ(100)
                end
                if position == "left" then
                    x = x - TIMER_PERIOD64
                    --print(y)
                    BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, x, yPoz)
                    if x <= xs then
                        -- print(x)
                        DestroyTimer(GetExpiredTimer())
                        if state == "end" then
                            BlzFrameSetVisible(TexBox, false)

                            --BlzFrameSetAlpha(TexBox, 0)
                        end
                    end
                else
                    x = x + TIMER_PERIOD64
                    BlzFrameSetAbsPoint(image, FRAMEPOINT_CENTER, x, yPoz)
                    if x >= xs then
                        DestroyTimer(GetExpiredTimer())

                        if state == "end" then
                            BlzFrameSetVisible(TexBox, false)
                            --BlzFrameSetAlpha(TexBox, 0)
                        end
                    end
                end


            end)
        end)
    end)
end

function CreteDialogBox()
    --print("  ",toolTipTex)
    local tooltip = BlzCreateFrameByType("FRAME", "TestDialog", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "StandardFrameTemplate", 0)
    BlzFrameSetParent(tooltip, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    --local backdrop = BlzCreateFrame("QuestButtonDisabledBackdropTemplate", tooltip, 0, 0)
    local backdrop=BlzCreateFrameByType("BACKDROP", "Face", tooltip, "", 0)
    BlzFrameSetTexture(backdrop, "SpeechBox", 0, true)
    --BlzFrameSetSize(backdrop, 0.76, 0.02)
    --BlzFrameSetAbsPoint(backdrop, FRAMEPOINT_LEFT, 0.018, 0.03)


    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", tooltip, "", 0)
    BlzFrameSetAbsPoint(tooltip, FRAMEPOINT_LEFT, -0.08, 0.51)
    BlzFrameSetSize(tooltip, 0.25, 0.125)
    BlzFrameSetSize(backdrop, 0.25, 0.125)
    BlzFrameSetSize(text, 0.28, 0.06)
    BlzFrameSetPoint(backdrop, FRAMEPOINT_CENTER, tooltip, FRAMEPOINT_CENTER, 0.0, 0.0)
    --BlzFrameSetAlpha(backdrop, 0)
    BlzFrameSetText(text, "      ,    ?,      ,    ?,      ,    ?,      ,    ?")
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, tooltip, FRAMEPOINT_LEFT, 0.02, -0.003)
    BlzFrameSetScale(text, 0.8)
    BlzFrameSetVisible(tooltip, false)

    TexBox = tooltip
    TexBoxText = text
end

function SetTexSlow(originalText, TextFrame, speed)
    local t = {}
    for i = 1, #originalText do
        t[i] = originalText:sub(i, i)
    end
    local k = 1
    local new = ""
    TimerStart(CreateTimer(), speed, true, function()
        new = new .. t[k]
        BlzFrameSetText(TextFrame, new)
        k = k + 1
        if k > #originalText then
            DestroyTimer(GetExpiredTimer())
        end
    end)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 21.01.2023 23:57
---
GV=20
function PlayMonoSpeech(sound, text)
    if not BlzFrameIsVisible(TexBox) then
        local s = normal_sound(sound)
        local sd = GetSoundDuration(s)
        --SetCinematicScene(HeroID, 1, "peon", "text", 2, 2)
        if sd <= 10 then
            sd = 1000
        end
        BlzFrameSetVisible(TexBox, true)
        local GV=20
        SetMusicVolumeBJ(GV)
        BlzFrameSetText(TexBoxText, text)
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), HERO[0].UnitHero, "", nil, "", bj_TIMETYPE_SET, GetSoundDuration(s) / 700, false)
        --print(GetSoundDuration(s))
        TimerStart(CreateTimer(), sd / 700, false, function()
            BlzFrameSetVisible(TexBox, false)
            TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                SetMusicVolumeBJ(GV)
                GV=GV+1
                if GV>= 100 then
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    end
end

function RandomRescueSpeech()
local path="Speech\\Peon\\Rescue\\"
    local table = {
        [1] = {
            text = "  ",
            sound = path.."idinaraboty"
        },
        [2] = {
            text = "    ",
            sound = path.."itytzheonotrybilsa"
        },
        [3] = {
            text = ",  ",
            sound = path.."oiyaslychaino"
        },
        [4] = {
            text = "  , ",
            sound = path.."yanehotelbrat"
        }
    ,
        [5] = {
            text = "   ,     ",
            sound = path.."etoprostomoyarabota"
        }
    ,
        [6] = {
            text = ", ",
            sound = path.."ostorozhnoskolsko"
        }
    ,
        [7] = {
            text = ",  ",
            sound = path.."prostodemonstraciasili"
        }
    ,
        [8] = {
            text = " ",
            sound = path.."vnimatelneybud"
        }
    ,
        [9] = {
            text = "  ",
            sound = path.."vipisanizproletariata"
        }
    ,
        [10] = {
            text = "      ,     ",
            sound = path.."kakbiyahotel"
        }
    ,
        [11] = {
            text = "  ,      ",
            sound = path.."etovsepotomychtotistoish"
        }
    ,
        [12] = {
            text = "   :     ",
            sound = path.."zapomnibrattakyufrazy"
        }
    ,
        [13] = {
            text = ",   ,    -",
            sound = path.."brattakovatvoyasydba"
        }
    ,
        [14] = {
            text = "     ,    ",
            sound = path.."votavihvatiltibodrishpizdov"
        }
    ,
        [15] = {
            text = "   ,    ",
            sound = path.."yslishmoyotivozrashenie"
        }

    }
    local number = GetRandomInt(1, #table)
    --print(number)
    -- print(table[number].text)
    if number > #table then
        number = #table
        print("  ")
    end
    PlayMonoSpeech(table[number].sound, table[number].text)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 14.01.2023 12:06
---
function CreateCardFrame()
    --print(" ")
    --BlzFrameSetAbsPoint(BlzGetFrameByName("ConsoleUIBackdrop", 0), FRAMEPOINT_TOPRIGHT, 0, 0) -- 
    CardBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0) --   
    local cardNamesTable = {
        "CardGirland",
        "CardOlivie",
        "CardPresent",
        "CardStar",
        "CardVine",
    }
    local cardText = {
        "",
        "",
        "",
        "",
        "",
    }
    --for i = 1, #cardNamesTable do
    local i=1
    TimerStart(CreateTimer(), 1, true, function()
        local card = BlzCreateFrameByType("BACKDROP", "Face", CardBox, "", 0)
        BlzFrameSetTexture(card, cardNamesTable[i], 0, true)
        BlzFrameSetSize(card, 0.26, 0.26)
        BlzFrameSetAbsPoint(card, FRAMEPOINT_CENTER, 0.13 + ((i - 1) * 0.12), 0.4)

        local textName = BlzCreateFrameByType("TEXT", "ButtonChargesText", card, "", 0)
        BlzFrameSetText(textName, cardText[i])
        BlzFrameSetPoint(textName, FRAMEPOINT_BOTTOM, card, FRAMEPOINT_BOTTOM, 0., 0.025)
        if true then
            local alpha = 0
            BlzFrameSetAlpha(card, alpha)
           -- print(alpha)
            TimerStart(CreateTimer(), 0.01, true, function()
                alpha = alpha + 1
                BlzFrameSetAlpha(card, alpha)
                if alpha >= 255 then
                    if i>=5 then
                        --print("  ")
                    end
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end

        --BlzFrameSetParent(card, BlzGetFrameByName("ConsoleUIBackdrop", 0))
        i=i+1
        if i==6 then
            DestroyTimer(GetExpiredTimer())
        end
    end)

end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 03.03.2023 8:06
---
function CreateCustomPortrait()
    local parentBox = BlzCreateFrameByType('BACKDROP', "PORTRAIT", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(parentBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetAbsPoint(parentBox, FRAMEPOINT_CENTER, 0.45, 0.3)
    BlzFrameSetSize(parentBox, 0.000001, 0.000001)

    CreateSprite("pico-boku-no-pico", parentBox, nil, 1,0,0.5)
    CreateSprite("68f000b0feac0213a64a5d1dc93b2365251874e5", parentBox, nil, 1,0.2,0.5)
    CreateSprite("6948ace06605aac9ab07548d22e72392aefc1278", parentBox, nil, 1,0.4,0.5)
    CreateSprite("cool", parentBox, nil, 1,0.6,0.5)
    CreateSprite("excalibur-soul-eater", parentBox, nil, 0.5,0,0.3)
    CreateSprite("jojos-noriaki-kakyoin", parentBox, nil, 0.3,0.2,0.3)
    CreateSprite("paimon", parentBox, nil, 1,0.4,0.3)
    CreateSprite("rock-one-eyebrow-raised-rock-staring", parentBox, nil, 1,0.6,0.2)
    CreateSprite("russia-ussr", parentBox, nil, 0.4,0,0.15)
    CreateSprite("stonks-up-stongs", parentBox, nil, 0.5,0.2,0.15)
    CreateSprite("sweaty-gamer-speedrun-whipping", parentBox, nil, 1,0.4,0.15)

end

function CreateSprite(path, parent, timed, scale, x, y)
    if not x then
        x = 0.4
    end
    if not y then
        y = 0.3
    end
    if not parent then
        parent=BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0)
    end
    local sprite = BlzCreateFrameByType("SPRITE", "justAName", parent, "WarCraftIIILogo", 0)
    BlzFrameClearAllPoints(sprite)
    BlzFrameSetAbsPoint(sprite, FRAMEPOINT_CENTER, x, y)
    BlzFrameSetSize(sprite, 0.00001, 0.00001)
    BlzFrameSetScale(sprite, scale)
    BlzFrameSetModel(sprite, path, 0)
    if timed then
        TimerStart(CreateTimer(), timed, false, function()
            BlzDestroyFrame(sprite)
        end)
    end
    return sprite
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 31.12.2021 2:25
---
function CreateEnteringFrame(data, name)
    if not data then
        data=HERO[0]
    end
    if not data.ShowEntering then
        data.ShowEntering = true
        local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
        BlzFrameSetAbsPoint(text, FRAMEPOINT_CENTER, 0.4, 0.55)
        BlzFrameSetText(text, name)
        BlzFrameSetScale(text, 3)
        BlzFrameSetVisible(text, GetLocalPlayer() == Player(data.pid))
        local sec = 5
        local a = 250
        TimerStart(CreateTimer(), 5, false, function()
            TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
                sec = sec - TIMER_PERIOD
                a = a - 1
                BlzFrameSetAlpha(text, a)

                if sec <= 0 then
                    data.ShowEntering = false
                    BlzDestroyFrame(text)
                    DestroyTimer(GetExpiredTimer())
                end
            end)
        end)
    end
end
--CreateEnteringFrame(nil, " ")
function CreateSimpleFrameGlue(posX, PosY, texture,parent)
    --, call,callENTER,callLEAVE
    local NextPoint = 0.039
    if not texture then
        texture = "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn"
    else

    end
    local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', parent, 'ScoreScreenTabButtonTemplate', 0)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)

    BlzFrameSetParent(SelfFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))


    --BlzFrameSetVisible(SelfFrame, false)
    -- BlzFrameSetVisible(SelfFrame, GetLocalPlayer() == player)
    BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, "icons\\" .. texture, 0, true)
    BlzFrameSetSize(SelfFrame, NextPoint, NextPoint)
    BlzFrameSetAbsPoint(SelfFrame, FRAMEPOINT_CENTER, posX, PosY)
    local gif = nil
    if texture == "line" then
        --print(texture,  )
        gif = CreateAndPlayGif(posX, PosY + 0.20, "dds\\Gifline\\Gif" .. texture .. "_", 0.16, 25, nil, nil, 1)
        BlzFrameSetVisible(gif, false)
    end

    local ClickTrig = CreateTrigger()
    BlzTriggerRegisterFrameEvent(ClickTrig, SelfFrame, FRAMEEVENT_CONTROL_CLICK)
    TriggerAddAction(ClickTrig, function()
        --call()
        local data=HERO[GetPlayerId(GetTriggerPlayer())]
        --BlzFrameSetEnable(BlzGetTriggerFrame(), false)
        --BlzFrameSetEnable(BlzGetTriggerFrame(), true)
        StopUnitMoving(data)
    end)

    local TrigMOUSE_ENTER = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_ENTER, SelfFrame, FRAMEEVENT_MOUSE_ENTER)

    TriggerAddAction(TrigMOUSE_ENTER, function()
        BlzFrameSetVisible(gif, GetLocalPlayer() == GetTriggerPlayer())
        local data = HERO[GetPlayerId(GetTriggerPlayer())]
        --print("  ",flag)
        for i = 1, #data.SpellsName do
            if data.SpellsName[i] == texture then
               -- print(texture,i)
                --CreateFlyFrame(data, SelfFrame, texture)
                return
            end
        end


        --callENTER()
        --   BlzFrameSetVisible(ttBox, true)
        --  BlzFrameSetAbsPoint(ttBox, FRAMEPOINT_CENTER, 0, GHandY)


    end)
    local TrigMOUSE_LEAVE = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_LEAVE, SelfFrame, FRAMEEVENT_MOUSE_LEAVE)
    TriggerAddAction(TrigMOUSE_LEAVE, function()
        BlzFrameSetVisible(gif, false)
        --print(" ")
        --callLEAVE()
        --  BlzFrameSetVisible(ttBox, false)
        --BlzFrameSetVisible(tt[1],false)
    end)
    return SelfFrame, buttonIconFrame
end

function ColorText2(s)
    s = "|cffffcc00" .. s .. "|r"
    return s
end

function ColorText2Black(s)
    s = "|cff000000" .. s .. "|r"
    return s
end
function ColorText2Green(s)
    s = "|cFF00FF00" .. s .. "|r"
    return s
end


function DSColorDescription(talon)
    if talon.DS then
        if #talon.DS > 0 and talon["DS"][talon.lvl] ~= nil then
            local s = string.gsub(talon.descriptions, "DS", ColorText2(talon["DS"][talon.lvl]))
            return s
        elseif talon["DS"][talon.lvl] == nil and #talon.DS > 0 then
            local s = string.gsub(talon.descriptions, "DS", ColorText2(talon["DS"][#talon.DS]))
            return s
        else
            return talon.descriptions
        end
    else
        return talon.descriptions
    end
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 21.11.2023 21:47
---
function CreateGameStatWindow(data)
    STAT = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(STAT, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    local rama = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', STAT, '', 0)
    BlzFrameSetTexture(rama, "Textures\\Black32", 0, true) --HPElement
    BlzFrameSetSize(rama, 0.4, 0.3)
    BlzFrameSetAbsPoint(rama, FRAMEPOINT_LEFT, -0.1, 0.25)
    BlzFrameSetVisible(STAT, false) --  
    BlzFrameSetAlpha(rama,120)

    local h = BlzCreateFrameByType("TEXT", "ButtonChargesText", STAT, "", 0)
    BlzFrameSetText(h, ColorText2(" "))
    BlzFrameSetScale(h, 2)
    BlzFrameSetPoint(h, FRAMEPOINT_CENTER, rama, FRAMEPOINT_TOP, 0, -0.01)


    local names = {
        " ",
        " ",
        " ",
        " ",
        " ",
        " ",
        " ",
        " "
    }
    local FHNames = {}
    local FHStat = {}
    for i = 1, #names do
        local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", STAT, "", 0)
        BlzFrameSetText(text, names[i] .. ":")
        BlzFrameSetScale(text, 1.5)
        BlzFrameSetPoint(text, FRAMEPOINT_TOPLEFT, rama, FRAMEPOINT_TOPLEFT, 0.011, -0.01 - (i) * 0.02)
        table.insert(FHNames, text)
    end
    for i = 1, #names do
        local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", STAT, "", 0)
        BlzFrameSetText(text, "99999999")
        BlzFrameSetScale(text, 1.5)
        BlzFrameSetPoint(text, FRAMEPOINT_TOPLEFT, rama, FRAMEPOINT_TOPLEFT, 0.011 + 0.12, -0.01 - (i) * 0.02)
        table.insert(FHStat, text)
    end

    UpdateStatPanel(FHStat, data)
end

function UpdateStatPanel(FHStat, data)
    TimerStart(CreateTimer(), 0.2, true, function()
        BlzFrameSetText(FHStat[1], R2I(data.StatDies))
        BlzFrameSetText(FHStat[2], R2I(data.StatKill))
        BlzFrameSetText(FHStat[3], R2I(data.StatDamage))
        BlzFrameSetText(FHStat[4], R2I(data.StatSnow))
        BlzFrameSetText(FHStat[5], R2I(data.StatDash))
        BlzFrameSetText(FHStat[6], R2I(data.StatWay))
        BlzFrameSetText(FHStat[7], R2I(peonRescue))
        BlzFrameSetText(FHStat[8], R2I(999))
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 03.03.2023 5:44
---
function CreateMenu()
    MenuBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0) --   
    BlzFrameSetParent(MenuBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    local x,y=0.89,0.57
    local GearButton = BlzCreateFrameByType("BACKDROP", "Face", MenuBox, "", 0)
    BlzFrameSetTexture(GearButton, "GearButton", 0, true)
    BlzFrameSetSize(GearButton, 0.04, 0.04)
    BlzFrameSetAbsPoint(GearButton, FRAMEPOINT_CENTER, x,y)

    local TaskButton = BlzCreateFrameByType("BACKDROP", "Face", MenuBox, "", 0)
    BlzFrameSetTexture(TaskButton, "TaskButton", 0, true)
    BlzFrameSetSize(TaskButton, 0.04, 0.04)
    BlzFrameSetAbsPoint(TaskButton, FRAMEPOINT_CENTER, x-0.06,y)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 23.01.2023 0:48
---
function CreateMiniCard()
    MiniCardBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0) --   
    BlzFrameSetParent(MiniCardBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    MiniCARDFH={}
    for i = 1, 5 do
        local card = BlzCreateFrameByType("BACKDROP", "Face", MiniCardBox, "", 0)
        BlzFrameSetTexture(card, "CardEmpty", 0, true)
        BlzFrameSetSize(card, 0.05, 0.05)
        BlzFrameSetAbsPoint(card, FRAMEPOINT_CENTER, 0.79+(0.025*i), 0.02)
        table.insert(MiniCARDFH,card)
    end
end
function UnlockCard(texture,k)
    BlzFrameSetTexture(MiniCARDFH[k], texture, 0, true)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 04.02.2023 20:12
---
peonRescue = 0
peonRescueMax = 50
function CreatePeonCounter()
    --print("111111111111111111111")
    local box = BlzCreateFrameByType('BACKDROP', 'Face', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetParent(box, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    local peon = BlzCreateFrameByType("BACKDROP", "Face", box, "", 0)

    BlzFrameSetTexture(peon, "ReplaceableTextures\\CommandButtons\\BTNPeon.blp", 0, true)
    BlzFrameSetSize(peon, 0.05, 0.05)
    BlzFrameSetAbsPoint(peon, FRAMEPOINT_CENTER, -0.11, 0.025) ---0.11, 0.025

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", peon, "", 0)

    BlzFrameSetPoint(text, FRAMEPOINT_RIGHT, peon, FRAMEPOINT_RIGHT, 0.025, 0.)
    -- BlzFrameSetSize(text, 0.05, 0.05)
    local change=peonRescue
    TimerStart(CreateTimer(), 1, true, function()
        BlzFrameSetText(text, peonRescue .. "/" .. peonRescueMax)
        if change<peonRescue then
            change=peonRescue
            --print(" ")
            ShowFrameTimed(box)
            RandomRescueSpeech()
        end
    end)
    BlzFrameSetScale(text, 2)
    BlzFrameSetVisible(box,false)
end

function ShowFrameTimed(fh)
    if not BlzFrameIsVisible(fh) then
        BlzFrameSetVisible(fh,true)
        TimerStart(CreateTimer(), 1, false, function()
            BlzFrameSetVisible(fh,false)
        end)
    end
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 06.05.2023 17:22
---
function CreateStatSidePanel(data)
    local boxParent = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    local step = NextPoint / 2
    local x, y = -0.09 - step, 0.52
    local texturesTable = {
        "ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp",
        "ReplaceableTextures\\CommandButtons\\BTNGlove.blp",
        "ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp",
        "ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpOne.blp",
        "ReplaceableTextures\\CommandButtons\\BTNDwarvenLongRifle.blp"
    }
    step = NextPoint / 2 * 1.1
    for i = 1, #texturesTable do
        CreAteStatPanelElement(data, texturesTable[i], boxParent, x, y - step * (i - 1))
    end
end
function CreAteStatPanelElement(data, texture, parent, x, y)
    local infoFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', parent, '', 0)
    BlzFrameSetParent(infoFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(infoFrame, texture, 0, true)
    BlzFrameSetSize(infoFrame, NextPoint / 2, NextPoint / 2)
    BlzFrameSetAbsPoint(infoFrame, FRAMEPOINT_CENTER, x, y)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", infoFrame, "", 0)
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, 9999)
    BlzFrameSetScale(text, 0.9)
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, infoFrame, FRAMEPOINT_RIGHT, 0.002, 0.0) -- 0
    TimerStart(CreateTimer(), 0.2, true, function()
        if texture == "ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp" then
            BlzFrameSetText(text, R2I(data.BaseDamage))
            if data.BonusDamage > 0 then
                local res = ColorText2Green("+" .. R2I(data.BonusDamage))
                --print(res)
                BlzFrameSetText(text, R2I(data.BaseDamage) .. res)
            end
        elseif texture == "ReplaceableTextures\\CommandButtons\\BTNGlove.blp" then
            BlzFrameSetText(text, data.AttackInterval)
        elseif texture == "ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp" then
            BlzFrameSetText(text, string.format("%02.1f", data.MoveSpeed))
        elseif texture == "ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpOne.blp" then
            BlzFrameSetText(text, R2I(data.ShieldCount))
        elseif texture == "ReplaceableTextures\\CommandButtons\\BTNDwarvenLongRifle.blp" then
            BlzFrameSetText(text, R2I(data.MaxAttackRange))
        end
    end)
    --table.insert(BugsFH, infoFrame)
    --table.insert(BugsFH, text)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 05.03.2023 13:24
---
function CreateVictoryElderBorder()
    --GausBorder
    HeroCandyHeal(HERO[0],10)
    AddPeonMAXHP(HERO[0], 1)
    local alpha=255
    local BoxBorder = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(BoxBorder, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(BoxBorder, "GausBorder", 0, true)
    BlzFrameSetSize(BoxBorder, 1.6, 0.2)
    BlzFrameSetAbsPoint(BoxBorder, FRAMEPOINT_CENTER, 0.4, 0.3)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBorder, "", 0)
    BlzFrameSetPoint(text, FRAMEPOINT_CENTER, BoxBorder, FRAMEPOINT_CENTER, 0, 0)
    BlzFrameSetText(text, ColorText2("    "))
    BlzFrameSetScale(text, 4.5)

    local text2 = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetPoint(text2, FRAMEPOINT_CENTER, BoxBorder, FRAMEPOINT_CENTER, 0, 0)
    BlzFrameSetText(text2, ColorText2("    "))
    BlzFrameSetScale(text2, 4.5)
    BlzFrameSetAlpha(text2, 20)
    local sec = 1
    local scale=4.5
    TimerStart(CreateTimer(), 4, false, function()
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            sec = sec - TIMER_PERIOD
            alpha=alpha-4
            --print(alpha)
            BlzFrameSetAlpha(BoxBorder,alpha)
            if alpha<=20 then
                BlzFrameSetAlpha(text2,alpha)
            end
            if sec<=0 then

            else
                scale=scale+0.02
                BlzFrameSetScale(text2, scale)
            end

            if alpha<10 then
                DestroyTimer(GetExpiredTimer())
                BlzDestroyFrame(BoxBorder)
                BlzDestroyFrame(text2)
            end
        end)
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 06.05.2023 18:53
---
function CreateFlyFrame(parent, textTip)
    --print(" ?")
    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", parent, "", 0)
    local y=0.005
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, textTip)
    BlzFrameSetScale(text, 1.4)
    BlzFrameSetPoint(text, FRAMEPOINT_TOP, parent, FRAMEPOINT_TOP, 0.00, y)
    --BlzFrameSetTextColor(text, BlzConvertColor(255, 140, 140, 255))

    local a=0
    local speed=-0.0005
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        a=a+10
        --print(a)
        BlzFrameSetAlpha(text,a)
        if a>=250 then
            -- print("revers")
            --BlzDestroyFrame(text)
            TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
                a=a-5
                BlzFrameSetAlpha(text,a)
                -- print(a)
                if a<=0 then
                    --print("destroy",y)
                    DestroyTimer(GetExpiredTimer())
                    BlzDestroyFrame(text)
                end
            end)
            DestroyTimer(GetExpiredTimer())
        end
    end)

    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        y=y+speed
        BlzFrameSetPoint(text, FRAMEPOINT_TOP, parent, FRAMEPOINT_TOP, 0.00, y)
        if y>0.2 then
            DestroyTimer(GetExpiredTimer())
        end
        --print(y)
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 06.10.2021 0:00
---
---
function InitMenu()
    HideEverything()
    ReturnFPS()
    MenuFrame()
    GTimer = CreateAndStartClock()
    DrawSelectionPortrait(true)
    --CreateMiniCard()
    CreatePeonCounter()
    --CreateVictoryElderBorder() --  
    --CreateShop() --   
    CreateGoldInterFace(HERO[0])
    CreateRTips()
    CreateStatSidePanel(HERO[0])
    CreateGameStatWindow(HERO[0])
    --CreateCustomPortrait()
    --CreateMenu()
    --CreateQTEFrame() --  QTE
    CreateMouseHelper()
    --CreateBossIntro()
    CreateGirlandUI()
end
function ReturnFPS()
    local fps = BlzGetFrameByName("ResourceBarFrame", 0)
    BlzFrameSetVisible(fps, true)
    BlzFrameClearAllPoints(fps)
    BlzFrameSetAbsPoint(fps, FRAMEPOINT_CENTER, 0.95, 0.62)
end

function HideEverythingAll()
    BlzFrameSetAbsPoint(BlzGetFrameByName("ConsoleUIBackdrop", 0), FRAMEPOINT_TOPRIGHT, 0, 0)
    for i = 0, 11 do
        BlzFrameSetVisible(BlzGetFrameByName("CommandButton_" .. i, 0), false)
    end
    BlzHideOriginFrames(false)-- 
    BlzFrameSetScale(BlzFrameGetChild(BlzGetFrameByName("ConsoleUI", 0), 5), 0.001)
end

function HideEverything()
    BlzFrameSetAbsPoint(BlzGetFrameByName("ConsoleUIBackdrop", 0), FRAMEPOINT_TOPRIGHT, 0, 0) --  !
    for i = 0, 11 do
        BlzFrameClearAllPoints(BlzGetFrameByName("CommandButton_" .. i, 0))
        BlzFrameSetAbsPoint(BlzGetFrameByName("CommandButton_" .. i, 0), FRAMEPOINT_CENTER, 0, -0.1)
    end
    BlzHideOriginFrames(true)-- 
    BlzFrameSetScale(BlzFrameGetChild(BlzGetFrameByName("ConsoleUI", 0), 5), 0.001) --   
end

function MenuFrame()
    BlzFrameSetVisible(BlzGetFrameByName("UpperButtonBarFrame", 0), true)
    for i = 0, 3 do
        --local i=0
        local f10 = BlzGetOriginFrame(ORIGIN_FRAME_SYSTEM_BUTTON, i)
        if i == 0 then
            BlzFrameSetParent(f10, BlzGetFrameByName("ConsoleUIBackdrop", 0))
            BlzFrameSetVisible(f10, true)
            BlzFrameClearAllPoints(f10)
            BlzFrameSetAbsPoint(f10, FRAMEPOINT_CENTER, 0.65 + (0.08 * 2), 0.59)
        elseif i == 1 then
            BlzFrameSetVisible(f10, false)
        elseif i == 2 then
            BlzFrameSetParent(f10, BlzGetFrameByName("ConsoleUIBackdrop", 0))
            BlzFrameSetVisible(f10, true)
            BlzFrameClearAllPoints(f10)
            BlzFrameSetAbsPoint(f10, FRAMEPOINT_CENTER, 0.65 + (0.08 * 1), 0.59)
        elseif i == 3 then
            BlzFrameSetParent(f10, BlzGetFrameByName("ConsoleUIBackdrop", 0))
            BlzFrameSetVisible(f10, true)
            BlzFrameClearAllPoints(f10)
            BlzFrameSetAbsPoint(f10, FRAMEPOINT_CENTER, 0.65 + (0.08 * i), 0.59)
        end
    end
    HideToolTips()
end

WindowTimer = {}
WindowTimerIndex = 0
function CreateAndStartClock(x, y, reverse, sec, min, h, parentFH)
    if not parentFH then
        parentFH = BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0)
    end
    local charges = BlzCreateFrameByType("BACKDROP", "Face", parentFH, "", 0)
    BlzFrameSetParent(charges, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    local new_FrameChargesText = BlzCreateFrameByType("TEXT", "ButtonChargesText", charges, "", 0)

    if not x then
        x = 0.4
    end
    if not y then
        y = 0.58
    end

    if not sec then
        sec = 0 -- 
    end
    if not min then
        min = 0 --  
    end
    if not h then
        h = 23 --  
    end


    if not WindowTimer[1] then
        WindowTimer[1] = {
            textFH = new_FrameChargesText,
            sec = sec,
            min = min,
            h = h
        }

    end
    local data=WindowTimer[1]

    --BlzFrameSetTexture(charges, "WhiteStaticFlat", 0, true)
    BlzFrameSetSize(charges, 0.0001, 0.0001)
    BlzFrameSetAbsPoint(charges, FRAMEPOINT_CENTER, x, y)
    BlzFrameSetText(new_FrameChargesText, Zero(0) .. ":" .. Zero(0) .. ":" .. Zero(0))
    BlzFrameSetPoint(new_FrameChargesText, FRAMEPOINT_CENTER, charges, FRAMEPOINT_CENTER, 0., 0.)

    --BlzFrameSetScale(new_FrameChargesText,1.5)

    TimerStart(CreateTimer(), 1, true, function()
        if not reverse then
            data.sec = data.sec + 1

            if data.sec >= 60 then
                data.sec = 0
                data.min = data.min + 1
            end
            if data.min >= 60 then
                data.min = 0
                data.h = data.h + 1
            end
            if data.min <0 then
                data.min=0
            end
        else
            --  
            sec = sec - 1
            if sec <= 0 then
                sec = 59
                min = min - 1
                if min < 0 then
                    --print("  ")
                    DEFENSEND = true
                    BlzDestroyFrame(charges)
                    DestroyTimer(GetExpiredTimer())
                end
            end

            if min <= 0 then
                if h > 0 then
                    min = 59
                    h = h - 1
                end
                min = 0
            end
            if sec <= 0 and min <= 0 and h <= 0 then
                print("   ")
                BlzDestroyFrame(charges)
                DestroyTimer(GetExpiredTimer())
            end
        end

        BlzFrameSetText(new_FrameChargesText, Zero(data.h) .. ":" .. Zero(data.min) .. ":" .. Zero(data.sec))
    end)
    return charges
end
function AddTimeToTimer(charges, h, min, sec)
    local data=WindowTimer[1]
    data.min=data.min+min
end

function Zero(s)
    local ns = ""
    if string.len(s) == 1 then
        ns = "0" .. s
    else
        ns = s
    end
    return ns
end

function HideToolTips()
    BlzFrameClearAllPoints(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0))
    BlzFrameClearAllPoints(BlzGetOriginFrame(ORIGIN_FRAME_TOOLTIP, 0))
    BlzFrameSetVisible(BlzGetOriginFrame(ORIGIN_FRAME_TOOLTIP, 0), false)
    BlzFrameSetVisible(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0), false)
    BlzFrameSetAbsPoint(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0), FRAMEPOINT_CENTER, 0.75, 0.55)
    BlzFrameSetAbsPoint(BlzGetOriginFrame(ORIGIN_FRAME_TOOLTIP, 0), FRAMEPOINT_CENTER, 0.75, 0.55)
    BlzFrameSetAlpha(BlzGetOriginFrame(ORIGIN_FRAME_TOOLTIP, 0), 0)
    BlzFrameSetAlpha(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0), 0)
end

function DrawSelectionPortrait(state)
    local x, y = 0.04, 0.56
    local Portrait = BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0)-- BlzGetFrameByName("Portrait",0)
    --BlzEnableUIAutoPosition(false)
    BlzFrameClearAllPoints(Portrait)
    BlzFrameSetSize(Portrait, 0.03, 0.04)
    BlzFrameSetParent(Portrait, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetAbsPoint(Portrait, FRAMEPOINT_CENTER, x, y)
    BlzFrameSetVisible(Portrait, state)

    --CreateRamaSprite("NeonBlue (2)", Portrait, nil, 0.6)
    --[[
    local charges = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0), "", 0)
    BlzFrameSetParent(charges, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(charges, "WhiteStatic", 0, true)
    BlzFrameSetSize(charges, 0.095, 0.095)
    BlzFrameSetAbsPoint(charges, FRAMEPOINT_CENTER, -0.068,y)
]]
    --BlzFrameSetPoint(charges, FRAMEPOINT_CENTER, Portrait, FRAMEPOINT_CENTER, 0, 0)
end

function DrawSelectionPortrait1(state)

    local Portrait = BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0)-- BlzGetFrameByName("Portrait",0)
    --print("-    ")
    BlzFrameClearAllPoints(Portrait)
    BlzFrameSetSize(Portrait, 0.001, 0.001)
    --BlzFrameSetParent(Portrait, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetAbsPoint(Portrait, FRAMEPOINT_LEFT, 0, 0)
    BlzFrameSetVisible(Portrait, true)
end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 12.03.2023 13:39
---
function CreateQTEFrame()
    local QTE = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(QTE, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(QTE, "HadesE", 0, true)
    BlzFrameSetSize(QTE, 0.05, 0.05)
    BlzFrameSetAbsPoint(QTE, FRAMEPOINT_CENTER, 0.44, 0.3)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", QTE, "", 0)
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, QTE, FRAMEPOINT_LEFT, 0.02, 0)
    BlzFrameSetText(text, ColorText2(" "))
    BlzFrameSetScale(text, 2)
    CreateJumpArrow(QTE)
    return QTE
end

function CreateJumpArrow(parent)
    local x = 0.02
    local speed = 0.1
    local arrow = BlzCreateFrameByType("BACKDROP", "Face", parent, "", 0)
    BlzFrameSetParent(arrow, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(arrow, "ArrowDown", 0, true)
    BlzFrameSetSize(arrow, 0.05, 0.05)
    local i = 0
    local duration = 5
    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        local y = math.sin(i) * x
        duration = duration - TIMER_PERIOD
        -- print(y)
        i = i + speed
        BlzFrameSetPoint(arrow, FRAMEPOINT_TOP, parent, FRAMEPOINT_TOP, 0, y + 0.04)
        if duration <= 0 then
            -- DestroyTimer(GetExpiredTimer())--   
            --BlzDestroyFrame(arrow)
        end
    end)
    return arrow
end

function CreateEActions()
    -----------------------------------------------------------------OSKEY_E
    local gg_trg_EventUpE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpE, Player(i), OSKEY_E, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseE and UnitAlive(data.UnitHero) then
            data.ReleaseE = true
            --StartEatingApple(data.UnitHero) -- !!
            --print(" ")
            if QTEReadyToPress then
                QTEReadyToPress = false
                --print("    QTE")
            end
            if data.ShowE then
                --       
                if data.CurrentQuest == "AllyPeonOnAnime" then
                    UnitRemoveAbility(data.QuestUnit, FourCC("A604"))
                    --print("    ")
                    CustomCinematicMode(true)
                    Trig_NudeCinematic_Actions() --   
                elseif data.CurrentQuest == "MagnetIsClosed" then
                    local r = GetRandomInt(1, 5)
                    if r == 1 then
                        PlayMonoSpeech("Speech\\Peon\\Magnit\\m"..r, "  23:00")
                    elseif r == 2 then
                        PlayMonoSpeech("Speech\\Peon\\Magnit\\m"..r, "   ")
                    elseif r == 3 then
                        PlayMonoSpeech("Speech\\Peon\\Magnit\\m"..r, "")
                    elseif r == 4 then
                        PlayMonoSpeech("Speech\\Peon\\Magnit\\m"..r, "  ")
                    elseif r == 5 then
                        PlayMonoSpeech("Speech\\Peon\\Magnit\\m"..r, " ,    ")
                    end
                elseif data.CurrentQuest == "Shop" then
                    --UnitRemoveAbility(data.QuestUnit,FourCC("A604"))
                    --print(" ")
                    CreateShop()
                    BlzFrameSetVisible(ShopTipFH, true)
                    DisableTrigger(gg_trg_EventUpE)
                    TimerStart(CreateTimer(), 1, false, function()
                        EnableTrigger(gg_trg_EventUpE)
                    end)
                elseif data.CurrentQuest == "KillWyvern" then
                    UnitRemoveAbility(data.QuestUnit, FourCC("A604"))
                    if not udg_WisDead then
                        Trig_MerchQuestCinematic_Actions()
                    else
                        --print("   ")
                        normal_sound("Speech\\CookQuest\\cook5")
                        UnitAddGold(data.UnitHero, 2000)
                    end
                elseif data.CurrentQuest == "EndGameCinematic" then
                    UnitRemoveAbility(data.QuestUnit, FourCC("A604"))
                    Trig_EndSinematicStart_Actions()
                    --print(" ")
                end
            end
        end
    end)

    local TrigDepressE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressE, Player(i), OSKEY_E, 0, false)
    end
    TriggerAddAction(TrigDepressE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseE = false
    end)
end

function CreateESCActions()
    -----------------------------------------------------------------OSKEY_ESC
    local gg_trg_EventUpESCAPE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpESCAPE, Player(i), OSKEY_ESCAPE, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpESCAPE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseESCAPE then
            data.ReleaseESCAPE = true
            --print(" ESCAPE")
            CloseShop() --TODO ,     ESCAPE,  

        end
    end)

    local TrigDepressESCAPE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressESCAPE, Player(i), OSKEY_ESCAPE, 0, false)
    end
    TriggerAddAction(TrigDepressESCAPE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseESCAPE = false
    end)
end

function CreateInsertActions()
    --  
    -----------------------------------------------------------------OSKEY_INSERT OSKEY_C
    local gg_trg_EventUpINSERT = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpINSERT, Player(i), OSKEY_C, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpINSERT, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseINSERT then
            data.ReleaseINSERT = true
            --print("Insert")
            if not data.IsMoving then
                if not data.sit then
                    SetUnitAnimationByIndex(data.UnitHero, 20) -- 26 
                    data.sit = true
                else
                    ResetUnitAnimation(data.UnitHero)
                    data.sit = false
                end
            end

        end
    end)
    local TrigDepressINSERT = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressINSERT, Player(i), OSKEY_C, 0, false)
    end
    TriggerAddAction(TrigDepressINSERT, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseINSERT = false
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 12.03.2023 16:11
---
function CreateMouseHelper()
    local wood=BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetTexture(wood, "RMB", 0, true)
    BlzFrameSetSize(wood, 0.15, 0.15)
    BlzFrameSetAbsPoint(wood, FRAMEPOINT_CENTER,0.1 , 0.4)

    local new_FrameChargesText = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetAbsPoint(new_FrameChargesText, FRAMEPOINT_CENTER, 0.1, 0.31)
    BlzFrameSetText(new_FrameChargesText, " LMB,  ")

    local new_FrameChargesText2 = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetAbsPoint(new_FrameChargesText2, FRAMEPOINT_CENTER, 0.1, 0.17)
    BlzFrameSetText(new_FrameChargesText2, " WASD,   \n RMB,     \n R    ")

    local new_FrameChargesText3 = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetAbsPoint(new_FrameChargesText3, FRAMEPOINT_CENTER, 0.1, 0.29)
    BlzFrameSetText(new_FrameChargesText3, "Space -    ")

    local wasd = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetTexture(wasd, "WASD", 0, true)
    BlzFrameSetSize(wasd, 0.10, 0.10)
    BlzFrameSetAbsPoint(wasd, FRAMEPOINT_CENTER, 0.1, 0.25)

    TimerStart(CreateTimer(), 1, true, function()
        local data = HERO[0]

        if data.MHoldSec >= 6 then
            BlzFrameSetVisible(new_FrameChargesText, false)
            BlzFrameSetVisible(wood, false)
            BlzFrameSetVisible(wasd, false)
            BlzFrameSetVisible(new_FrameChargesText2, false)
            BlzFrameSetVisible(new_FrameChargesText3, false)
        end
    end)
end

function CreateGirlandUI()
    local g1 = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(g1, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(g1, "UIGirland", 0, true)
    BlzFrameSetSize(g1, 0.10, 0.4)
    BlzFrameSetAbsPoint(g1, FRAMEPOINT_CENTER, -0.12, 0.4)

    local g2 = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(g2, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(g2, "UIGirland", 0, true)
    BlzFrameSetSize(g2, 0.10, 0.4)
    BlzFrameSetAbsPoint(g2, FRAMEPOINT_CENTER, 0.93, 0.4)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 12.03.2023 17:58
---
function CreateBossIntro()
    CreateMoveTextureTimed(5)
end
function CreateMoveTextureTimed(duration)
    local parenBOX=BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(parenBOX, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    local elements={}
    local xs,ys=-2,0.3
    local size=0.12
    for i=0,64 do
        local element = BlzCreateFrameByType("BACKDROP", "Face", parenBOX, "", 0)
        BlzFrameSetTexture(element, "IceLeft2Right", 0, true)
        BlzFrameSetSize(element, size, size)
        BlzFrameSetAbsPoint(element,FRAMEPOINT_CENTER,xs+size*i,ys)
        table.insert(elements,element)
    end
    local speed=0.01
    local x=0
    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", parenBOX, "", 0)
    BlzFrameSetAbsPoint(text,FRAMEPOINT_CENTER,0.4,0.3)
    BlzFrameSetText(text, ColorText2Black(" "))
    BlzFrameSetScale(text, 6)

    TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
        x=x+speed
        duration=duration-TIMER_PERIOD
        for i=1,#elements do
            BlzFrameSetAbsPoint(elements[i],FRAMEPOINT_CENTER,x+xs+size*i,ys)
        end
        if duration <= 0 then
            DestroyTimer(GetExpiredTimer())
            BlzDestroyFrame(parenBOX)
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 13.12.2021 0:39
---
function Blink2Point(unit, x, y)
    DestroyEffect(AddSpecialEffect("BlinkCasterNoOmni", GetUnitXY(unit)))
    SetUnitPositionSmooth(unit, x,y)
    DestroyEffect(AddSpecialEffect("BlinkCasterNoOmni", GetUnitXY(unit)))
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 01.01.2023 17:35
---
function CastSnowBall(data, directionAngle)
    local effModel = "Firebrand Shot Silver"--snowball
    --effModel="PrismBeam_Initiate"

    local hero = data.UnitHero

    if data.AttackIsReady and not data.SpaceForce and UnitAlive(hero) and not FREE_CAMERA and not IsUnitStunned(hero) and not BlzFrameIsVisible(SHOP) then
        if GetUnitTypeId(hero) == HeroID then
            --WolfSlashAttack(hero) --  
            SetUnitTimeScale(hero,1)
            BlzSetUnitFacingEx(hero, directionAngle)
            SetUnitAnimationByIndex(hero, 3)
            data.AttackIsReady = false
            data.UnitInAttack = true
            --CreateBeemLighting(hero)
            TimerStart(CreateTimer(), 0.15, false, function()
                --  
                CreateAndForceBullet(hero, directionAngle, 40, effModel,nil,nil,data.BaseDamage,data.MaxAttackRange,80)
                data.StatSnow=data.StatSnow+1
                data.damageIsBouncing=true
                if data.MorozkoCD then
                    if data.MorozkoCDCurrent<=0 then
                        local x,y=MoveXY(GetUnitX(hero),GetUnitY(hero),20,directionAngle-90)
                        CreateAndForceBullet(hero, directionAngle, 40, effModel,x,y,data.BaseDamage,data.MaxAttackRange,50)

                        data.MorozkoCDCurrent=data.MorozkoCD
                        TimerStart(CreateTimer(), data.MorozkoCD, false, function()
                            data.MorozkoCDCurrent=0
                        end)
                    end
                end
                data.MHoldSec = data.MHoldSec + 1
                data.UnitInAttack = false

                local xEnd,yEnd=MoveXY(GetUnitX(hero),GetUnitY(hero),50,directionAngle)
                --StartHFOO(hero,xEnd,yEnd)

            end)
            TimerStart(CreateTimer(), data.AttackInterval, false, function() --0.35
                data.AttackIsReady = true
                if UnitAlive(hero) and not data.IsMoving and not LockAnimAnimation(data) then
                    ResetUnitAnimation(hero)
                end
                DestroyTimer(GetExpiredTimer())
            end)
        elseif GetUnitTypeId(hero) == FourCC("n002") then
            --   
           -- print("  ")
            WolfAttackPeon(hero, directionAngle)
        end
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 29.09.2023 15:11
---
function CHKBouncing(x, y, nx, ny, speed)
    -- ,  
    local angle = AngleBetweenXY(x, y, nx, ny) / bj_DEGTORAD
    local has = false
    if not IsTerrainWalkable(nx, ny) then
        local b, d = PointContentDestructable(nx, ny, 100, false)
        if GetDestructableTypeId(d) == FourCC("B005") or GetDestructableTypeId(d) == FourCC("B00C") then
            has = false
        else
            --print("doadName 1",GetDestructableName(d))
            angle = 0 - (AngleBetweenXY(nx, ny, x, y) / bj_DEGTORAD)
            nx, ny = MoveXY(x, y, speed, angle)
            has = true
        end
        if not IsTerrainWalkable(nx, ny) then
            b, d = PointContentDestructable(nx, ny, 100, false)
            if GetDestructableTypeId(d) == FourCC("B005") or GetDestructableTypeId(d) == FourCC("B00C") then
                has = false
            else
                --print("doadName 2",GetDestructableName(d))
                angle = angle - 180
                has = true
            end

        end
    end
    return angle, has
end

function CHKBouncing2(x, y, nx, ny, speed)
    -- ,   
    local angle = AngleBetweenXY(x, y, nx, ny) / bj_DEGTORAD
    local has = false
    if not IsTerrainWalkable(nx, ny) then
        angle = 0 - (AngleBetweenXY(nx, ny, x, y) / bj_DEGTORAD)
        nx, ny = MoveXY(x, y, speed, angle)
        has = true
        if not IsTerrainWalkable(nx, ny) then
            angle = angle - 180
            has = true
        end
    end
    return angle, has
end

function MakeUnitInfinityBouncing(unit)
    local speed = GetRandomInt(5,10)
    local angle = speed
    SetUnitPathing(unit, false)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        local x, y = GetUnitXY(unit)
        local nx, ny = MoveXY(x, y, speed, angle)
        local bounceFact = false
        angle, bounceFact = CHKBouncing2(x, y, nx, ny, speed) ---------------- 
        nx, ny = MoveXY(x, y, speed, angle)
        if bounceFact then
            nx, ny = MoveXY(x, y, speed, angle)
        end
        SetUnitPositionSmooth(unit, nx, ny)
        UnitDamageArea(unit, 30, nx, ny, 60)
        BlzSetUnitFacingEx(unit, GetUnitFacing(unit) + speed)
        if not UnitAlive(unit) then
            DestroyTimer(GetExpiredTimer())
        end
    end)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 21.12.2021 15:10
---
GNext=0.039
function CreateHPBar(data)
    local BoxBarParent = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetVisible(BoxBarParent, GetLocalPlayer() == Player(data.pid))
    local x, y = -0.08, 0.588
    local hero = data.UnitHero


    --BlzFrameSetAlpha(into, 128)

    local chargesBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(chargesBox, "Replaceabletextures\\Teamcolor\\Teamcolor06.blp", 0, true) --HPElement
    BlzFrameSetSize(chargesBox, GNext, GNext)
    BlzFrameSetAbsPoint(chargesBox, FRAMEPOINT_LEFT, x + 0.004, y)
    BlzFrameSetAlpha(chargesBox, 128)

    local into = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(into, "into", 0, true)
    BlzFrameSetSize(into, GNext * 5, GNext)
    BlzFrameSetAbsPoint(into, FRAMEPOINT_LEFT, x, y)
    BlzFrameSetAlpha(into, 128)
    BlzFrameSetFocus(into,true)

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textCurrent, FRAMEPOINT_LEFT, into, FRAMEPOINT_LEFT, 0.002, 0)
    local textMax = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textMax, FRAMEPOINT_RIGHT, into, FRAMEPOINT_RIGHT, -0.002, 0)


    --
    BlzFrameSetParent(chargesBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textCurrent, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textMax, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(into, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    TimerStart(CreateTimer(), 0.05, true, function()
        local hp = 0
        hp = GetUnitLifePercent(hero)
        if not UnitAlive(hero) then
            hp = 0
            --print(" ,    ",hp)
            BlzFrameSetSize(into, 0, 0)
            --BlzFrameSetVisible(into, false)
            BlzFrameSetText(textCurrent, hp)
            BlzFrameSetText(textMax, R2I(BlzGetUnitMaxHP(hero)))
        else
            --BlzFrameSetVisible(into, GetLocalPlayer() == GetOwningPlayer(hero))
            BlzFrameSetText(textCurrent, R2I(GetUnitState(hero, UNIT_STATE_LIFE)))
            BlzFrameSetText(textMax, R2I(BlzGetUnitMaxHP(hero)))
            BlzFrameSetSize(chargesBox, 4.82 * hp * GNext / 100, GNext * 0.5)
            BlzFrameSetAlpha(chargesBox, 128)
        end
    end)
end

function CreateMANABar(data)
    local BoxBarParent = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetVisible(BoxBarParent, GetLocalPlayer() == Player(data.pid))
    local x, y = -0.08, 0.588 - GNext / 2
    local hero = data.UnitHero


    --BlzFrameSetAlpha(into, 128)

    local chargesBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(chargesBox, "Replaceabletextures\\Teamcolor\\Teamcolor01.blp", 0, true) --HPElement
    BlzFrameSetSize(chargesBox, GNext, GNext)
    BlzFrameSetAbsPoint(chargesBox, FRAMEPOINT_LEFT, x + 0.004, y)
    BlzFrameSetAlpha(chargesBox, 128)

    local into = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(into, "into", 0, true)
    BlzFrameSetSize(into, GNext * 5, GNext)
    BlzFrameSetAbsPoint(into, FRAMEPOINT_LEFT, x, y)
    BlzFrameSetAlpha(into, 128)

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textCurrent, FRAMEPOINT_LEFT, into, FRAMEPOINT_LEFT, 0.002, 0)
    local textMax = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textMax, FRAMEPOINT_RIGHT, into, FRAMEPOINT_RIGHT, -0.002, 0)


    --
    BlzFrameSetParent(chargesBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textCurrent, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textMax, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(into, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    TimerStart(CreateTimer(), 0.05, true, function()
        local hp = 0
        hp = GetUnitManaPercent(hero)
        if not UnitAlive(hero) then
            hp = 0
            --print(" ,    ",hp)
            BlzFrameSetSize(into, 0, 0)
            --BlzFrameSetVisible(into, false)
            BlzFrameSetText(textCurrent, hp)
            BlzFrameSetText(textMax, R2I(BlzGetUnitMaxMana(hero)))
        else
            --BlzFrameSetVisible(into, GetLocalPlayer() == GetOwningPlayer(hero))
            BlzFrameSetText(textCurrent, R2I(GetUnitState(hero, UNIT_STATE_MANA)))
            BlzFrameSetText(textMax, R2I(BlzGetUnitMaxMana(hero)))
            BlzFrameSetSize(chargesBox, 4.82 * hp * GNext / 100, GNext * 0.5)
            BlzFrameSetAlpha(chargesBox, 128)
        end
    end)
end

function CreateEXPBar(data)
    local BoxBarParent = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetVisible(BoxBarParent, GetLocalPlayer() == Player(data.pid))
    local x, y = -0.08, 0.588 - GNext
    local hero = data.UnitHero


    --BlzFrameSetAlpha(into, 128)

    local chargesBox = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(chargesBox, "Replaceabletextures\\Teamcolor\\Teamcolor03.blp", 0, true) --HPElement
    BlzFrameSetSize(chargesBox, GNext, GNext)
    BlzFrameSetAbsPoint(chargesBox, FRAMEPOINT_LEFT, x + 0.004, y)
    BlzFrameSetAlpha(chargesBox, 128)

    local into = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BoxBarParent, '', 0)
    BlzFrameSetTexture(into, "into", 0, true)
    BlzFrameSetSize(into, GNext * 5, GNext)
    BlzFrameSetAbsPoint(into, FRAMEPOINT_LEFT, x, y)
    BlzFrameSetAlpha(into, 128)

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textCurrent, FRAMEPOINT_LEFT, into, FRAMEPOINT_LEFT, 0.002, 0)
    local textMax = BlzCreateFrameByType("TEXT", "ButtonChargesText", BoxBarParent, "", 0)
    BlzFrameSetPoint(textMax, FRAMEPOINT_RIGHT, into, FRAMEPOINT_RIGHT, -0.002, 0)


    --
    BlzFrameSetParent(chargesBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textCurrent, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(textMax, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(into, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    TimerStart(CreateTimer(), 0.05, true, function()
        local hp = 0
        hp = StatePercent(data.curExp-ExpTable[data.curHeroLvl],ExpTable[data.curHeroLvl+1]-ExpTable[data.curHeroLvl])

        --print(hp)

        if not UnitAlive(hero) then
            hp = 0
            --print(" ,    ",hp)
           -- BlzFrameSetSize(into, 0, 0)
            --BlzFrameSetVisible(into, false)
            --BlzFrameSetText(textCurrent, hp)
            --BlzFrameSetText(textMax, R2I(BlzGetUnitMaxMana(hero)))
        else
            --BlzFrameSetVisible(into, GetLocalPlayer() == GetOwningPlayer(hero))
            BlzFrameSetText(textCurrent, R2I(data.curExp))
            BlzFrameSetText(textMax, R2I(ExpTable[data.curHeroLvl+1]))
            BlzFrameSetSize(chargesBox, 4.82 * hp * GNext / 100, GNext * 0.5)
            BlzFrameSetAlpha(chargesBox, 128)
        end
    end)
end


function StatePercent(value,maxValue)
	--  Return 0 for null units.
	if (maxValue == 0) then
		return 0.0
	end
	return value / maxValue * 100.0
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 08.03.2023 13:38
---
function CustomCinematicMode(state)
    --CinematicModeBJ(state, GetPlayersAll())
    if state then
        SetMusicVolumeBJ(20)
    else
        SetMusicVolumeBJ(100)
    end
    BlzHideOriginFrames(not state)
    local data=HERO[0]
    FREE_CAMERA=state
    data.ReleaseW=false
    data.ReleaseA=false
    data.ReleaseS=false
    data.ReleaseD=false
    data.IsMoving=false
    ResetUnitAnimation(data.UnitHero)
    BlzFrameSetVisible(BlzGetFrameByName("UpperButtonBarFrame", 0), not state)
    --BlzFrameSetVisible(BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0), not state)
    BlzFrameSetVisible(BlzGetFrameByName("ResourceBarFrame", 0), not state)
    DrawSelectionPortrait(not state)
    if BugsFH[1] then
        for i=1,#BugsFH do
            BlzFrameSetVisible(BugsFH[i],false)
            --print("   ?")
        end
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 15.11.2023 22:57
---
function InitDashVisualCharges(data)
    print(data.DashCharges, " ")
    data.TableDashEffect = {}
    for i = 1, data.DashCharges do
        local eff = AddSpecialEffectTarget("1starAttach"..i, data.UnitHero,"origin")
        table.insert(data.TableDashEffect, eff)
    end
end


function RepositionCharges(data)
    if data.DashCharges >= 3 then
        BlzPlaySpecialEffect(data.TableDashEffect[3],ANIM_TYPE_STAND)

    else
        BlzPlaySpecialEffect(data.TableDashEffect[3],ANIM_TYPE_DEATH)
    end
    if data.DashCharges >= 2 then
        BlzPlaySpecialEffect(data.TableDashEffect[2],ANIM_TYPE_STAND)

    else
        BlzPlaySpecialEffect(data.TableDashEffect[2],ANIM_TYPE_DEATH)
    end
    if data.DashCharges >= 1 then
        BlzPlaySpecialEffect(data.TableDashEffect[1],ANIM_TYPE_STAND)

    else
        BlzPlaySpecialEffect(data.TableDashEffect[1],ANIM_TYPE_DEATH)
    end
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 05.11.2023 15:53
---
IsUnitFall = {}
function UnitStartFallAnim(hero, maxZ)
    IsUnitFall[GetHandleId(hero)] = true
    StunUnit(hero, 5)
    SetUnitTimeScale(hero, 1)
    local z = GetUnitZ(hero) + maxZ
    local zNormal = GetUnitZ(hero)
    SetUnitZ(hero, z)
    local speed = 20
    TimerStart(CreateTimer(), 0.1, false, function()
        if GetUnitTypeId(hero) == FourCC("O000") then
            SetUnitAnimationByIndex(hero, 15)--  ?
        end
    end)
    local sb = false
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        z = z - speed
        SetUnitZ(hero, z)
        if z <= zNormal and not sb then
            sb = true
            local r = GetRandomInt(1, 3)
            local s = normal_sound("Sound\\Units\\Combat\\MetalHeavyBashFlesh" .. r, GetUnitXY(hero))
            local grow = GetRandomReal(0.5, 1)
            --print(grow)
            SetSoundPitch(s, grow)
            KillDestructableByTypeInPoint(ButtonsIDTable, 200, GetUnitXY(hero))
            if GetUnitTypeId(hero) == FourCC("O000") then
                r = GetRandomInt(1, 8)
                if r == 1 then
                    normal_sound("spine-bone-break-1", GetUnitXY(hero))
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "    ")
                elseif r == 2 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "  ")
                elseif r == 3 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "   ")
                elseif r == 4 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "       ")
                elseif r == 5 then
                    normal_sound("spine-bone-break-1", GetUnitXY(hero))
                elseif r == 6 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "      ")
                elseif r == 7 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, "    5 ")
                elseif r == 8 then
                    PlayMonoSpeech("Speech\\Peon\\Fall\\F" .. r, " ....  ,   ")
                end
            end
        end
        if z <= -10 then
            DestroyTimer(GetExpiredTimer())
            UnitRemoveStun(hero)
            IsUnitFall[GetHandleId(hero)] = false
        end
    end)
end

function UnitFallGround(hero, angle, dist, flag)
    StunUnit(hero, 2)
    if not flag then
        flag = { "RemoveStun" }
    end
    local diff = angle - GetUnitFacing(hero)
    --print(diff)
    if GetRandomInt(0, 1) == 0 then
        --print("  ?")
        SetUnitAnimationByIndex(hero, 20) -- 
    else
        SetUnitAnimationByIndex(hero, 23) -- 
    end
    local speed = dist / 20 --   
    --print(" ", angle, "  ", GetUnitFacing(hero),"",)
    UnitAddForceSimple(hero, angle, speed, dist, "ignore")
    MakeUnitArtMissile(hero, hero, angle, speed, dist, 150, flag)
end

function JumpToCenterRect(rect)
    --JumpToCenterRect(gg_rct_Exit00)
    --gg_rct_Region_038
    StunUnit(udg_HERO, 2)
    local x, y = GetRectCenterX(rect), GetRectCenterY(rect)
    local dist = DistanceBetweenXY(x, y, GetUnitXY(udg_HERO))
    local angle = -180 + AngleBetweenXY(x, y, GetUnitXY(udg_HERO)) / bj_DEGTORAD
    UnitAddJumpForce(udg_HERO, angle, 40, dist, 400)
    --ResetUnitCustomPause(boss)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 12.03.2023 19:30
---
function FallCoffinMeme(hero)
    local data = GetUnitData(hero)
    local x, y = GetUnitXY(hero)
    local new = CreateUnit(GetOwningPlayer(hero), FourCC("n00C"), x, y, 0)
    local zs = GetTerrainZ(x, y)
    local z = zs + 1000
    local speed = 40
    SetUnitZ(new, z)
    local s=normal_sound("DeathSound", GetUnitXY(hero))
    SetSoundVolume(s,30)
    SetMusicVolumeBJ(15)
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        z = z - speed
        SetUnitZ(new, z)
        if z <= zs then
            DestroyTimer(GetExpiredTimer())
            DestroyEffect(AddSpecialEffect("ThunderclapCasterClassic", GetUnitXY(new)))
            --IssuePointOrder(new, "move", data.ResPointX, data.ResPointY)
            SetUnitMoveSpeed(new, 700)
            local angle = -180 + AngleBetweenXY(data.ResPointX, data.ResPointY, GetUnitXY(hero)) / bj_DEGTORAD
            SetUnitFacing(new,angle)
            UnitAddForceSimple(new, angle, 5, 1000)
            SetUnitTimeScale(new, 2)
            TimerStart(CreateTimer(), 3, false, function()
                RemoveUnit(new)
                SetMusicVolumeBJ(100)
                SetSoundVolume(s,0)
            end)
        end
    end)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 11.12.2021 18:02
---
function CreatePeonForPlayer(data)
    --print("1")

    if IsPlayerSlotState(Player(data.pid), PLAYER_SLOT_STATE_PLAYING) and GetPlayerController(Player(data.pid)) == MAP_CONTROL_USER then
        PlayerIsPlaying[data.pid] = true
        --print(" ")

        --CreateDownInterface(data)
        local x, y = GetPlayerStartLocationX(Player(data.pid)), GetPlayerStartLocationY(Player(data.pid))
        data.UnitHero = CreateUnit(Player(data.pid), HeroID, x, y, 0)
        udg_HERO = data.UnitHero
        UnitAddForceSimple(data.UnitHero, 90, 5, 15)
        SelectUnitForPlayerSingle(data.UnitHero, Player(data.pid))
        UnitAddAbility(data.UnitHero, FourCC("Abun"))
        UnitRemoveType(data.UnitHero, UNIT_TYPE_PEON)
        SuspendHeroXP(data.UnitHero, true)
        InitWASD(data.UnitHero)
        --CreatePeonHPBAR(data)
        InitRegistryEvent(data.UnitHero)
        AddPeonMAXHP(data, 2)
        --AddPeonMAXHP(data, 3)
        AddSpecialEffectTarget("HeroGlow", data.UnitHero, "origin")
        IssuePointOrder(data.UnitHero, "smart", GetUnitXY(data.UnitHero))
        InitDashVisualCharges(data)
        --InitInventory(data)

        --CreateHPBar(data)
        --CreateMANABar(data)

        --InitExpSystem(data)
        --CreateEXPBar(data)

        --CreateStatPanel(data)
        --CreateWarningMessage(data,"Message1234567890AAAA")
        --SetDNCForPlayer(data.UnitHero,"Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl"," ")
    end
end
ShowESystem = {

}
function InitRegistryEvent(hero)
    local enterTrig = CreateTrigger()
    local range = 200
    TriggerRegisterUnitInRange(enterTrig, hero, range, nil)
    TriggerAddAction(enterTrig, function()
        local entering = GetTriggerUnit()
        --print(GetUnitName(entering))
        if GetUnitTypeId(entering) == FourCC("h003") then
            --  
            KillUnit(entering)
            QuestSetCompletedBJ(udg_QYetty, true)
            --UnlockCard("CardOlivie",2)
        elseif GetUnitTypeId(entering) == FourCC("h008") then
            --  
            KillUnit(entering)
        elseif GetUnitAbilityLevel(entering, FourCC("A604")) >= 1 then

            local h = GetHandleId(entering)
            local data = GetUnitData(hero)
            if not data.ShowE then
                --print(" ")
                data.ShowE = true
                if GetUnitTypeId(entering) == FourCC("o002") then
                    --    
                    data.CurrentQuest = "AllyPeonOnAnime"
                elseif GetUnitTypeId(entering) == FourCC("h00D") then
                    data.CurrentQuest = "Shop"
                elseif GetUnitTypeId(entering) == FourCC("h00A") then
                    data.CurrentQuest = "MagnetIsClosed"
                elseif GetUnitTypeId(entering) == FourCC("h007") then
                    data.CurrentQuest = "KillWyvern" --     
                elseif GetUnitTypeId(entering) == FourCC("Oths") then
                    data.CurrentQuest = "EndGameCinematic" --   
                end
                data.QuestUnit = entering
                local eff = AddSpecialEffect("ActionsE", GetUnitXY(entering))
                TimerStart(CreateTimer(), 0.1, true, function()
                    if not IsUnitInRange(hero, entering, range * 1.2) or GetUnitAbilityLevel(entering, FourCC("A604")) == 0 then
                        --print("     ")
                        data.CurrentQuest = ""
                        data.QuestUnit = nil
                        DestroyTimer(GetExpiredTimer())
                        DestroyEffect(eff)
                        BlzSetSpecialEffectPosition(eff, 0, 0, 0)
                        data.ShowE = false
                    end
                end)
            end
        end
    end)
    -- 
    local enterTrig500 = CreateTrigger()
    TriggerRegisterUnitInRange(enterTrig500, hero, 500, nil)
    TriggerAddAction(enterTrig500, function()
        local entering = GetTriggerUnit()
        --print(GetUnitName(entering))
        if GetUnitTypeId(entering) == FourCC("h004") then
            -- 
            --print(" ")
            local data = GetUnitData(hero)
            local x, y = GetUnitXY(entering)
            if data.ResPointX == x then

            else
                --print("  ")
                QuestSetCompletedBJ(udg_QCHKPoint, true)
                DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster", GetUnitXY(entering)))
                local r = GetRandomInt(1, 8)
                if r == 1 then
                    PlayMonoSpeech("Speech\\Peon\\CHKPoint\\1", "  ")
                elseif r == 2 then
                    PlayMonoSpeech("Speech\\Peon\\CHKPoint\\2", "      ")
                elseif r == 3 then
                    PlayMonoSpeech("Speech\\Peon\\CHKPoint\\3", " ,     3 ...")
                elseif r == 4 then
                    PlayMonoSpeech("Speech\\Peon\\CHKPoint\\4", " ")
                elseif r == 5 then
                    PlayMonoSpeech("Speech\\Peon\\CHKPoint\\5", "     ?")
                end
            end
            data.ResPointX, data.ResPointY = x, y

        end
        if GetUnitTypeId(entering) == FourCC("e003") then
            --   
            if not SnowManDefenceGame then
                --StartSnowManDefence()
                print("       ")
            end
        end
        if GetUnitTypeId(entering) == FourCC("n002") then
            --   
            if not StartWolOnce then
                StartWolfAI()
            end
        end
    end)
end

function AddPeonMAXHP(data, k)
    if not data.HPMAX then
        --print("  ")
        data.HPMAX = 5
        data.HPTableFH = {}
        data.HPCount = 0
        data.CurrentHP = 0
    end
    for i = 1, k do
        CreateCandyHPBAR(data)

    end
end

function CreateCandyHPBAR(data)
    local step = 0.025
    local hpBarBox = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetParent(hpBarBox, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    local HPfh = BlzCreateFrameByType("BACKDROP", "Face", hpBarBox, "", 0)
    BlzFrameSetTexture(HPfh, "HPCANDY", 0, true)
    BlzFrameSetSize(HPfh, 0.03, 0.03)
    BlzFrameSetAbsPoint(HPfh, FRAMEPOINT_CENTER, -0.048 + step * data.HPCount, 0.56)
    data.HPCount = data.HPCount + 1
    data.HPTableFH[data.HPCount] = HPfh
    data.CurrentHP = data.CurrentHP + 1
end

function HeroCandyGetDamage(data, damageSource)
    --[[
    local  bugs = BlzCreateFrameByType("SPRITE", "SpriteName", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetAbsPoint(bugs, FRAMEPOINT_CENTER, 0.189, 0.296)
    BlzFrameSetSize(bugs, 0.01, 0.01)
    BlzFrameSetModel(bugs, "bugs2", 0)
    BlzFrameSetScale(bugs, 0.00058)
    TimerStart(CreateTimer(), 3, false, function()
        BlzDestroyFrame(bugs)
    end)]]
    CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 3, "Vignette\\VignetteDamage", 255, 255, 255, 0)

    local hero = data.UnitHero
    HealUnit(hero)
    BlinkUnit(hero, 1)
    local angle = AngleBetweenUnits(damageSource, hero)
    UnitAddForceSimple(hero, angle, 25, 80)
    SetUnitInvulnerable(hero, true)
    --SetUnitAnimationByIndex(hero,24)--  
    TimerStart(CreateTimer(), 1, false, function()
        SetUnitInvulnerable(hero, false)
    end)
    if not data.CurrentHP then
        data.CurrentHP = data.HPCount
    end
    BlzFrameSetTexture(data.HPTableFH[data.CurrentHP], "HPCANDYEMPTY", 0, true)
    data.CurrentHP = data.CurrentHP - 1
    --print(" ,  HP=" .. data.CurrentHP)
    if data.CurrentHP <= 0 then
        KillUnit(hero)
    end
end

function HeroCandyHeal(data, k)
    if not k then
        k = data.HPCount
    end
    --print(" "..)
    normal_sound("goulp1", GetUnitXY(data.UnitHero))
    for i = data.CurrentHP + 1, k + data.CurrentHP do
        BlzFrameSetTexture(data.HPTableFH[i], "HPCANDY", 0, true)
        if data.CurrentHP < data.HPCount then
            data.CurrentHP = data.CurrentHP + 1

        else
            -- print(" ")
        end
        -- print(i)
    end
end

function BlinkUnit(hero, timed)
    local period = 0.05
    local flag = false
    local data = GetUnitData(hero)
    SetUnitScale(hero, 0, 0, 0)
    TimerStart(CreateTimer(), period, true, function()
        timed = timed - period
        if UnitAlive(hero) then
            if flag then
                flag = false
                SetUnitScale(hero, 0, 0, 0)
            else
                flag = true
                SetUnitScale(hero, data.UnitScale, data.UnitScale, 1)
            end
        else
            DestroyTimer(GetExpiredTimer())
            SetUnitScale(hero, data.UnitScale, data.UnitScale, 1)
        end
        if timed <= 0 then
            DestroyTimer(GetExpiredTimer())
            SetUnitScale(hero, data.UnitScale, data.UnitScale, 1)
        end
    end)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 28.09.2023 20:17
---
---




function InitTrig_BallMove()
    gg_trg_BallMove = CreateTrigger()
    DisableTrigger(gg_trg_BallMove)
    TriggerRegisterTimerEventPeriodic(gg_trg_BallMove, 0.03)
    TriggerAddAction(gg_trg_BallMove, function()

        local x, y = GetUnitXY(udg_Ball)
        local nx, ny = MoveXY(x, y, udg_BallSpeed, udg_BallFacing)
        local bounceFact = false
        --udg_BallFacing = CHKBouncing2(x, y, nx, ny, udg_BallSpeed)


        udg_BallFacing, bounceFact = CHKBouncing2(x, y, nx, ny, udg_BallSpeed) ---------------- 
        nx, ny = MoveXY(x, y, udg_BallSpeed, udg_BallFacing)
        if bounceFact then
            nx, ny = MoveXY(x, y, udg_BallSpeed, udg_BallFacing)
        end

        SetUnitPositionSmooth(udg_Ball, nx, ny)
        udg_BallSpeed = udg_BallSpeed - 0.50
        --print(udg_BallSpeed)
        BlzSetUnitFacingEx(udg_Ball, GetUnitFacing(udg_Ball) + udg_BallSpeed)

        if udg_BallSpeed <= 0.00 then
            DisableTrigger(GetTriggeringTrigger())
        else
        end
    end)
end

function InitTrig_Init ()
    gg_trg_Init = CreateTrigger()
    TriggerRegisterTimerEventSingle(gg_trg_Init, 2.00)
    TriggerAddAction(gg_trg_Init, function()
        SetUnitPathing(udg_Ball, false)
        --udg_BallFacing = (0.00 - AngleBetweenPoints(udg_BallPoint, udg_BallTempPoint))
        udg_BallFacing = AngleBetweenPoints(udg_BallTempPoint, udg_BallPoint)
    end)
end

function InitTrig_BallInit ()
    gg_trg_BallInit = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_BallInit, udg_Ball, EVENT_UNIT_DAMAGED)
    TriggerAddAction(gg_trg_BallInit, function()
        --udg_Ball = gg_unit_e007_0258 --
        udg_BallPoint = GetUnitLoc(udg_Ball)
        if GetEventDamage() > 5 then
            udg_BallSpeed = udg_BallSpeed + 20
            udg_BallFacing = AngleBetweenPoints(GetUnitLoc(GetEventDamageSource()), udg_BallPoint)
            EnableTrigger(gg_trg_BallMove)

        end
        RemoveLocation(udg_BallPoint)
    end)
    --print("   ")
end
udg_BallSpeed = 0
function InitBounceOnGUI()
    InitTrig_BallInit()
    InitTrig_Init()
    InitTrig_BallMove()
end

function InitRicoshet()
    TempItem = CreateItem(FourCC('spsh'), 0.00, 0.00)
    TempGroup = CreateGroup()
    SetItemVisible(TempItem, false)
    print("  ")
    --InitBounceOnGUI()
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 17.12.2021 20:58
---
function SandStorm(boss, x, y,range)
    --local eff = AddSpecialEffect("SandAura", x, y)
    local duration = 4
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        local _, _, _, units = UnitDamageArea(boss, 1, x, y, 500)
        for i = 1, #units do
            --print("")
            local xu, yu = GetUnitXY(units[i])
            local z = 0
            local d = DistanceBetweenXY(x, y, xu, yu) - 2
            local angle = 3 + AngleBetweenXY(x, y, xu, yu) / bj_DEGTORAD
            local vector = Vector:new(x, y, z)
            local newVector = vector
            newVector = VectorSum(newVector, vector:yawPitchOffset(d, angle * (math.pi / 180), 0.0))
            SetUnitPositionSmooth(units[i], newVector.x, newVector.y)
        end
        duration = duration - TIMER_PERIOD64
        --print(duration)
        if duration <= 0 then
            DestroyTimer(GetExpiredTimer())
            --DestroyEffect(eff)
            --print("end")
        end
    end)
end

FREE_CAMERA = true
TIMER_PERIOD = 1 / 32
TIMER_PERIOD64 = 1 / 64
HERO = {}
HeroID = FourCC("O000")
Acceleration = true --  

function InitAnimations(hero, data)
    PlayUnitAnimationFromChat()

    if GetUnitTypeId(data.UnitHero) == FourCC("O000") then
        --print("  ")
        data.AnimDurationWalk = 0.767 --  ,  
        data.IndexAnimationWalk = 1--   
        data.ResetDuration = 3.333 --     stand,   stand
        data.IndexAnimationQ = 5 --   
        data.IndexAnimationSpace = 22 --   ,   ,    
        data.IndexAnimationAttackInDash = 3 --   
        data.IndexAnimationThrow = 3 --     
        data.IndexAnimationAttack1 = 4 --    
        data.IndexAnimationAttack2 = 4 --    
        data.IndexAnimationAttack3 = 5 --     
        data.IndexAnimationSpin = 3 --      
    elseif GetUnitTypeId(data.UnitHero) == FourCC("n002") then
        --   
        data.AnimDurationWalk = 0.9 --  ,  
        data.IndexAnimationWalk = 2 --   
        data.ResetDuration = 1.367 --     stand,   stand
        data.IndexAnimationQ = 6 --   
        data.IndexAnimationSpace = 2 --   ,   ,    
        data.IndexAnimationAttackInDash = 4 --   
        data.IndexAnimationThrow = 6 --     
        data.IndexAnimationAttack1 = 5 --    
        data.IndexAnimationAttack2 = 5 --    
        data.IndexAnimationAttack3 = 6 --     
        data.IndexAnimationSpin = 4 --      
    elseif GetUnitTypeId(data.UnitHero) == FourCC("Obla") then
        --  
        data.AnimDurationWalk = 0.733 --  ,  
        data.IndexAnimationWalk = 6 --   
        data.ResetDuration = 1.8 --     stand,   stand
        data.IndexAnimationQ = 3 --   
        data.IndexAnimationSpace = 6 --   ,   ,    
        data.IndexAnimationAttackInDash = 9 --   
        data.IndexAnimationThrow = 8 --     
        data.IndexAnimationAttack1 = 2 --    
        data.IndexAnimationAttack2 = 8 --    
        data.IndexAnimationAttack3 = 3 --     
        data.IndexAnimationSpin = 13 --      
    elseif GetUnitTypeId(data.UnitHero) == FourCC("Udre") then
        --  
        data.AnimDurationWalk = 1 --  ,  
        data.IndexAnimationWalk = 5 --   
        data.ResetDuration = 1.8 --     stand,   stand
        data.IndexAnimationQ = 10 --   
        data.IndexAnimationSpace = 5 --   ,   ,    
        data.IndexAnimationAttackInDash = 6 --   
        data.IndexAnimationThrow = 9 --     
        data.IndexAnimationAttack1 = 9 --    
        data.IndexAnimationAttack2 = 4 --    
        data.IndexAnimationAttack3 = 10 --     
        data.IndexAnimationSpin = 5 --      
    else
        print("     ")
    end
end

function InitWASD(hero)
    --print("initwasdSTART",GetUnitName(hero))
    local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
    InitAnimations(hero, data)
    BlockMouse(data)
    SelectUnitForPlayerSingle(data.UnitHero, GetOwningPlayer(hero))
    --EnableDragSelect(false, false)
    --BlzEnableSelections(false, false)

    local angle = 0
    local animWalk = 0

    TimerStart(CreateTimer(), 0.005, true, function()
        --   
        if UnitAlive(hero) then
            KillDestructableByTypeInPoint(ButtonsIDTable, 80, GetUnitXY(hero))
            if not IsUnitSelected(hero, GetOwningPlayer(hero)) then
                SelectUnitForPlayerSingle(hero, GetOwningPlayer(hero))
            end

            --ForceUIKeyBJ(GetOwningPlayer(hero), "Q")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "W")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "E")
            -- ForceUIKeyBJ(GetOwningPlayer(hero), "R")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "A")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "S")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "D")

            --ForceUIKeyBJ(GetOwningPlayer(hero), "F")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "Z")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "X")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "C")
            --ForceUIKeyBJ(GetOwningPlayer(hero), "V")
            if not data.Desync then
                ForceUIKeyBJ(GetOwningPlayer(hero), "M")
            else
                ForceUIKeyBJ(GetOwningPlayer(hero), "M")
                ForceUIKeyBJ(GetOwningPlayer(hero), "Q")
            end

        end
    end)
    data.preX = GetPlayerMouseX[data.pid]
    data.preY = GetPlayerMouseY[data.pid]
    if not GetPlayerMouseX[data.pid] then
        GetPlayerMouseX[data.pid] = 0
    end
    if not GetPlayerMouseY[data.pid] then
        GetPlayerMouseY[data.pid] = 0
    end

    local angleCast = AngleBetweenXY(GetUnitX(hero), GetUnitY(hero), GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid]) / bj_DEGTORAD
    local curAngle = angleCast
    local distance = DistanceBetweenXY(GetUnitX(hero), GetUnitY(hero), GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid])
    local cutDistance = distance
    local speed = GetUnitMoveSpeed(hero) / 38

    local curSpeed = 0
    TimerStart(CreateTimer(), TIMER_PERIOD64, true, function()
        --     
        hero = data.UnitHero --    
        local hx, hy = GetUnitXY(hero)
        --RepositionCharges(data)
        if data.preX ~= GetPlayerMouseX[data.pid] or data.preY ~= GetPlayerMouseY[data.pid] then
            --print("  "..GetPlayerMouseX[data.pid])
            data.MouseMove = true
        else
            data.MouseMove = false
            --print("  "..GetPlayerName(GetOwningPlayer(hero)))
        end
        data.preX = GetPlayerMouseX[data.pid]
        data.preY = GetPlayerMouseY[data.pid]
        --     


        angleCast = AngleBetweenXY(hx, hy, GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid]) / bj_DEGTORAD
        curAngle = lerpTheta(curAngle, angleCast, TIMER_PERIOD64 * 8)
        distance = DistanceBetweenXY(hx, hy, GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid])
        cutDistance = math.lerp(cutDistance, distance, TIMER_PERIOD64 * 8)



        ----------------------------------------

        if not data.MouseMove then
            --print("    ")

            data.fakeX, data.fakeY = MoveXY(hx, hy, data.DistMouse, data.AngleMouse)
            --InputUpdate(data, data.fakeX, data.fakeY)
        else
            data.DistMouse = DistanceBetweenXY(hx, hy, GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid])
            data.AngleMouse = AngleBetweenXY(hx, hy, GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid]) / bj_DEGTORAD
            --print(" " .. data.DistMouse)
        end

        if data.CatchUnit then
            --print(curAngle)
            if IsUnitInRangeXY(data.CatchUnit,hx, hy,120) then
                local nx,ny=MoveXY(hx, hy,80,curAngle)
                BlzSetUnitFacingEx(data.CatchUnit,curAngle)
                SetUnitPositionSmooth(data.CatchUnit,nx,ny)
            end
        end
        ------------ 
        local vector = Vector:new(GetUnitX(hero), GetUnitY(hero), GetUnitZ(hero))
        local newVector = vector
        if data.BH then
            if not data.BHSpeed then
                data.BHSpeed = 3
            end
            local angleBH = AngleBetweenUnits(hero, data.BH)
            newVector = VectorSum(newVector, vector:yawPitchOffset(data.BHSpeed, angleBH * (math.pi / 180), 0.0))
        end
        --------------    
        if not UnitAlive(hero) then
            local x, y = GetUnitXY(hero)

            if not data.CameraStabUnit then
                --print(" ")
                --and not data.CameraOnSaw
                data.CameraStabUnit = CreateUnit(Player(data.pid), FourCC("hdhw"), x, y, 0)
                ShowUnit(data.CameraStabUnit, false)

                --print("death")
                SetUnitAnimation(data.UnitHero, "death")
                if not data.ResPointX then
                    data.ResPointX, data.ResPointY = GetPlayerStartLocationX(Player(data.pid)), GetPlayerStartLocationY(Player(data.pid))
                end

                if data.ResBanana <= 0 then
                    FallCoffinMeme(data.UnitHero)
                end

                TimerStart(CreateTimer(), 3, false, function()
                    DestroyTimer(GetExpiredTimer())

                    x, y = data.ResPointX, data.ResPointY

                    if data.ResBanana > 0 then
                        x, y = GetUnitXY(hero)
                        data.ResBanana = data.ResBanana - 1
                    end

                    ReviveHero(hero, x, y, true)
                    data.StatDies = data.StatDies + 1
                    --SetCameraBoundsToRectForPlayerBJ(Player(0), bj_mapInitialPlayableArea) --TODO   -  ,    BOUND   
                    TimerStart(CreateTimer(), 0.5, false, function()
                        if GetRandomInt(1, 2) == 1 then
                            PlayMonoSpeech("Speech\\Peon\\etobilobolno", "  ")
                        else
                            PlayMonoSpeech("Speech\\Peon\\yabessmertniy", " !")
                        end
                    end)
                    HeroCandyHeal(data, 10)
                    SetUnitInvulnerable(hero, true)
                    TimerStart(CreateTimer(), 2, false, function()
                        SetUnitInvulnerable(hero, false)
                        DestroyTimer(GetExpiredTimer())
                    end)
                end)
            end

            SetCameraQuickPosition(GetUnitX(data.CameraStabUnit), GetUnitY(data.CameraStabUnit))
            SetCameraTargetControllerNoZForPlayer(GetOwningPlayer(data.CameraStabUnit), data.CameraStabUnit, 10, 10, true) --  


        else
            KillUnit(data.CameraStabUnit)
            data.CameraStabUnit = nil
            if not FREE_CAMERA then
                SetCameraQuickPosition(GetUnitX(hero), GetUnitY(hero))
                --print("  ")
                --local xcam,ycam=MoveXY(hx, hy,300,curAngle)
                --xcam=xcam-hx
                --ycam=ycam-hy
                --GetPlayerMouseX[0],GetPlayerMouseY[0]
                --print(xcam,ycam)

                SetCameraTargetControllerNoZForPlayer(GetOwningPlayer(hero), hero, 0, 200, false) --  
                --print(GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK))
                --print(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE))
                local z = GetUnitZ(hero)

                --SetCameraField(CAMERA_FIELD_ZOFFSET, 100, 0.1) --z - 1000
                SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, 2000, 0.1)
                SetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK, 304, 0.1)
            else
                --print(" ")
            end
        end
        if true then
            if data.PressSpin then
                data.ChargingAttack = data.ChargingAttack + TIMER_PERIOD64
                --print(data.ChargingAttack)
                if data.ChargingAttack >= data.StarTime2Spin and not data.isSpined then

                    data.isSpined = true
                    --print("start spin")
                    StartAndReleaseSpin(data)
                    if not data.tasks[2] then
                        data.tasks[2] = true
                        --print("  ")
                    end
                end
            else
                data.ChargingAttack = 0
                data.isSpined = false
            end
        end

        if data.ResetSeriesTime > 0 then
            data.ResetSeriesTime = data.ResetSeriesTime - TIMER_PERIOD64
        else
            data.ResetSeriesTime = 0
            data.AttackCount = 0
        end
        animWalk = animWalk + TIMER_PERIOD64
        if animWalk >= data.AnimDurationWalk then
            --  WALK
            --print(animWalk)
            animWalk = 0
        end

        data.IsMoving = false
        if data.ReleaseW and data.ReleaseD == false and data.ReleaseA == false then
            --print("only w")
            angle = 90
            data.IsMoving = true
            if not data.tasks[11] then
                data.tasks[11] = true
                --print("   ")
            end
        end
        if data.ReleaseW and data.ReleaseD then
            --print("w+d")
            angle = 90 - 45
            data.IsMoving = true
        end
        if data.ReleaseW and data.ReleaseA then
            --print("w+s")
            angle = 90 + 45
            data.IsMoving = true
        end

        if data.ReleaseS and data.ReleaseD == false and data.ReleaseA == false then
            angle = 270
            data.IsMoving = true
        end
        if data.ReleaseS and data.ReleaseD then
            angle = 270 + 45
            data.IsMoving = true
        end
        if data.ReleaseS and data.ReleaseA then
            angle = 270 - 45
            data.IsMoving = true
        end

        if data.ReleaseD and data.ReleaseW == false and data.ReleaseS == false then
            angle = 0
            data.IsMoving = true
        end

        if data.ReleaseA and data.ReleaseW == false and data.ReleaseS == false then
            angle = 180
            data.IsMoving = true
        end

        if data.ReleaseW and data.ReleaseS and not data.ReleaseA and not data.ReleaseD then
            --data.ReleaseW = false
            --data.ReleaseS = false
            --data.IsMoving = false
            --print("   ")
            --DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitXY(data.UnitHero)))
            DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", data.UnitHero, "origin"))
        end

        if not data.ReleaseW and not data.ReleaseS and data.ReleaseA and data.ReleaseD then
            --data.ReleaseA = false
            --data.ReleaseD = false
            --data.IsMoving = false
            --DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitXY(data.UnitHero)))
            DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", data.UnitHero, "origin"))
            --print("   ")
        end
        if not UnitAlive(hero) then
            --data.ReleaseW=false
            --data.ReleaseA=false
            --data.ReleaseS=false
            --data.ReleaseD=false
        end
        if not StunSystem[GetHandleId(hero)] then
            StunUnit(hero, 0.2)
        end

        if StunSystem[GetHandleId(data.UnitHero)].Time == 0 and onForces[GetHandleId(hero)] then
            --and
            if UnitAlive(hero) and not data.isShield and not data.isAttacking and not data.ReleaseRMB and not FREE_CAMERA then


                if data.IsMoving then
                    -- 
                    data.DirectionMove = angle

                    speed = GetUnitMoveSpeed(hero) / 38 --  5 
                    data.MoveSpeed = speed
                    curSpeed = math.lerp(curSpeed, speed, TIMER_PERIOD64 * 8) -- 
                    --print(curSpeed)
                    if data.UnitInAttack then
                        curSpeed = curSpeed * 0.1--    
                    else
                        SetUnitTimeScale(hero, (speed * 20) / 100) --  
                    end
                    --print(speed)
                    if data.isAttacking or (data.ReleaseQ and data.CDSpellQ > 0) or data.ReleaseRMB then
                        curSpeed = 0.5
                    end

                    if data.ReleaseQ and data.CurrentWeaponType ~= "bow" then
                        -- 
                        SetUnitTimeScale(hero, 1)
                    end
                    local x, y = GetUnitXY(hero)
                    --local nx, ny = MoveXY(x, y, speed, angle)
                    --local dx, dy = nx - x, ny - y


                    newVector = VectorSum(newVector, vector:yawPitchOffset(curSpeed, angle * (math.pi / 180), 0.0))

                    local nx, ny = newVector.x, newVector.y
                    if not data.isAttacking then
                        if data.CurrentWeaponType == "pickaxe" or not data.PressSpin then
                            --

                            if not data.LMBIsPressed then
                                -- UnitInAttack
                                SetUnitFacing(hero, angle)
                                --print("    "..angle)
                            end
                        else

                        end
                    end

                    SetUnitPositionSmooth(hero, nx, ny)--  


                    if data.REffect then
                        BlzSetSpecialEffectPosition(data.REffect, hx, hy, GetTerrainZ(hx, hy) + 200)
                    end
                    --RepositionCharges(data)

                    if data.CatchUnit then

                        local newAngle = angle-- -180 + AngleBetweenUnits(hero, data.CatchUnit)
                        --print(" ")
                        if not IsUnitInRange(hero, data.CatchUnit, 120) then
                            DestroyEffect(data.CatchUnitEffect)
                            data.CatchUnit = false
                            --print("  ")

                        else
                            SetUnitFacing(data.CatchUnit, newAngle)
                            UnitAddForceSimple(data.CatchUnit, newAngle, speed , 70)
                        end

                    end

                    local newX, newY = GetUnitXY(hero)
                    local stator = false
                    if newX == x and newY == y then
                        --print("   ")

                        if not MiniChargeOnArea(data) then
                            stator = true
                            --if true then
                            ResetUnitAnimation(hero) --    
                            --if not data.UnitInAttack then
                            --    SetUnitTimeScale(hero,0.2)
                            --end
                            --end

                        end --   
                    else
                        SetUnitTimeScale(hero,1)
                    end
                    if animWalk == 0 and not stator  then
                        -- and not data.ReleaseRMB
                        --print("  ",StunSystem[GetHandleId(data.UnitHero)].Time == 0)
                        SetUnitAnimationByIndex(hero, data.IndexAnimationWalk)
                        --local r={SoundStep1,SoundStep2,SoundStep3,SoundStep4}
                        data.animStand = 3
                    end
                else
                    if data.BH then
                        -- 
                        SetUnitPositionSmooth(hero, newVector.x, newVector.y)--  
                    end
                    curSpeed = 0
                    --   
                    --if animWalk==0 then
                    data.DirectionMove = GetUnitFacing(hero)
                    data.animStand = data.animStand + TIMER_PERIOD64

                    ----  ----
                    if not data.AttackShieldCD then
                        data.AttackShieldCD = 0
                    end
                    data.AttackShieldCD = data.AttackShieldCD - TIMER_PERIOD64

                    -------------------------
                    if data.animStand >= 2 and not data.ReleaseQ and not data.ReleaseRMB and not data.sit then
                        --  WALK
                        --print(animWalk)
                        if not LockAnimAnimation(data) then
                            ResetUnitAnimation(hero) --    
                        end
                        if data.CurrentWeaponType == "shield" or data.CurrentWeaponType == "bow" then
                            if data.PressSpin then
                            else
                                ResetUnitAnimation(hero)
                            end
                        end
                        --print(" ")
                        data.animStand = 0
                    end
                    --end
                    --print("r")--..GetUnitName(mainHero)
                end
            else
                --print("onattaking")
            end
        else
            --   
            -- SetUnitAnimationByIndex(hero,5)
            --UnitRemoveAbility(hero, FourCC("A003"))
            --UnitRemoveAbility(hero, FourCC("A004")) --   
        end
    end)
end

function CreateWASDActions()
    -----------------------------------------------------------------OSKEY_W 
    --print("initwasdactions")
    local gg_trg_EventUpW = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpW, Player(i), OSKEY_W, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpW, Player(i), OSKEY_UP, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpW, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        --print("W "..GetUnitName(data.UnitHero))



        if not data.ReleaseW and UnitAlive(data.UnitHero) then


            data.wFast = true
            TimerStart(CreateTimer(), 0.1, false, function()
                data.wFast = false
                DestroyTimer(GetExpiredTimer())
            end)



            --and not data.isAttacking
            data.ReleaseW = true
            --print("W2")
            --SelectUnitForPlayerSingle(data.UnitHero,GetTriggerPlayer())
            if not data.isAttacking and StunSystem[GetHandleId(data.UnitHero)].Time == 0 then
                --print("pressW and short anim")
                if data.SpaceForce then
                    -- print(" ?")
                else
                    --print(" ")
                end
                if Acceleration then
                    UnitAddForceSimple(data.UnitHero, 90, 5, 15)

                end
                data.DirectionMove = 90

                if data.ReleaseW and data.ReleaseD then
                    data.DirectionMove = 90 - 45
                end
                if data.ReleaseW and data.ReleaseA then
                    data.DirectionMove = 90 + 45
                end

                data.animStand = data.ResetDuration --   2 
                if not LockAnimAnimation(data) then
                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationWalk)
                end
            end

        end
    end)
    local TrigDepressW = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressW, Player(i), OSKEY_W, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressW, Player(i), OSKEY_UP, 0, false)
    end
    TriggerAddAction(TrigDepressW, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseW = false
    end)
    -----------------------------------------------------------------OSKEY_S
    local gg_trg_EventUpS = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpS, Player(i), OSKEY_S, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpS, Player(i), OSKEY_DOWN, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpS, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseS and UnitAlive(data.UnitHero) then
            if data.sFast then
                UnitAddItemById(data.UnitHero, FourCC("I003")) --Bspe 
            end
            data.sFast = true
            TimerStart(CreateTimer(), 0.1, false, function()
                data.sFast = false
                DestroyTimer(GetExpiredTimer())
            end)
            -----
            data.ReleaseS = true
            --SelectUnitForPlayerSingle(data.UnitHero,Player(0))
            if not data.isAttacking and StunSystem[GetHandleId(data.UnitHero)].Time == 0 then
                data.animStand = 1.8 --   2 
                if Acceleration then
                    UnitAddForceSimple(data.UnitHero, 270, 5, 15)
                end
                data.DirectionMove = 270

                if data.ReleaseS and data.ReleaseD then
                    data.DirectionMove = 270 + 45
                end
                if data.ReleaseS and data.ReleaseA then
                    data.DirectionMove = 270 - 45
                end
                if not LockAnimAnimation(data) then
                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationWalk)
                end

            end
        end
    end)
    local TrigDepressS = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressS, Player(i), OSKEY_S, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressS, Player(i), OSKEY_DOWN, 0, false)
    end
    TriggerAddAction(TrigDepressS, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseS = false
    end)
    -----------------------------------------------------------------OSKEY_D
    local TrigPressD = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressD, Player(i), OSKEY_D, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(TrigPressD, Player(i), OSKEY_RIGHT, 0, true)
    end
    TriggerAddAction(TrigPressD, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseD and UnitAlive(data.UnitHero) then
            if data.dFast then
                UnitAddItemById(data.UnitHero, FourCC("I003")) --Bspe 
            end
            data.dFast = true
            TimerStart(CreateTimer(), 0.1, false, function()
                data.dFast = false
                DestroyTimer(GetExpiredTimer())
            end)

            data.ReleaseD = true
            --SelectUnitForPlayerSingle(data.UnitHero,Player(0))
            if not data.isAttacking and StunSystem[GetHandleId(data.UnitHero)].Time == 0 then
                data.animStand = 1.8 --   2 
                if Acceleration then
                    UnitAddForceSimple(data.UnitHero, 0, 5, 15)
                end
                data.DirectionMove = 0
                if not LockAnimAnimation(data) then
                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationWalk)
                end

            end
        end
    end)
    local TrigDePressD = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressD, Player(i), OSKEY_D, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressD, Player(i), OSKEY_RIGHT, 0, false)
    end
    TriggerAddAction(TrigDePressD, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseD = false

    end)
    -----------------------------------------------------------------OSKEY_A
    local TrigPressA = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressA, Player(i), OSKEY_A, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(TrigPressA, Player(i), OSKEY_LEFT, 0, true)
    end
    TriggerAddAction(TrigPressA, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseA and UnitAlive(data.UnitHero) and StunSystem[GetHandleId(data.UnitHero)].Time == 0 then
            if data.aFast then
                UnitAddItemById(data.UnitHero, FourCC("I003")) --Bspe 
            end
            data.aFast = true
            TimerStart(CreateTimer(), 0.1, false, function()
                data.aFast = false
                DestroyTimer(GetExpiredTimer())
            end)
            ---
            data.ReleaseA = true
            --SelectUnitForPlayerSingle(data.UnitHero,Player(0))
            if not data.isAttacking then
                --    
                data.animStand = 1.8 --   2 
                data.DirectionMove = 180
                if Acceleration then
                    UnitAddForceSimple(data.UnitHero, 180, 5, 15)
                end
                if not LockAnimAnimation(data) then
                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationWalk)
                end
            end
        end
    end)
    local TrigDePressA = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressA, Player(i), OSKEY_A, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressA, Player(i), OSKEY_LEFT, 0, false)
    end
    TriggerAddAction(TrigDePressA, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseA = false
    end)
    -----------------------------------------------------------------OSKEY_SPACE   
    local TrigPressSPACE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressSPACE, Player(i), OSKEY_SPACE, 0, true)
    end
    TriggerAddAction(TrigPressSPACE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if data.DashCharges > 0 and not data.ReleaseSPACE and not data.SpaceForce and UnitAlive(data.UnitHero) and StunSystem[GetHandleId(data.UnitHero)].Time == 0 and not data.ReleaseLMB then
            data.ReleaseSPACE = true
            --SelectUnitForPlayerSingle(data.UnitHero,Player(0))
            if not data.SpaceForce then
                data.animStand = 1.8 --   2 
                --print("SPACE")
                if not data.tasks[5] then
                    data.tasks[5] = true
                    --print("   ")
                end

                local dist = 400
                local delay = 0.7 --   ?
                local dashSpeed = 10
                --[[
                                if data.ReleaseQ and not data.QJump2Pointer then
                                    -- print("  ,   ")
                                    dist = 400
                                    delay = 0.3
                                    data.GreatDamageDashQ = true
                                    --print("q+space")
                                    SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationQ) --     

                                    if not data.tasks[8] then
                                        data.tasks[8] = true
                                        --print("   ")
                                    end
                                end
                                ]]

                data.DashCharges = data.DashCharges - 1
                RepositionCharges(data)
                if data.DashCharges == 0 then
                    --StartFrameCD(data.DashChargesReloadSec, data.DashChargesCDFH)
                end
                --BlzFrameSetText(data.DashChargesFH, data.DashCharges)
                TimerStart(CreateTimer(), data.DashChargesReloadSec, false, function()
                    data.DashCharges = data.DashCharges + 1
                    RepositionCharges(data)
                    --BlzFrameSetText(data.DashChargesFH, data.DashCharges)
                    DestroyTimer(GetExpiredTimer())
                    --print(" ",data.DashCharges)
                end)

                --UnitAddItemById(data.UnitHero, FourCC("I000")) --  
                BlzSetUnitFacingEx(data.UnitHero, data.DirectionMove)
                --print("  ")
                if data.Time2HealDash > 0 then
                    HealUnit(data.UnitHero, data.Time2HealDash)
                    local talon = GlobalTalons[data.pid]["Trall"][7]
                    --StartFrameCD(talon.DS[talon.level], data.HealDashCDFH)
                    data.HealDashCurrentCD = talon.DS[talon.level]
                    TimerStart(CreateTimer(), data.HealDashCurrentCD, false, function()
                        data.HealDashCurrentCD = 0
                        DestroyTimer(GetExpiredTimer())
                    end)
                end

                --------------------------------
                if data.isSpined then
                    --print(" ") --    
                    if not data.tasks[7] then
                        data.tasks[7] = true
                    end
                    data.DirectionMove = -180 + AngleBetweenXY(data.fakeX, data.fakeY, GetUnitX(data.UnitHero), GetUnitY(data.UnitHero)) / bj_DEGTORAD
                    dist = 400
                end

                if data.HasWhirl then
                    --print("")
                    local x, y = GetUnitXY(data.UnitHero)
                    --CreateAndForceBullet(data.UnitHero, data.DirectionMove, 5, "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", x, y, 5, 350, 350)
                end

                if true then
                    local nx, ny = MoveXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), dist, data.DirectionMove)
                    local PerepadZ = GetTerrainZ(MoveXY(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), 120, data.DirectionMove)) - GetTerrainZ(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero))
                    --print(PerepadZ)
                    if not IsTerrainPathable(nx, ny, PATHING_TYPE_WALKABILITY) and PerepadZ < -1 then
                        -- print("   ")
                        --DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt", nx, ny))
                        if not Chk2Way(GetUnitX(data.UnitHero), GetUnitY(data.UnitHero), nx, ny) then
                            --print(",   ")
                            Blink2Point(data.UnitHero, nx, ny)
                        else
                            -- print(" ?,    !")
                            UnitAddForceSimple(data.UnitHero, data.DirectionMove, 10, dist, "ignore") --    
                            data.StatDash = data.StatDash + 1
                        end
                    else
                        --print(" ?")
                        if GetUnitTypeId(data.UnitHero) == FourCC("n002") then
                            dist = 700
                            dashSpeed = 40
                            --print("   ")
                            data.chargeEff = AddSpecialEffectTarget("IceCharge", data.UnitHero, "origin")

                        end
                        UnitAddForceSimple(data.UnitHero, data.DirectionMove, dashSpeed, dist, "ignore") --    
                        data.StatDash = data.StatDash + 1
                        local r = GetRandomInt(1, 120)
                        if r == 1 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "   ,   ")
                        elseif r == 2 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "    ")
                        elseif r == 3 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "    360")
                        elseif r == 4 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "")
                        elseif r == 5 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "")
                        elseif r == 6 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, ", ")
                        elseif r == 7 then
                            PlayMonoSpeech("Speech\\Peon\\Dash\\D"..r, "   ")
                        end
                    end
                end
                if data.ArrowDamageAfterCharge then
                    data.ArrowDamageAfterChargeReady = true
                    BlzFrameSetVisible(data.ArrowDamageAfterChargePointer, GetLocalPlayer() == Player(data.pid))
                    --print(" ")
                end

                data.SpaceForce = true
                local effModel = "Hive\\Windwalk\\Windwalk Necro Soul\\Windwalk Necro Soul"
                if data.IframesOnDash then
                    effModel = "SystemGeneric\\InkMissile.mdx"
                end
                if data.IframesOnDashInvul then
                    --   2  
                    SetUnitInvulnerable(data.UnitHero, true)
                    TimerStart(CreateTimer(), 0.2, false, function()
                        SetUnitInvulnerable(data.UnitHero, false)
                        DestroyTimer(GetExpiredTimer())
                    end)
                end
                local eff = AddSpecialEffectTarget(effModel, data.UnitHero, "origin")

                TimerStart(CreateTimer(), delay, false, function()
                    DestroyEffect(eff)
                    data.SpaceForce = false
                    data.AttackInForce = false
                    SetUnitTimeScale(data.UnitHero, 1)
                    DestroyTimer(GetExpiredTimer())
                    --print(" ?")
                end)
                if not data.ReleaseQ then
                    --    
                    if not data.isSpined then
                        --    
                        if data.IsMoving then
                            --print(" ")
                            SetUnitTimeScale(data.UnitHero, 1)
                        else
                            --print("  ")
                            SetUnitTimeScale(data.UnitHero, 1)
                        end
                        SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationSpace)--  
                    end
                end
            end
        end
    end)
    local TrigDePressSPACE = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressSPACE, Player(i), OSKEY_SPACE, 0, false)

    end
    TriggerAddAction(TrigDePressSPACE, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseSPACE = false
    end)
    -----------------------------------------------------------------OSKEY_Q
    --[[
    local TrigPressQ = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressQ, Player(i), OSKEY_Q, 0, true)
    end
    TriggerAddAction(TrigPressQ, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseQ and UnitAlive(data.UnitHero) and StunSystem[GetHandleId(data.UnitHero)].Time == 0 then

            --SelectUnitForPlayerSingle(data.UnitHero,Player(0))
            if not data.ReleaseQ and not data.ReleaseLMB and data.CDSpellQ == 0 and not data.ReleaseRMB and not (data.CurrentWeaponType == "shield" and data.PressSpin) then
                local balance = 1
                if data.isSpined then
                    balance = 6
                end
                data.CDSpellQ = data.SpellQCDTime * balance
                TimerStart(CreateTimer(), 1, true, function()
                    data.CDSpellQ = data.CDSpellQ - 1
                    if data.CDSpellQ <= 0 then
                        data.CDSpellQ = 0
                        DestroyTimer(GetExpiredTimer())
                    end
                end)
                data.animStand = 1.8 --   2 
                --print("Q spell")
                data.ReleaseQ = true
                SetUnitAnimationByIndex(data.UnitHero, data.IndexAnimationQ) --     3

                if data.CurrentWeaponType == "bow" then

                else
                    --  ,  
                    if data.QJump2Pointer then
                        --FIXED   
                        --if not data.ReleaseQ then
                        --print("Q  ")

                        --StartFrameCD(data.SpellQCDTime * balance, data.cdFrameHandleQ)
                        --SpellSlashQ(data)
                        local angle = -180 + AngleBetweenXY(data.fakeX, data.fakeY, GetUnitX(data.UnitHero), GetUnitY(data.UnitHero)) / bj_DEGTORAD
                        local dist = DistanceBetweenXY(GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid], GetUnitX(data.UnitHero), GetUnitY(data.UnitHero))
                        if dist >= 500 then
                            dist = 500
                        end
                        BlzSetUnitFacingEx(data.UnitHero, angle)
                        print("  Q    ")
                        if data.CurrentWeaponType == "shield" then
                            SetUnitAnimationByIndex(data.UnitHero, 26)
                            SetUnitTimeScale(data.UnitHero, 2)
                        end
                        UnitAddForceSimple(data.UnitHero, angle, 20, dist, "qjump")
                        TimerStart(CreateTimer(), 5, false, function()
                            DestroyTimer(GetExpiredTimer())
                            if data.ReleaseQ then
                                --print("  ")
                                data.ReleaseQ = false
                            end
                        end)
                        --end
                    else
                        local castDelay = 0.8 --  Q 
                        if data.CurrentWeaponType == "shield" then
                            castDelay = 0.7
                        end
                        TimerStart(CreateTimer(), castDelay, false, function()
                            --  
                            DestroyTimer(GetExpiredTimer())
                            --StartFrameCD(data.SpellQCDTime * balance, data.cdFrameHandleQ)
                            SpellSlashQ(data)

                            if data.DoubleClap then
                                TimerStart(CreateTimer(), 0.35, false, function()
                                    SpellSlashQ(data)
                                    DestroyTimer(GetExpiredTimer())
                                end)
                            end
                            data.ReleaseQ = false
                        end)
                    end
                end


            end
        end
    end)
    local TrigDePressQ = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressQ, Player(i), OSKEY_Q, 0, false)

    end
    TriggerAddAction(TrigDePressQ, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        --data.ReleaseQ = false
    end)
]]
end
---MouseX,MouseY=0,0
function BlockMouse(data)
    local this = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
    TriggerAddAction(this, function()
        --  MouseX,MouseY=GetPlayerMouseX
        --print(OrderId2String(GetUnitCurrentOrder(mainHero)))
        if OrderId2String(GetUnitCurrentOrder(data.UnitHero)) == "dropitem" then
            data.DropInventory = false
            TimerStart(CreateTimer(), 2, false, function()
                DestroyTimer(GetExpiredTimer())
                data.DropInventory = true
            end)
        end

        if (OrderId2String(GetUnitCurrentOrder(data.UnitHero)) == "smart" or OrderId2String(GetUnitCurrentOrder(data.UnitHero)) == "move") and not FREE_CAMERA then
            --  ,     
            if OrderId2String(GetUnitCurrentOrder(data.UnitHero)) == "smart" then
                if not data.Desync and not FirstGoto then
                    print(GetPlayerName(Player(data.pid)) .. L(" !      ", "Attention!! you must use the classic control scheme"))

                    data.Desync = true
                end
            else
                --print("click LMB")
                -- data.LMBFIRST=true
            end
            --gkm=gkm+1
            --print(gkm)
            BlzPauseUnitEx(data.UnitHero, true)
            IssueImmediateOrder(data.UnitHero, "stop")
            BlzPauseUnitEx(data.UnitHero, false)
        end
    end)
end

function GetUnitData(hero)
    local data = nil
    if HERO[GetPlayerId(GetOwningPlayer(hero))] then
        data = HERO[GetPlayerId(GetOwningPlayer(hero))]
    else
        print("    HERO")
    end
    return data
end

function LockAnimAnimation(data)
    return data.BowReady or data.SpaceForce
end

function StopUnitMoving(data)
    data.ReleaseW = false
    data.ReleaseA = false
    data.ReleaseS = false
    data.ReleaseD = false
end

function PlayUnitAnimationFromChat()
    local this = CreateTrigger()
    TriggerRegisterPlayerChatEvent(this, Player(0), "", true)
    TriggerRegisterPlayerChatEvent(this, Player(1), "", true)
    TriggerAddAction(this, function()
        local s = S2I(GetEventPlayerChatString())
        local data = HERO[GetPlayerId(GetTriggerPlayer())]
        if GetEventPlayerChatString() == "w" then
            PlayMonoSpeech("Speech\\Peon\\OpyatOnRaskomandovalsa", " ")
            --CreateForUnitWayToPoint(mainHero,CQX,CQY)
            return
        end
        if GetEventPlayerChatString() == "h" then
            --print("")
            HeroCandyHeal(data, 1)
        end

        if GetEventPlayerChatString() == "z" then
            --print("")
            UnitStartFallAnim(udg_HERO, 1000)
        end

        SetUnitAnimationByIndex(data.UnitHero, s)
        print(GetUnitName(data.UnitHero) .. " " .. s)
    end)
end

CamZ = {}
Step = 100 --   
function InitCamControl()
    local EventUp = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        CreateFogModifierRectBJ(true, Player(i), FOG_OF_WAR_VISIBLE, GetEntireMapRect())

        BlzTriggerRegisterPlayerKeyEvent(EventUp, Player(i), OSKEY_HOME, 0, true)
        CamZ[i] = GetCameraField(CAMERA_FIELD_ZOFFSET)
    end
    local EventDown = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(EventDown, Player(i), OSKEY_END, 0, true)
    end
    TriggerAddAction(EventUp, function()
        CamZ[GetPlayerId(GetTriggerPlayer())] = GetCameraField(CAMERA_FIELD_ZOFFSET) + Step
    end)
    TriggerAddAction(EventDown, function()
        CamZ[GetPlayerId(GetTriggerPlayer())] = GetCameraField(CAMERA_FIELD_ZOFFSET) - Step
    end)

    TimerStart(CreateTimer(), 0.02, true, function()
        for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
            if GetLocalPlayer() == Player(i) then
                SetCameraField(CAMERA_FIELD_ZOFFSET, CamZ[i], 0.1)
            end
        end
    end)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 08.04.2023 22:29
---
function WolfAttackPeon(hero,angle)
    local speed = 20
    --SetUnitTimeScale(hero, 3)
    SetUnitFacing(hero,angle)
    if ResetUnitCustomPause(hero)>=1 then

    end
    local index={6,8}
    SetUnitAnimationByIndex(hero,index[GetRandomInt(1,#index)])
    local x, y = GetUnitXY(hero)
    local xe, ye = MoveXY(x, y, 200, GetUnitFacing(hero))
    local eff = AddSpecialEffect("animeslashfinal", xe, ye)
    normal_sound("Sound\\Units\\Combat\\MetalLightSliceFlesh2", x, y)
    BlzSetSpecialEffectPosition(eff, xe, ye, GetTerrainZ(xe, ye) + 80)
    BlzSetSpecialEffectYaw(eff, math.rad(GetUnitFacing(hero)))
    UnitDamageArea(hero, 1000, xe, ye, 200, "ForceTotem")
    DestroyEffect(eff)
    MoveEffectTimedWSpeed(eff, speed, GetUnitFacing(hero), .5)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 16.04.2023 18:30
---
function UnitGetItemByName(item, data)
    if item.name == "" then
        QuestSetCompletedBJ(udg_QWolf, true)
    elseif item.name == "" then
        if not data.BlockDamageSocks then
            data.BlockDamageSocks = 10
        else
            data.BlockDamageSocks = data.BlockDamageSocks + 10
        end
    elseif item.name == "  " then
        HeroCandyHeal(data, 99)
    elseif item.name == "  " then
        data.haveOlivier = true
        if data.haveMayonnaise then
            QuestSetCompletedBJ(udg_QYetty, true)
        end
    elseif item.name == "" then
        data.haveMayonnaise = true
        data.UnitScale = data.UnitScale + 0.1
        SetUnitScale(data.UnitHero, data.UnitScale, data.UnitScale, 1)
        if data.haveOlivier then
            QuestSetCompletedBJ(udg_QYetty, true)
        end
    elseif item.name == " " then
        data.BaseDamage = data.BaseDamage + item.DS[item.lvl - 1]
    elseif item.name == "" then
        HeroCandyHeal(data, 10)
        AddPeonMAXHP(data, 1)
    elseif item.name == "" then
        HeroCandyHeal(data, 10)
        AddPeonMAXHP(data, 1)
    elseif item.name == " " then
        data.MorozkoCD = item.DS[item.lvl]
        data.MorozkoCDCurrent = 0
    elseif item.name == "" then
        data.BonusDamage = data.BonusDamage + item.DS[item.lvl]
        data.EggCount = data.EggCount + 100
    elseif item.name == "" then
    elseif item.name == "" then
        QuestSetCompletedBJ(udg_QStarAnime, true)
    elseif item.name == "" then
    elseif item.name == "" then
        QuestSetCompletedBJ(udg_QWine, true)
    elseif item.name == "" then
        QuestSetCompletedBJ(udg_QWine, true)
    elseif item.name == "" then
        UnitAddAbility(data.UnitHero, FourCC("AIms"))
    elseif item.name == " " then
        QuestSetCompletedBJ(udg_QDragon, true)
    elseif item.name == "" then
    elseif item.name == "" then
    elseif item.name == "" then
    elseif item.name == "" then
        data.ResBanana = data.ResBanana + item.DS[item.lvl - 1]
    elseif item.name == " " then
        data.SteamSale = item.DS[item.lvl]
        --print("", item.DS[item.lvl], item.lvl)
    elseif item.name == "   " then

    elseif item.name == "" then
    elseif item.name == "" then
        AddTimeToTimer(GTimer, 0, -5, 0)
        CreateFlyFrame(GTimer, " 5 ")
    elseif item.name == "" then
    elseif item.name == "  " then
    elseif item.name == " " then


    end
end
function ByItemByName(item, data)
    if data.gold >= item.cost then
        --print(" ")
        data.gold = data.gold - item.cost
        item.cost = item.cost * 2
        if not item.lvl then
            item.lvl = 1
            --print(" ")
        end

        --print("lvl=",item.lvl)
        BlzFrameSetText(item.FHcost, item.cost)
        if not item.DS then
            item.isSold = true
            BlzFrameSetScale(item.FHcost, 0.7)
            BlzFrameSetText(item.FHcost, "")
            BlzFrameSetPoint(item.FHcost, FRAMEPOINT_BOTTOMLEFT, item.FHgold, FRAMEPOINT_BOTTOMLEFT, 0.012, 0.003)
        else
            if item.lvl >= #item.DS then
                item.isSold = true
                BlzFrameSetScale(item.FHcost, 0.7)
                BlzFrameSetText(item.FHcost, "")
                BlzFrameSetPoint(item.FHcost, FRAMEPOINT_BOTTOMLEFT, item.FHgold, FRAMEPOINT_BOTTOMLEFT, 0.012, 0.003)
            else
                item.lvl = item.lvl + 1
            end
        end
        normal_sound("Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold")
        UnitGetItemByName(item, data)
    else
        --print("", item.cost - data.gold, "")
        normal_sound("Sound\\Interface\\Warning\\Orc\\GruntNoGold1.flac")
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 16.04.2023 14:49
---
function CreateShop()
    if SHOP then
        if not BlzFrameIsVisible(SHOP) then
            BlzFrameSetVisible(SHOP, true)
            normal_sound("Sound\\Interface\\ItemReceived")
            CreateItemsForSell()
        end
        return
    end

    normal_sound("Sound\\Interface\\ItemReceived")
    SHOP = BlzCreateFrameByType("BACKDROP", "Face", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    InitItemBDForShop()
    --print(#SHOP_BD,SHOP_BD[1].descriptions)
    local rama = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SHOP, '', 0)
    BlzFrameSetTexture(rama, "Textures\\Black32", 0, true) --HPElement
    BlzFrameSetSize(rama, 0.4, 0.3)
    BlzFrameSetAbsPoint(rama, FRAMEPOINT_CENTER, 0.4, 0.3)
    CreateItemsForSell()
    CreateCloseButton(SHOP, rama)
    CurrentGoldInShop(rama)
    CreateToolTipBox(rama)
end

function ClearShop(originalBD)
    local newBD = {}
    for i = 1, #originalBD do
        if not originalBD[i].isSold then
            table.insert(newBD, originalBD[i])
        end
    end
    return newBD
end

function CreateItemsForSell()
    local NextPoint = 0.039 + 0.011
    local x, y = 0.25, 0.4 - NextPoint
    local currentSHOP = ClearShop(SHOP_BD)
    local max = #currentSHOP
    local w = 7
    local h = 4
    local limit = h * w
    if max > limit then
        max = limit--       h  w
    end
    local k = 1
    --print(max)
    if AllItemsInShop then
        for i = 1, #AllItemsInShop do
            --print(" ",i)
            BlzDestroyFrame(AllItemsInShop[i])
        end
    end
    AllItemsInShop = {}
    for j = 1, h do
        for i = 1, w do
            if k <= max then
                local SelfFrame = CreateItemForShop(x + NextPoint * (i - 1), y - NextPoint * (j - 1), SHOP, currentSHOP[k])
                table.insert(AllItemsInShop, SelfFrame)
                k = k + 1
            end
        end
    end
    HERO[0].SteamSale = false
end

GItemName = ""
function CreateItemForShop(posX, PosY, parent, item)
    local data = HERO[0]
    local NextPoint = 0.039

    if data.SteamSale then
        --print(" ")

        item.cost = item.cost * data.SteamSale // 100
        --data.SteamSale=false
    end
    local name = item.name

    local descriptions = item.descriptions
    local texture = item.texture
    if not texture then
        texture = "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn"
    end
    --local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', parent, 'ScoreScreenTabButtonTemplate', 0)
    --local SelfFrame = BlzCreateFrame("IconButtonTemplate", parent, 0, 0)
    local SelfFrame = BlzCreateFrameByType("GLUETEXTBUTTON", "MyScriptDialogButton",parent, "ScriptDialogButton", 0)
    --BlzFrameSetParent(SelfFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)

    item.FHcost, item.FHgold = ItemAddCostFromShop(buttonIconFrame, item.cost)
    BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, texture, 0, true)
    BlzFrameSetSize(SelfFrame, NextPoint, NextPoint)
    BlzFrameSetAbsPoint(SelfFrame, FRAMEPOINT_CENTER, posX, PosY)

    local ClickTrig = CreateTrigger()
    BlzTriggerRegisterFrameEvent(ClickTrig, SelfFrame, FRAMEEVENT_CONTROL_CLICK)
    TriggerAddAction(ClickTrig, function()
        --print("  ")
        BlzFrameSetEnable(BlzGetTriggerFrame(), false)
        BlzFrameSetEnable(BlzGetTriggerFrame(), true)
        if not item.isSold then
            data = HERO[GetPlayerId(GetTriggerPlayer())]
            ByItemByName(item, data)
        end
    end)

    local TrigMOUSE_ENTER = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_ENTER, SelfFrame, FRAMEEVENT_MOUSE_ENTER)
    TriggerAddAction(TrigMOUSE_ENTER, function()
        --print("  ",flag)
        --TODO            
        local tmptext = BlzFrameGetText(SHOP_TOOLTIP)
        --print("get ",tmptext)
        if tmptext == ColorText2(name) .. "\n" .. DSColorDescription(item) then
            --print(" ")
        else
            -- print("   ")
        end
        BlzFrameSetText(SHOP_TOOLTIP, ColorText2(name) .. "\n" .. DSColorDescription(item))


    end)
    local TrigMOUSE_LEAVE = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_LEAVE, SelfFrame, FRAMEEVENT_MOUSE_LEAVE)
    TriggerAddAction(TrigMOUSE_LEAVE, function()
        --print(" ")
        BlzFrameSetText(SHOP_TOOLTIP, "    ,      ,   ")
    end)
    return SelfFrame
end

function CreateToolTipBox(rama)
    local tooltip = BlzCreateFrameByType("FRAME", "TestDialog", rama, "StandardFrameTemplate", 0)
    local backdrop = BlzCreateFrame("QuestButtonDisabledBackdropTemplate", tooltip, 0, 0)
    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", rama, "", 0)
    --BlzFrameSetAbsPoint(tooltip, FRAMEPOINT_CENTER, 0.04+0.04, 0.6-0.04-0.04)
    BlzFrameSetPoint(tooltip, FRAMEPOINT_TOP, rama, FRAMEPOINT_TOP, 0.00, 0.00)
    BlzFrameSetSize(tooltip, 0.18, 0.06)
    BlzFrameSetSize(backdrop, 0.2, 0.07)
    BlzFrameSetPoint(backdrop, FRAMEPOINT_CENTER, tooltip, FRAMEPOINT_CENTER, 0.0, 0.0)
    BlzFrameSetAlpha(backdrop, 100)

    BlzFrameSetSize(text, 0.18, 0.06)
    BlzFrameSetText(text, " ")
    BlzFrameSetPoint(text, FRAMEPOINT_CENTER, backdrop, FRAMEPOINT_CENTER, 0.0, -0.005)
    --BlzFrameSetVisible(tooltip,false)
    SHOP_TOOLTIP = text
    --return tooltip,backdrop,text
end

function CurrentGoldInShop(parent)
    local goldIco = "Textures\\GOLDCoin.blp"
    local GoldFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', parent, '', 0)
    local data = HERO[0]
    BlzFrameSetParent(GoldFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(GoldFrame, goldIco, 0, true)
    BlzFrameSetSize(GoldFrame, NextPoint / 2, NextPoint / 2)
    BlzFrameSetPoint(GoldFrame, FRAMEPOINT_TOPLEFT, parent, FRAMEPOINT_TOPLEFT, 0.00, 0.00)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", GoldFrame, "", 0)
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, 9999)
    BlzFrameSetScale(text, 2)
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, GoldFrame, FRAMEPOINT_LEFT, 0.011, 0.0)
    TimerStart(CreateTimer(), 0.1, true, function()
        BlzFrameSetText(text, R2I(data.gold))
    end)
    table.insert(BugsFH, GoldFrame)
    table.insert(BugsFH, text)
end

function ItemAddCostFromShop(FHItem, cost)
    local goldIco = "Textures\\GOLDCoin.blp"
    local GoldFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', FHItem, '', 0)
    BlzFrameSetParent(GoldFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(GoldFrame, goldIco, 0, true)
    BlzFrameSetSize(GoldFrame, NextPoint / 4, NextPoint / 4)
    BlzFrameSetPoint(GoldFrame, FRAMEPOINT_BOTTOMLEFT, FHItem, FRAMEPOINT_BOTTOMLEFT, 0.0005, -0.009)
    BlzFrameSetEnable(GoldFrame, false)
    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", GoldFrame, "", 0)
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, cost)
    BlzFrameSetScale(text, 1)
    BlzFrameSetPoint(text, FRAMEPOINT_BOTTOMLEFT, GoldFrame, FRAMEPOINT_BOTTOMLEFT, 0.01, 0.0)
    BlzFrameSetEnable(text, false)

    table.insert(BugsFH, GoldFrame)
    table.insert(BugsFH, text)
    return text, GoldFrame
end

function CloseShop()
    if BlzFrameIsVisible(SHOP) then
        BlzFrameSetVisible(SHOP, false)
        normal_sound("Sound\\Interface\\HeroDropItem1")
    end
end

function CreateCloseButton(BoxBorder, rama)
    local NextPoint = 0.039
    local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', BoxBorder, 'ScoreScreenTabButtonTemplate', 0)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)
    BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, "CloseCross", 0, true)
    BlzFrameSetSize(SelfFrame, NextPoint / 2, NextPoint / 2)
    BlzFrameSetPoint(SelfFrame, FRAMEPOINT_TOPRIGHT, rama, FRAMEPOINT_TOPRIGHT, 0.00, 0.00)
    local ClickTrig = CreateTrigger()
    BlzTriggerRegisterFrameEvent(ClickTrig, SelfFrame, FRAMEEVENT_CONTROL_CLICK)
    TriggerAddAction(ClickTrig, function()
        --print("")
        BlzFrameSetEnable(BlzGetTriggerFrame(), false)
        BlzFrameSetEnable(BlzGetTriggerFrame(), true)
        CloseShop()
    end)
    local TrigMOUSE_ENTER = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_ENTER, SelfFrame, FRAMEEVENT_MOUSE_ENTER)
    TriggerAddAction(TrigMOUSE_ENTER, function()
        --print("  ",flag)
        BlzFrameSetText(SHOP_TOOLTIP, "   ")
    end)
    local TrigMOUSE_LEAVE = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_LEAVE, SelfFrame, FRAMEEVENT_MOUSE_LEAVE)
    TriggerAddAction(TrigMOUSE_LEAVE, function()
        --print(" ")
        BlzFrameSetText(SHOP_TOOLTIP, "    ,      ,   ")
    end)
end
NextPoint = 0.039
ShopTipFH = nil
function CreateGoldInterFace(data)
    local goldIco = "Textures\\GOLDCoin.blp"
    local NextPoint = 0.039
    local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 'ScoreScreenTabButtonTemplate', 0)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)
    BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, goldIco, 0, true)
    BlzFrameSetSize(SelfFrame, NextPoint / 2, NextPoint / 2)
    BlzFrameSetAbsPoint(SelfFrame, FRAMEPOINT_CENTER, 0.85, 0.02)
    BlzFrameSetParent(SelfFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    local ClickTrig = CreateTrigger()
    BlzTriggerRegisterFrameEvent(ClickTrig, SelfFrame, FRAMEEVENT_CONTROL_CLICK)
    TriggerAddAction(ClickTrig, function()
        --print("  ")
        BlzFrameSetEnable(BlzGetTriggerFrame(), false)
        BlzFrameSetEnable(BlzGetTriggerFrame(), true)
        --BlzFrameSetVisible(SHOP, true)
        if not udg_IsBrainGame then
            BlzFrameSetVisible(ShopTipFH, false)
            CreateShop()
        else
            print("     ")
        end
    end)

    local TrigMOUSE_LEAVE = CreateTrigger()
    BlzTriggerRegisterFrameEvent(TrigMOUSE_LEAVE, SelfFrame, FRAMEEVENT_MOUSE_LEAVE)
    TriggerAddAction(TrigMOUSE_LEAVE, function()
        --print("      ")

    end)

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", SelfFrame, "", 0)
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, "0")
    BlzFrameSetScale(text, 2)
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, SelfFrame, FRAMEPOINT_LEFT, 0.011, 0.0)
    BlzFrameSetVisible(text, GetLocalPlayer() == Player(data.pid))
    BlzFrameSetText(text, data.gold)
    TimerStart(CreateTimer(), 0.1, true, function()
        BlzFrameSetText(text, R2I(data.gold))
    end)
    ShopTipFH = CreateJumpArrow(SelfFrame)
    BlzFrameSetVisible(ShopTipFH, false)
end

function CreateRTips()
    local goldIco = "Rkey"
    local NextPoint = 0.039
    --local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 'ScoreScreenTabButtonTemplate', 0)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    --BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, goldIco, 0, true)
    BlzFrameSetSize(buttonIconFrame, NextPoint / 2, NextPoint / 2)
    BlzFrameSetAbsPoint(buttonIconFrame, FRAMEPOINT_CENTER, 0.80, 0.02)
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    --BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    local text = BlzCreateFrameByType("TEXT", "ButtonChargesText", buttonIconFrame, "", 0)
    BlzFrameSetParent(text, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(text, "-R")
    BlzFrameSetScale(text, 2)
    BlzFrameSetPoint(text, FRAMEPOINT_LEFT, buttonIconFrame, FRAMEPOINT_LEFT, 0.011, 0.0)

end

--[[
do
    local real = MarkGameStarted
    function MarkGameStarted()
        real()

        local SelfFrame = BlzCreateFrameByType("GLUETEXTBUTTON", "MyScriptDialogButton", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "ScriptDialogButton", 0)
        local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)

        BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
        BlzFrameSetTexture(buttonIconFrame, "TexturePortraits\\Wolf", 0, true)
        BlzFrameSetSize(SelfFrame, NextPoint, NextPoint)
        BlzFrameSetAbsPoint(SelfFrame, FRAMEPOINT_CENTER, 0.4, 0.3)

        local TrigMOUSE_LEAVE = CreateTrigger()
        BlzTriggerRegisterFrameEvent(TrigMOUSE_LEAVE, SelfFrame, FRAMEEVENT_MOUSE_LEAVE)
        TriggerAddAction(TrigMOUSE_LEAVE, function()
            --print(" ")
        end)
    end
end
]]
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 08.03.2021 19:36
---
function AddGold(data, amount)
    if not data.gold then
        data.gold = 0
    end

    data.gold = data.gold + amount
    if data.gold <= 0 then
        data.gold = 0
    end
    BlzFrameSetText(data.GoldTextFH, R2I(data.gold))
end


function RewardGoldForKill(data,amount)
    local bonus = 0
    if data.AdditionalGoldPerKill then
        bonus = data.AdditionalGoldPerKill
    end
    UnitAddGold(data.UnitHero, 1+amount + bonus)
end
function UnitAddGold(hero, amount)
    local data = HERO[GetPlayerId(GetOwningPlayer(hero))]
    data.ShowGoldSec = 0.3
    if not data.ShowGoldAmount then
        data.ShowGoldAmount = 0
    end
    data.ShowGoldAmount = data.ShowGoldAmount + amount
    if data.ShowGold then
        data.ShowGold = false
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            data.ShowGoldSec = data.ShowGoldSec - TIMER_PERIOD
            if data.ShowGoldSec <= 0 then
                data.ShowGold = true
                if data.Investor then
                    --print(data.Investor)
                    data.ShowGoldAmount = R2I(data.ShowGoldAmount * data.Investor)
                end
                DestroyTimer(GetExpiredTimer())
                FlyTextTagGoldBounty(hero, "+" .. I2S(data.ShowGoldAmount), GetOwningPlayer(hero))
                data.StatGoldGained=data.StatGoldGained+data.ShowGoldAmount
                normal_sound("SystemGeneric\\ReceiveGold", GetUnitXY(hero))
                if data.ShowGoldAmount>5 then
                    --
                end
                DestroyEffect(AddSpecialEffect("SystemGeneric\\ResourceEffectTarget.mdl", GetUnitXY(hero)))
                AddGold(data, data.ShowGoldAmount)
                data.ShowGoldAmount = 0
            end
        end)
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 16.04.2023 15:20
---

function InitItemBDForShop()
    SHOP_BD = {
        [1] = {
            name         = "",
            descriptions = "    . |cff808080   |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNScatterRockets",
            cost         = 5000,
            lvl          = 1,
        },
        [2] = {
            name         = "",
            descriptions = "  ,  ,   , DS%    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility",
            cost         = 900,
            DS           = {10,20,30},
            lvl          = 1
        },
        [3] = {
            name         = "  ",
            descriptions = "    ,    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste",
            cost         = 50,
            DS           = {1,1,1,1,1,1,1,1,1,1},
            lvl          = 1
        },
        [4] = {
            name         = "  ",
            descriptions = "  ,     . |cff808080   ,   |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNHealingWard",
            cost         = 6000,
            lvl          = 1
        },
        [5] = {
            name         = "",
            descriptions = " ,     ,     DS%,   ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNHealingSalve",
            cost         = 49,
            DS           = {10,10,10},
            lvl          = 1
        },
        [6] = {
            name         = " ",
            descriptions = "  ,     ,          DS",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNLesserInvisibility",
            cost         = 200,
            lvl          = 1,
            DS           = {10,20,30,40,50},
        },
        [7] = {
            name         = "",
            descriptions = "     ,  + DS       ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNLeatherUpgradeOne",
            cost         = 1000,
            lvl          = 1,
            DS           = {1}
        },
        [8] = {
            name         = "",
            descriptions = "    ,      DS",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNMonsterLure.blp",
            cost         = 500,
            lvl          = 1,
            DS           = {1,1,1}
        },
        [9] = {
            name         = " ",
            descriptions = "     ,  DS ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNClayFigurine.blp",
            cost         = 600,
            lvl          = 1,
            DS           = {3}
        },
        [10] = {
            name         = "",
            descriptions = "  ,     -,    DS   100 ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNOrbOfLightning.blp",
            cost         = 5,
            lvl          = 1,
            DS           = {50}
        },
        [11] = {
            name         = "",
            descriptions = "     ,        ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNOrbOfDarkness.blp",
            cost         = 800,
            lvl          = 1,
        },
        [12] = {
            name         = " ",
            descriptions = "     .       ,  , ,       ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNStarWand.blp",
            cost         = 500,
            lvl          = 1,
        },
        [13] = {
            name         = "",
            descriptions = "    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp",
            cost         = 200,
            lvl          = 1,
        },
        [14] = {
            name         = "",
            descriptions = "     . |cff808080    |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNStrongDrink.blp",
            cost         = 3000,
            lvl          = 1,
        },
        [15] = {
            name         = "",
            descriptions = "   . |cff808080      |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNJanggo.blp",
            cost         = 3500,
            lvl          = 1,
        },
        [16] = {
            name         = "",
            descriptions = "  -  ,     DS",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNHealthStone.blp",
            cost         = 200,
            DS           = {1.6},
            lvl          = 1,
        },
        [17] = {
            name         = " ",
            descriptions = "     . |cff808080   |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp",
            cost         = 7000,
            lvl          = 1,
        },
        [18] = {
            name         = "",
            descriptions = "  ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNFlare.blp",
            cost         = 200,
            lvl          = 1,
        },
        [19] = {
            name         = "",
            descriptions = " DS,    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNCrystalBall.blp",
            cost         = 200,
            lvl          = 1,
            DS           = {""},
        },
        [20] = {
            name         = "",
            descriptions = " ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp",
            cost         = 200,
            lvl          = 1,
        },
        [21] = {
            name         = "",
            descriptions = " ,   DS          ,     ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNPotionOfRestoration.blp",
            cost         = 200,
            lvl          = 1,
            DS           = {1,1,1,1,1},
        },
        [22] = {
            name         = " ",
            descriptions = "      DS%",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNSnazzyScrollPurple.blp",
            cost         = 300,
            lvl          = 1,
            DS           = {50},
        },
        [23] = {
            name         = "   ",
            descriptions = " ,      ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNTomeRed.blp",
            cost         = 200,
            lvl          = 1,
        },
        [24] = {
            name         = "",
            descriptions = "  ,     ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNTome.blp",
            cost         = 200,
            lvl          = 1,
        },
        [25] = {
            name         = "",
            descriptions = "      ,     DS  ,      ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp",
            cost         = 50,
            lvl          = 1,
            DS           = {5,5,5,5,5}
        },
        [26] = {
            name         = "",
            descriptions = "    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNGrimWard.blp",
            cost         = 1000,
            lvl          = 1,
        },
        [27] = {
            name         = "  ",
            descriptions = "    10 ,         ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpThree.blp",
            cost         = 1000,
            lvl          = 1,
        },
        [28] = {
            name         = " ",
            descriptions = "  ,    ",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNEntrapmentWard.blp",
            cost         = 1000,
            lvl          = 1,
        },
        [29] = {
            name         = "",
            descriptions = "    ,     . |cff808080   |r",
            texture      = "ReplaceableTextures\\CommandButtons\\BTNStarWand.blp",
            cost         = 8000,
            lvl          = 1,
        },


    }
end

--CUSTOM_CODE
function Trig_Error15Out_Func001C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_Error15Out_Conditions()
if (not Trig_Error15Out_Func001C()) then
return false
end
return true
end

function Trig_Error15Out_Actions()
TriggerSleepAction(1.00)
KillUnit(GetTriggerUnit())
end

function InitTrig_Error15Out()
gg_trg_Error15Out = CreateTrigger()
TriggerRegisterLeaveRectSimple(gg_trg_Error15Out, gg_rct_Error15Out)
TriggerAddCondition(gg_trg_Error15Out, Condition(Trig_Error15Out_Conditions))
TriggerAddAction(gg_trg_Error15Out, Trig_Error15Out_Actions)
end

function Trig_Error15OutNAZAR_Conditions()
if (not (GetUnitTypeId(GetTriggerUnit()) == FourCC("h00W"))) then
return false
end
return true
end

function Trig_Error15OutNAZAR_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Bound15))
end

function InitTrig_Error15OutNAZAR()
gg_trg_Error15OutNAZAR = CreateTrigger()
TriggerRegisterLeaveRectSimple(gg_trg_Error15OutNAZAR, gg_rct_Error15Out)
TriggerAddCondition(gg_trg_Error15OutNAZAR, Condition(Trig_Error15OutNAZAR_Conditions))
TriggerAddAction(gg_trg_Error15OutNAZAR, Trig_Error15OutNAZAR_Actions)
end

function Trig_Victory15_Func001Func003A()
KillUnit(GetEnumUnit())
end

function Trig_Victory15_Func001Func004C()
if (not (IsUnitDeadBJ(gg_unit_h00W_0775) == true)) then
return false
end
if (not (IsUnitDeadBJ(gg_unit_h00W_0784) == true)) then
return false
end
if (not (IsUnitDeadBJ(gg_unit_h00W_0785) == true)) then
return false
end
return true
end

function Trig_Victory15_Func001C()
if (not Trig_Victory15_Func001Func004C()) then
return false
end
return true
end

function Trig_Victory15_Actions()
if (Trig_Victory15_Func001C()) then
DisableTrigger(gg_trg_Error15Out)
KillDestructable(gg_dest_B00B_21136)
ForGroupBJ(udg_Remove15, Trig_Victory15_Func001Func003A)
else
end
end

function InitTrig_Victory15()
gg_trg_Victory15 = CreateTrigger()
TriggerRegisterUnitEvent(gg_trg_Victory15, gg_unit_h00W_0775, EVENT_UNIT_DEATH)
TriggerRegisterUnitEvent(gg_trg_Victory15, gg_unit_h00W_0784, EVENT_UNIT_DEATH)
TriggerRegisterUnitEvent(gg_trg_Victory15, gg_unit_h00W_0785, EVENT_UNIT_DEATH)
TriggerAddAction(gg_trg_Victory15, Trig_Victory15_Actions)
end

function Trig_ExitFrom15_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_21136) == true)) then
return false
end
return true
end

function Trig_ExitFrom15_Conditions()
if (not Trig_ExitFrom15_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom15_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_EnterBoss))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_BoundBoss)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_ExitFrom15()
gg_trg_ExitFrom15 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom15, gg_rct_Exit15)
TriggerAddCondition(gg_trg_ExitFrom15, Condition(Trig_ExitFrom15_Conditions))
TriggerAddAction(gg_trg_ExitFrom15, Trig_ExitFrom15_Actions)
end

function Trig_InitRoom15_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom15_Func002Func001C()
if (not (GetUnitTypeId(GetEnumUnit()) == FourCC("h00V"))) then
return false
end
return true
end

function Trig_InitRoom15_Func002A()
if (Trig_InitRoom15_Func002Func001C()) then
GroupAddUnitSimple(GetEnumUnit(), udg_Remove15)
else
end
end

function Trig_InitRoom15_Actions()
DisableTrigger(GetTriggeringTrigger())
ForGroupBJ(GetUnitsInRectAll(gg_rct_Error15Out), Trig_InitRoom15_Func002A)
    InitAllFallenWall()
end

function InitTrig_InitRoom15()
gg_trg_InitRoom15 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom15, gg_rct_Enter15)
TriggerAddCondition(gg_trg_InitRoom15, Condition(Trig_InitRoom15_Conditions))
TriggerAddAction(gg_trg_InitRoom15, Trig_InitRoom15_Actions)
end

function Trig_InitRoom14_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom14_Func009Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom14_Func009A()
if (Trig_InitRoom14_Func009Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom14_Func010Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom14_Func010A()
if (Trig_InitRoom14_Func010Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom14_Func011Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom14_Func011A()
if (Trig_InitRoom14_Func011Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom14_Func014Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom14_Func014A()
if (Trig_InitRoom14_Func014Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_InitRoom14_Func015Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B005"))) then
return false
end
return true
end

function Trig_InitRoom14_Func015A()
if (Trig_InitRoom14_Func015Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_InitRoom14_Actions()
    udg_Ball=nil
SetDestructableOccluderHeight(gg_dest_B00D_20643, 128)
    CreateFloorInRoom(GetDestructableX(gg_dest_B00D_20643), GetDestructableY(gg_dest_B00D_20643),10,10)
DisableTrigger(GetTriggeringTrigger())
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound14)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
EnumDestructablesInRectAll(gg_rct_R14B1, Trig_InitRoom14_Func009A)
EnumDestructablesInRectAll(gg_rct_R14B2, Trig_InitRoom14_Func010A)
EnumDestructablesInRectAll(gg_rct_R14B3, Trig_InitRoom14_Func011A)
TriggerSleepAction(5.00)
EnumDestructablesInRectAll(gg_rct_UP14, Trig_InitRoom14_Func014A)
EnumDestructablesInRectAll(gg_rct_UP14, Trig_InitRoom14_Func015A)
end

function InitTrig_InitRoom14()
gg_trg_InitRoom14 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom14, gg_rct_Enter14)
TriggerAddCondition(gg_trg_InitRoom14, Condition(Trig_InitRoom14_Conditions))
TriggerAddAction(gg_trg_InitRoom14, Trig_InitRoom14_Actions)
end

function Trig_Leave14Fix_Func001Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_Leave14Fix_Func001C()
if (GetUnitTypeId(GetTriggerUnit()) == FourCC("h00R")) then
return true
end
if (Trig_Leave14Fix_Func001Func002C()) then
return true
end
return false
end

function Trig_Leave14Fix_Conditions()
if (not Trig_Leave14Fix_Func001C()) then
return false
end
return true
end

function Trig_Leave14Fix_Actions()
TriggerSleepAction(2.00)
    UnitStartFallAnim(GetTriggerUnit(),1000)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter14))
end

function InitTrig_Leave14Fix()
gg_trg_Leave14Fix = CreateTrigger()
TriggerRegisterLeaveRectSimple(gg_trg_Leave14Fix, gg_rct_Region14)
TriggerAddCondition(gg_trg_Leave14Fix, Condition(Trig_Leave14Fix_Conditions))
TriggerAddAction(gg_trg_Leave14Fix, Trig_Leave14Fix_Actions)
end

function Trig_ExitFrom14_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_20775) == true)) then
return false
end
return true
end

function Trig_ExitFrom14_Conditions()
if (not Trig_ExitFrom14_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom14_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter15))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound15)
    HeroFixRespPos()
    CreateEnteringFrame(nil, " ")
end

function InitTrig_ExitFrom14()
gg_trg_ExitFrom14 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom14, gg_rct_Exit14)
TriggerAddCondition(gg_trg_ExitFrom14, Condition(Trig_ExitFrom14_Conditions))
TriggerAddAction(gg_trg_ExitFrom14, Trig_ExitFrom14_Actions)
end

function Trig_Victory14_Func001Func003C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_20775) == true)) then
return false
end
return true
end

function Trig_Victory14_Func001Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Victory14_Func001Func005A()
if (Trig_Victory14_Func001Func005Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Victory14_Func001Func006C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_20643) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20784) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20785) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20786) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20787) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20788) == true)) then
return false
end
return true
end

function Trig_Victory14_Func001C()
if (not Trig_Victory14_Func001Func006C()) then
return false
end
return true
end

function Trig_Victory14_Actions()
if (Trig_Victory14_Func001C()) then
DisableTrigger(gg_trg_Leave14Fix)
KillDestructable(gg_dest_B00B_20775)
EnumDestructablesInRectAll(gg_rct_R14B1, Trig_Victory14_Func001Func005A)
else
TriggerSleepAction(0.50)
if (Trig_Victory14_Func001Func003C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory14()
gg_trg_Victory14 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20643)
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20784)
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20785)
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20786)
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20787)
TriggerRegisterDeathEvent(gg_trg_Victory14, gg_dest_B00D_20788)
TriggerAddAction(gg_trg_Victory14, Trig_Victory14_Actions)
end

function Trig_InitRoom13_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom13_Conditions()
if (not Trig_InitRoom13_Func002C()) then
return false
end
return true
end

function Trig_InitRoom13_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom13_Func004A()
if (Trig_InitRoom13_Func004Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom13_Actions()
DisableTrigger(GetTriggeringTrigger())
    HeroFixRespPos()
EnumDestructablesInRectAll(gg_rct_Start13, Trig_InitRoom13_Func004A)
end

function InitTrig_InitRoom13()
gg_trg_InitRoom13 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom13, gg_rct_Enter13)
TriggerAddCondition(gg_trg_InitRoom13, Condition(Trig_InitRoom13_Conditions))
TriggerAddAction(gg_trg_InitRoom13, Trig_InitRoom13_Actions)
end

function Trig_Victory13_Func001Func002Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Victory13_Func001Func002A()
if (Trig_Victory13_Func001Func002Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Victory13_Func001Func003C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_20363) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20366) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20367) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20368) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20365) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_20364) == true)) then
return false
end
return true
end

function Trig_Victory13_Func001C()
if (not Trig_Victory13_Func001Func003C()) then
return false
end
return true
end

function Trig_Victory13_Actions()
if (Trig_Victory13_Func001C()) then
KillDestructable(gg_dest_B00B_20321)
EnumDestructablesInRectAll(gg_rct_Start13, Trig_Victory13_Func001Func002A)
else
end
end

function InitTrig_Victory13()
gg_trg_Victory13 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20363)
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20366)
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20367)
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20368)
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20365)
TriggerRegisterDeathEvent(gg_trg_Victory13, gg_dest_B00D_20364)
TriggerAddAction(gg_trg_Victory13, Trig_Victory13_Actions)
end

function Trig_ExitFrom13_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_20321) == true)) then
return false
end
return true
end

function Trig_ExitFrom13_Conditions()
if (not Trig_ExitFrom13_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom13_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter14))
    UnitStartFallAnim(udg_HERO,1000)
    HeroFixRespPos()
end

function InitTrig_ExitFrom13()
gg_trg_ExitFrom13 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom13, gg_rct_Exit13)
TriggerAddCondition(gg_trg_ExitFrom13, Condition(Trig_ExitFrom13_Conditions))
TriggerAddAction(gg_trg_ExitFrom13, Trig_ExitFrom13_Actions)
end

function Trig_Leave13Fix_Conditions()
if (not (GetUnitTypeId(GetTriggerUnit()) == FourCC("h00R"))) then
return false
end
return true
end

function Trig_Leave13Fix_Actions()
DisplayTextToForce(GetPlayersAll(), "TRIGSTR_878")
TriggerSleepAction(2.00)
    UnitStartFallAnim(GetTriggerUnit(),1000)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Region13))
end

function InitTrig_Leave13Fix()
gg_trg_Leave13Fix = CreateTrigger()
TriggerRegisterLeaveRectSimple(gg_trg_Leave13Fix, gg_rct_Region13)
TriggerAddCondition(gg_trg_Leave13Fix, Condition(Trig_Leave13Fix_Conditions))
TriggerAddAction(gg_trg_Leave13Fix, Trig_Leave13Fix_Actions)
end

function Trig_InitRoom12_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom12_Conditions()
if (not Trig_InitRoom12_Func002C()) then
return false
end
return true
end

function Trig_InitRoom12_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom12_Func004A()
if (Trig_InitRoom12_Func004Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom12_Actions()
DisableTrigger(GetTriggeringTrigger())
    HeroFixRespPos()
EnumDestructablesInRectAll(gg_rct_Start12, Trig_InitRoom12_Func004A)
end

function InitTrig_InitRoom12()
gg_trg_InitRoom12 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom12, gg_rct_Enter12)
TriggerAddCondition(gg_trg_InitRoom12, Condition(Trig_InitRoom12_Conditions))
TriggerAddAction(gg_trg_InitRoom12, Trig_InitRoom12_Actions)
end

function Trig_PlatformUp12_Func001Func002Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_PlatformUp12_Func001Func002A()
if (Trig_PlatformUp12_Func001Func002Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_PlatformUp12_Func001Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_PlatformUp12_Func001Func005A()
if (Trig_PlatformUp12_Func001Func005Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
EnableTrigger(GetTriggeringTrigger())
DestructableRestoreLife(gg_dest_B00E_19641, 100.00, true)
DestructableRestoreLife(gg_dest_B00E_19642, 100.00, true)
else
end
end

function Trig_PlatformUp12_Func001Func007C()
return true
end

function Trig_PlatformUp12_Func001Func008C()
if (not (IsDestructableDeadBJ(gg_dest_B00E_19641) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_19642) == true)) then
return false
end
return true
end

function Trig_PlatformUp12_Func001C()
if (not Trig_PlatformUp12_Func001Func008C()) then
return false
end
return true
end

function Trig_PlatformUp12_Actions()
if (Trig_PlatformUp12_Func001C()) then
EnumDestructablesInRectAll(gg_rct_Start12, Trig_PlatformUp12_Func001Func002A)
DisableTrigger(GetTriggeringTrigger())
TriggerSleepAction(5.00)
EnumDestructablesInRectAll(gg_rct_Start12, Trig_PlatformUp12_Func001Func005A)
else
TriggerSleepAction(0.50)
if (Trig_PlatformUp12_Func001Func007C()) then
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
else
end
end
end

function InitTrig_PlatformUp12()
gg_trg_PlatformUp12 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_PlatformUp12, gg_dest_B00E_19641)
TriggerRegisterDeathEvent(gg_trg_PlatformUp12, gg_dest_B00E_19642)
TriggerAddAction(gg_trg_PlatformUp12, Trig_PlatformUp12_Actions)
end

function Trig_Single12_Actions()
TriggerSleepAction(2.00)
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function InitTrig_Single12()
gg_trg_Single12 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Single12, gg_dest_B00E_19723)
TriggerAddAction(gg_trg_Single12, Trig_Single12_Actions)
end

function Trig_Victory12_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_19707) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_19723) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_19641) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_19642) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_19706) == true)) then
return false
end
return true
end

function Trig_Victory12_Func001C()
if (not Trig_Victory12_Func001Func002C()) then
return false
end
return true
end

function Trig_Victory12_Actions()
if (Trig_Victory12_Func001C()) then
KillDestructable(gg_dest_B00B_19643)
else
end
end

function InitTrig_Victory12()
gg_trg_Victory12 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory12, gg_dest_B00D_19707)
TriggerRegisterDeathEvent(gg_trg_Victory12, gg_dest_B00E_19723)
TriggerRegisterDeathEvent(gg_trg_Victory12, gg_dest_B00E_19641)
TriggerRegisterDeathEvent(gg_trg_Victory12, gg_dest_B00E_19642)
TriggerRegisterDeathEvent(gg_trg_Victory12, gg_dest_B00D_19706)
TriggerAddAction(gg_trg_Victory12, Trig_Victory12_Actions)
end

function Trig_Restore12_Func003Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_19643) == true)) then
return false
end
return true
end

function Trig_Restore12_Func003Func003C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_19707) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_19706) == true)) then
return false
end
return true
end

function Trig_Restore12_Func003C()
if (not Trig_Restore12_Func003Func003C()) then
return false
end
return true
end

function Trig_Restore12_Actions()
if (Trig_Restore12_Func003C()) then
else
TriggerSleepAction(5.00)
if (Trig_Restore12_Func003Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Restore12()
gg_trg_Restore12 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Restore12, gg_dest_B00D_19707)
TriggerRegisterDeathEvent(gg_trg_Restore12, gg_dest_B00D_19706)
TriggerAddAction(gg_trg_Restore12, Trig_Restore12_Actions)
end

function Trig_ExitFrom12_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_19643) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom12_Conditions()
if (not Trig_ExitFrom12_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom12_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter13))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound13)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_ExitFrom12()
gg_trg_ExitFrom12 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom12, gg_rct_Exit12)
TriggerAddCondition(gg_trg_ExitFrom12, Condition(Trig_ExitFrom12_Conditions))
TriggerAddAction(gg_trg_ExitFrom12, Trig_ExitFrom12_Actions)
end

function Trig_Patrol12_Actions()
UnitAddAbilityBJ(FourCC("A004"), gg_unit_opeo_0264)
IssuePointOrderLocBJ(gg_unit_opeo_0264, "patrol", GetRectCenter(gg_rct_Patrol12))
end

function InitTrig_Patrol12()
gg_trg_Patrol12 = CreateTrigger()
TriggerAddAction(gg_trg_Patrol12, Trig_Patrol12_Actions)
end

function Trig_Button1101_Func001Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func001A()
if (Trig_Button1101_Func001Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1101_Func002Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func002A()
if (Trig_Button1101_Func002Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1101_Func003Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func003A()
if (Trig_Button1101_Func003Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1101_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func004A()
if (Trig_Button1101_Func004Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1101_Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func005A()
if (Trig_Button1101_Func005Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1101_Func007Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func007A()
if (Trig_Button1101_Func007Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1101_Func008Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func008A()
if (Trig_Button1101_Func008Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1101_Func009Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func009A()
if (Trig_Button1101_Func009Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1101_Func010Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func010A()
if (Trig_Button1101_Func010Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1101_Func011Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1101_Func011A()
if (Trig_Button1101_Func011Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1101_Actions()
EnumDestructablesInRectAll(gg_rct_R11B1_0, Trig_Button1101_Func001A)
EnumDestructablesInRectAll(gg_rct_R11B1_1, Trig_Button1101_Func002A)
EnumDestructablesInRectAll(gg_rct_R11B1_2, Trig_Button1101_Func003A)
EnumDestructablesInRectAll(gg_rct_R11B1_3, Trig_Button1101_Func004A)
EnumDestructablesInRectAll(gg_rct_R11B1_4, Trig_Button1101_Func005A)
TriggerSleepAction(5.00)
EnumDestructablesInRectAll(gg_rct_R11B1_0, Trig_Button1101_Func007A)
EnumDestructablesInRectAll(gg_rct_R11B1_1, Trig_Button1101_Func008A)
EnumDestructablesInRectAll(gg_rct_R11B1_2, Trig_Button1101_Func009A)
EnumDestructablesInRectAll(gg_rct_R11B1_3, Trig_Button1101_Func010A)
EnumDestructablesInRectAll(gg_rct_R11B1_4, Trig_Button1101_Func011A)
end

function InitTrig_Button1101()
gg_trg_Button1101 = CreateTrigger()
DisableTrigger(gg_trg_Button1101)
TriggerRegisterDeathEvent(gg_trg_Button1101, gg_dest_DTfx_17980)
TriggerAddAction(gg_trg_Button1101, Trig_Button1101_Actions)
end

function Trig_Button1102_Func001Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1102_Func001A()
if (Trig_Button1102_Func001Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1102_Func002Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1102_Func002A()
if (Trig_Button1102_Func002Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1102_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1102_Func004A()
if (Trig_Button1102_Func004Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1102_Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1102_Func005A()
if (Trig_Button1102_Func005Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1102_Actions()
EnumDestructablesInRectAll(gg_rct_R11B2_0, Trig_Button1102_Func001A)
EnumDestructablesInRectAll(gg_rct_R11B2_1, Trig_Button1102_Func002A)
TriggerSleepAction(5.00)
EnumDestructablesInRectAll(gg_rct_R11B2_0, Trig_Button1102_Func004A)
EnumDestructablesInRectAll(gg_rct_R11B2_1, Trig_Button1102_Func005A)
end

function InitTrig_Button1102()
gg_trg_Button1102 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Button1102, gg_dest_DTfx_16046)
TriggerAddAction(gg_trg_Button1102, Trig_Button1102_Actions)
end

function Trig_Button1103_Func001Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1103_Func001A()
if (Trig_Button1103_Func001Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1103_Func002Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1103_Func002A()
if (Trig_Button1103_Func002Func001C()) then
        MoveDestructableUp(GetEnumDestructable(), 500, 5)
else
end
end

function Trig_Button1103_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1103_Func004A()
if (Trig_Button1103_Func004Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1103_Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_Button1103_Func005A()
if (Trig_Button1103_Func005Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_Button1103_Actions()
EnumDestructablesInRectAll(gg_rct_R11B3_0, Trig_Button1103_Func001A)
EnumDestructablesInRectAll(gg_rct_R11B3_1, Trig_Button1103_Func002A)
TriggerSleepAction(5.00)
EnumDestructablesInRectAll(gg_rct_R11B3_0, Trig_Button1103_Func004A)
EnumDestructablesInRectAll(gg_rct_R11B3_1, Trig_Button1103_Func005A)
end

function InitTrig_Button1103()
gg_trg_Button1103 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Button1103, gg_dest_DTfx_16051)
TriggerAddAction(gg_trg_Button1103, Trig_Button1103_Actions)
end

function Trig_Button1101Restore_Actions()
TriggerSleepAction(8.00)
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function InitTrig_Button1101Restore()
gg_trg_Button1101Restore = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Button1101Restore, gg_dest_DTfx_17980)
TriggerAddAction(gg_trg_Button1101Restore, Trig_Button1101Restore_Actions)
end

function Trig_Button1102Restore_Actions()
TriggerSleepAction(8.00)
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function InitTrig_Button1102Restore()
gg_trg_Button1102Restore = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Button1102Restore, gg_dest_DTfx_16046)
TriggerAddAction(gg_trg_Button1102Restore, Trig_Button1102Restore_Actions)
end

function Trig_Button1103Restore_Actions()
TriggerSleepAction(8.00)
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function InitTrig_Button1103Restore()
gg_trg_Button1103Restore = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Button1103Restore, gg_dest_DTfx_16051)
TriggerAddAction(gg_trg_Button1103Restore, Trig_Button1103Restore_Actions)
end

function Trig_Victory_Actions()
KillDestructable(gg_dest_B00B_16092)
DisableTrigger(GetTriggeringTrigger())
end

function InitTrig_Victory()
gg_trg_Victory = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory, gg_dest_DTfx_16051)
TriggerAddAction(gg_trg_Victory, Trig_Victory_Actions)
end

function Trig_CreateFoorInRoom11_Func003Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func003A()
if (Trig_CreateFoorInRoom11_Func003Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Func004Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func004A()
if (Trig_CreateFoorInRoom11_Func004Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Func005Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func005A()
if (Trig_CreateFoorInRoom11_Func005Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Func006Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func006A()
if (Trig_CreateFoorInRoom11_Func006Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Func007Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func007A()
if (Trig_CreateFoorInRoom11_Func007Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Func008Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_CreateFoorInRoom11_Func008A()
if (Trig_CreateFoorInRoom11_Func008Func001C()) then
RemoveDestructable(GetEnumDestructable())
else
end
end

function Trig_CreateFoorInRoom11_Actions()
SetDestructableOccluderHeight(gg_dest_DTfx_17980, 128)
    CreateFloorInRoom(GetDestructableX(gg_dest_DTfx_17980), GetDestructableY(gg_dest_DTfx_17980),10,6)
EnumDestructablesInRectAll(gg_rct_Start11_0, Trig_CreateFoorInRoom11_Func003A)
EnumDestructablesInRectAll(gg_rct_Start11_1, Trig_CreateFoorInRoom11_Func004A)
EnumDestructablesInRectAll(gg_rct_Start11_2, Trig_CreateFoorInRoom11_Func005A)
EnumDestructablesInRectAll(gg_rct_Start11_3, Trig_CreateFoorInRoom11_Func006A)
EnumDestructablesInRectAll(gg_rct_Start11_4, Trig_CreateFoorInRoom11_Func007A)
EnumDestructablesInRectAll(gg_rct_Start11_5, Trig_CreateFoorInRoom11_Func008A)
end

function InitTrig_CreateFoorInRoom11()
gg_trg_CreateFoorInRoom11 = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_CreateFoorInRoom11, 1.00)
TriggerAddAction(gg_trg_CreateFoorInRoom11, Trig_CreateFoorInRoom11_Actions)
end

function Trig_InitRoom11DownForRegion_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom11DownForRegion_Func007Func001C()
if (not (GetDestructableTypeId(GetEnumDestructable()) == FourCC("B00G"))) then
return false
end
return true
end

function Trig_InitRoom11DownForRegion_Func007A()
if (Trig_InitRoom11DownForRegion_Func007Func001C()) then
        MoveDestructableDown(GetEnumDestructable(), -500, 5)
else
end
end

function Trig_InitRoom11DownForRegion_Actions()
DisableTrigger(GetTriggeringTrigger())
EnableTrigger(gg_trg_Out11)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound11)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
EnumDestructablesInRectAll(gg_rct_Region11, Trig_InitRoom11DownForRegion_Func007A)
TriggerSleepAction(5.00)
EnableTrigger(gg_trg_Button1101)
end

function InitTrig_InitRoom11DownForRegion()
gg_trg_InitRoom11DownForRegion = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom11DownForRegion, gg_rct_Enter11)
TriggerAddCondition(gg_trg_InitRoom11DownForRegion, Condition(Trig_InitRoom11DownForRegion_Conditions))
TriggerAddAction(gg_trg_InitRoom11DownForRegion, Trig_InitRoom11DownForRegion_Actions)
end

function Trig_ExitFrom11_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom11_Conditions()
if (not Trig_ExitFrom11_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom11_Actions()
DisableTrigger(gg_trg_Out11)
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter12))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound12)
    HeroFixRespPos()
end

function InitTrig_ExitFrom11()
gg_trg_ExitFrom11 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom11, gg_rct_Exit11)
TriggerAddCondition(gg_trg_ExitFrom11, Condition(Trig_ExitFrom11_Conditions))
TriggerAddAction(gg_trg_ExitFrom11, Trig_ExitFrom11_Actions)
end

function Trig_Out11_Func001Func001C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_Out11_Func001C()
if (Trig_Out11_Func001Func001C()) then
return true
end
return false
end

function Trig_Out11_Conditions()
if (not Trig_Out11_Func001C()) then
return false
end
return true
end

function Trig_Out11_Actions()
KillUnit(GetTriggerUnit())
end

function InitTrig_Out11()
gg_trg_Out11 = CreateTrigger()
DisableTrigger(gg_trg_Out11)
TriggerRegisterLeaveRectSimple(gg_trg_Out11, gg_rct_Region11)
TriggerAddCondition(gg_trg_Out11, Condition(Trig_Out11_Conditions))
TriggerAddAction(gg_trg_Out11, Trig_Out11_Actions)
end

function Trig_ExitFrom10_Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_17599) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom10_Conditions()
if (not Trig_ExitFrom10_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom10_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter11))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound11)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_ExitFrom10()
gg_trg_ExitFrom10 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom10, gg_rct_Exit10)
TriggerAddCondition(gg_trg_ExitFrom10, Condition(Trig_ExitFrom10_Conditions))
TriggerAddAction(gg_trg_ExitFrom10, Trig_ExitFrom10_Actions)
end

function Trig_Victory10_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_17599) == true)) then
return false
end
return true
end

function Trig_Victory10_Func001Func004C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_17596) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17597) == true)) then
return false
end
return true
end

function Trig_Victory10_Func001C()
if (not Trig_Victory10_Func001Func004C()) then
return false
end
return true
end

function Trig_Victory10_Actions()
if (Trig_Victory10_Func001C()) then
KillDestructable(gg_dest_B00B_17599)
else
TriggerSleepAction(0.50)
if (Trig_Victory10_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory10()
gg_trg_Victory10 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory10, gg_dest_B00D_17596)
TriggerRegisterDeathEvent(gg_trg_Victory10, gg_dest_B00D_17597)
TriggerAddAction(gg_trg_Victory10, Trig_Victory10_Actions)
end

function Trig_Error10In_Func001C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_Error10In_Conditions()
if (not Trig_Error10In_Func001C()) then
return false
end
return true
end

function Trig_Error10In_Actions()
TriggerSleepAction(1.00)
KillUnit(GetTriggerUnit())
end

function InitTrig_Error10In()
gg_trg_Error10In = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_Error10In, gg_rct_Error10)
TriggerAddCondition(gg_trg_Error10In, Condition(Trig_Error10In_Conditions))
TriggerAddAction(gg_trg_Error10In, Trig_Error10In_Actions)
end

function Trig_Error10Out_Func001C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_Error10Out_Conditions()
if (not Trig_Error10Out_Func001C()) then
return false
end
return true
end

function Trig_Error10Out_Actions()
TriggerSleepAction(1.00)
KillUnit(GetTriggerUnit())
end

function InitTrig_Error10Out()
gg_trg_Error10Out = CreateTrigger()
TriggerRegisterLeaveRectSimple(gg_trg_Error10Out, gg_rct_Error10Out)
TriggerAddCondition(gg_trg_Error10Out, Condition(Trig_Error10Out_Conditions))
TriggerAddAction(gg_trg_Error10Out, Trig_Error10Out_Actions)
end

function Trig_ExitFrom09_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_17533) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom09_Conditions()
if (not Trig_ExitFrom09_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom09_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter10))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound10)
    HeroFixRespPos()
    CreateEnteringFrame(nil, " ")
end

function InitTrig_ExitFrom09()
gg_trg_ExitFrom09 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom09, gg_rct_Exit09)
TriggerAddCondition(gg_trg_ExitFrom09, Condition(Trig_ExitFrom09_Conditions))
TriggerAddAction(gg_trg_ExitFrom09, Trig_ExitFrom09_Actions)
end

function Trig_InitRoom09_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitRoom09_Conditions()
if (not Trig_InitRoom09_Func003C()) then
return false
end
return true
end

function Trig_InitRoom09_Func006Func001C()
if (not (GetUnitTypeId(GetEnumUnit()) == FourCC("h00G"))) then
return false
end
return true
end

function Trig_InitRoom09_Func006A()
if (Trig_InitRoom09_Func006Func001C()) then
GroupAddUnitSimple(GetEnumUnit(), udg_Remove09)
else
end
end

function Trig_InitRoom09_Actions()
DisableTrigger(GetTriggeringTrigger())
SetUnitColor(gg_unit_h00M_0257, PLAYER_COLOR_RED)
    HeroFixRespPos()
    StartBlackHole(gg_unit_h00M_0257)
ForGroupBJ(GetUnitsInRectAll(gg_rct_Region09), Trig_InitRoom09_Func006A)
end

function InitTrig_InitRoom09()
gg_trg_InitRoom09 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitRoom09, gg_rct_Enter09)
TriggerAddCondition(gg_trg_InitRoom09, Condition(Trig_InitRoom09_Conditions))
TriggerAddAction(gg_trg_InitRoom09, Trig_InitRoom09_Actions)
end

function Trig_Victory09_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_17533) == true)) then
return false
end
return true
end

function Trig_Victory09_Func001Func004A()
KillUnit(GetEnumUnit())
ShowUnitHide(GetEnumUnit())
end

function Trig_Victory09_Func001Func005C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_17530) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17529) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17532) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17531) == true)) then
return false
end
return true
end

function Trig_Victory09_Func001C()
if (not Trig_Victory09_Func001Func005C()) then
return false
end
return true
end

function Trig_Victory09_Actions()
if (Trig_Victory09_Func001C()) then
KillDestructable(gg_dest_B00B_17533)
ForGroupBJ(udg_Remove09, Trig_Victory09_Func001Func004A)
else
TriggerSleepAction(0.50)
if (Trig_Victory09_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory09()
gg_trg_Victory09 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory09, gg_dest_B00D_17530)
TriggerRegisterDeathEvent(gg_trg_Victory09, gg_dest_B00D_17529)
TriggerRegisterDeathEvent(gg_trg_Victory09, gg_dest_B00D_17532)
TriggerRegisterDeathEvent(gg_trg_Victory09, gg_dest_B00D_17531)
TriggerAddAction(gg_trg_Victory09, Trig_Victory09_Actions)
end

function Trig_OffHole_Func002Func004C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_17533) == true)) then
return false
end
return true
end

function Trig_OffHole_Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_17533) == true)) then
return false
end
return true
end

function Trig_OffHole_Actions()
udg_HoleIsWork = false
if (Trig_OffHole_Func002C()) then
else
        FlyTimer(25)
TriggerSleepAction(25.00)
if (Trig_OffHole_Func002Func004C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
udg_HoleIsWork = true
end
end
end

function InitTrig_OffHole()
gg_trg_OffHole = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_OffHole, gg_dest_B00F_17534)
TriggerAddAction(gg_trg_OffHole, Trig_OffHole_Actions)
end

function Trig_InitCustomTraps_Func001Func001C()
if (not (GetUnitTypeId(GetEnumUnit()) == FourCC("h000"))) then
return false
end
return true
end

function Trig_InitCustomTraps_Func001A()
if (Trig_InitCustomTraps_Func001Func001C()) then
        InitUnitBulletTrap(GetEnumUnit(), true)
GroupAddUnitSimple(GetEnumUnit(), udg_Remove08)
else
end
end

function Trig_InitCustomTraps_Actions()
ForGroupBJ(GetUnitsInRectAll(gg_rct_Region08), Trig_InitCustomTraps_Func001A)
end

function InitTrig_InitCustomTraps()
gg_trg_InitCustomTraps = CreateTrigger()
TriggerAddAction(gg_trg_InitCustomTraps, Trig_InitCustomTraps_Actions)
end

function Trig_ExitFrom08_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_17182) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom08_Conditions()
if (not Trig_ExitFrom08_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom08_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter09))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound09)
    CreateEnteringFrame(nil, " ")
    HeroFixRespPos()
end

function InitTrig_ExitFrom08()
gg_trg_ExitFrom08 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom08, gg_rct_Exit08)
TriggerAddCondition(gg_trg_ExitFrom08, Condition(Trig_ExitFrom08_Conditions))
TriggerAddAction(gg_trg_ExitFrom08, Trig_ExitFrom08_Actions)
end

function Trig_Resize08_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_Resize08_Actions()
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound08)
end

function InitTrig_Resize08()
gg_trg_Resize08 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_Resize08, gg_rct_ResizePlace08)
TriggerAddCondition(gg_trg_Resize08, Condition(Trig_Resize08_Conditions))
TriggerAddAction(gg_trg_Resize08, Trig_Resize08_Actions)
end

function Trig_Victory08_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_17182) == true)) then
return false
end
return true
end

function Trig_Victory08_Func001Func004A()
KillUnit(GetEnumUnit())
ShowUnitHide(GetEnumUnit())
end

function Trig_Victory08_Func001Func005C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_17155) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17275) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_17276) == true)) then
return false
end
return true
end

function Trig_Victory08_Func001C()
if (not Trig_Victory08_Func001Func005C()) then
return false
end
return true
end

function Trig_Victory08_Actions()
if (Trig_Victory08_Func001C()) then
KillDestructable(gg_dest_B00B_17182)
ForGroupBJ(udg_Remove08, Trig_Victory08_Func001Func004A)
else
TriggerSleepAction(2.00)
if (Trig_Victory08_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory08()
gg_trg_Victory08 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory08, gg_dest_B00D_17155)
TriggerRegisterDeathEvent(gg_trg_Victory08, gg_dest_B00D_17275)
TriggerRegisterDeathEvent(gg_trg_Victory08, gg_dest_B00D_17276)
TriggerAddAction(gg_trg_Victory08, Trig_Victory08_Actions)
end

function Trig_ExitFrom07_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_16680) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom07_Conditions()
if (not Trig_ExitFrom07_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom07_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter08))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound08Start)
    HeroFixRespPos()
    CreateEnteringFrame(nil, " ")
TriggerExecute(gg_trg_InitCustomTraps)
end

function InitTrig_ExitFrom07()
gg_trg_ExitFrom07 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom07, gg_rct_Exit07)
TriggerAddCondition(gg_trg_ExitFrom07, Condition(Trig_ExitFrom07_Conditions))
TriggerAddAction(gg_trg_ExitFrom07, Trig_ExitFrom07_Actions)
end

function Trig_InitOrders_Func007A()
GroupAddUnitSimple(GetEnumUnit(), udg_SpikeUnitsForRemove)
end

function Trig_InitOrders_Actions()
udg_Buttons[1] = gg_dest_B00D_16684
udg_Buttons[2] = gg_dest_B00D_16686
udg_Buttons[3] = gg_dest_B00D_16699
udg_Buttons[4] = gg_dest_B00D_16702
udg_Buttons[5] = gg_dest_B00D_16685
udg_Buttons[6] = gg_dest_B00D_16701
ForGroupBJ(GetUnitsInRectAll(gg_rct_SpikesZone), Trig_InitOrders_Func007A)
end

function InitTrig_InitOrders()
gg_trg_InitOrders = CreateTrigger()
TriggerAddAction(gg_trg_InitOrders, Trig_InitOrders_Actions)
end

function Trig_DieCHK_Func001Func008Func002A()
KillUnit(GetEnumUnit())
end

function Trig_DieCHK_Func001Func008C()
if (not (udg_CurrentOrder > 6)) then
return false
end
return true
end

function Trig_DieCHK_Func001C()
if (not (GetDyingDestructable() == udg_Buttons[udg_CurrentOrder])) then
return false
end
return true
end

function Trig_DieCHK_Actions()
if (Trig_DieCHK_Func001C()) then
udg_CurrentOrder = (udg_CurrentOrder + 1)
PlaySoundBJ(gg_snd_BattlenetDeath1A)
if (Trig_DieCHK_Func001Func008C()) then
KillDestructable(gg_dest_B00B_16680)
ForGroupBJ(udg_SpikeUnitsForRemove, Trig_DieCHK_Func001Func008Func002A)
DisableTrigger(GetTriggeringTrigger())
return 
else
end
else
TriggerSleepAction(0.10)
udg_CurrentOrder = 1
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
TriggerExecute(gg_trg_ErrorClear)
end
end

function InitTrig_DieCHK()
gg_trg_DieCHK = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16702)
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16684)
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16685)
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16701)
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16686)
TriggerRegisterDeathEvent(gg_trg_DieCHK, gg_dest_B00D_16699)
TriggerAddAction(gg_trg_DieCHK, Trig_DieCHK_Actions)
end

function Trig_ErrorClear_Actions()
DestructableRestoreLife(udg_Buttons[1], 100.00, true)
DestructableRestoreLife(udg_Buttons[2], 100.00, true)
DestructableRestoreLife(udg_Buttons[3], 100.00, true)
DestructableRestoreLife(udg_Buttons[4], 100.00, true)
DestructableRestoreLife(udg_Buttons[5], 100.00, true)
DestructableRestoreLife(udg_Buttons[6], 100.00, true)
PlaySoundBJ(gg_snd_Warning)
end

function InitTrig_ErrorClear()
gg_trg_ErrorClear = CreateTrigger()
TriggerAddAction(gg_trg_ErrorClear, Trig_ErrorClear_Actions)
end

function Trig_ExitFrom06_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_16430) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom06_Conditions()
if (not Trig_ExitFrom06_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom06_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter07))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound07)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_ExitFrom06()
gg_trg_ExitFrom06 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom06, gg_rct_Exit06)
TriggerAddCondition(gg_trg_ExitFrom06, Condition(Trig_ExitFrom06_Conditions))
TriggerAddAction(gg_trg_ExitFrom06, Trig_ExitFrom06_Actions)
end

function Trig_Victory06_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_16430) == true)) then
return false
end
return true
end

function Trig_Victory06_Func001Func006C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_16421) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16416) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16427) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16426) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16599) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16598) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16596) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16597) == true)) then
return false
end
return true
end

function Trig_Victory06_Func001C()
if (not Trig_Victory06_Func001Func006C()) then
return false
end
return true
end

function Trig_Victory06_Actions()
if (Trig_Victory06_Func001C()) then
KillDestructable(gg_dest_B00B_16430)
KillUnit(gg_unit_u001_0395)
KillUnit(gg_unit_u001_0396)
else
TriggerSleepAction(2.00)
if (Trig_Victory06_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory06()
gg_trg_Victory06 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16427)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16426)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16416)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16421)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16599)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16598)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16596)
TriggerRegisterDeathEvent(gg_trg_Victory06, gg_dest_B00D_16597)
TriggerAddAction(gg_trg_Victory06, Trig_Victory06_Actions)
end

function Trig_InvulPudges_Actions()
SetUnitInvulnerable(gg_unit_u001_0396, true)
SetUnitInvulnerable(gg_unit_u001_0395, true)
end

function InitTrig_InvulPudges()
gg_trg_InvulPudges = CreateTrigger()
TriggerAddAction(gg_trg_InvulPudges, Trig_InvulPudges_Actions)
end

function Trig_ExitFrom05_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_16153) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom05_Conditions()
if (not Trig_ExitFrom05_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom05_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter06))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound06)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_ExitFrom05()
gg_trg_ExitFrom05 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom05, gg_rct_Exit05)
TriggerAddCondition(gg_trg_ExitFrom05, Condition(Trig_ExitFrom05_Conditions))
TriggerAddAction(gg_trg_ExitFrom05, Trig_ExitFrom05_Actions)
end

function Trig_Victory05_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_16153) == true)) then
return false
end
return true
end

function Trig_Victory05_Func001Func004C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_16255) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16257) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16254) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_16256) == true)) then
return false
end
return true
end

function Trig_Victory05_Func001C()
if (not Trig_Victory05_Func001Func004C()) then
return false
end
return true
end

function Trig_Victory05_Actions()
if (Trig_Victory05_Func001C()) then
KillDestructable(gg_dest_B00B_16153)
else
TriggerSleepAction(5.00)
if (Trig_Victory05_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory05()
gg_trg_Victory05 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory05, gg_dest_B00D_16256)
TriggerRegisterDeathEvent(gg_trg_Victory05, gg_dest_B00D_16254)
TriggerRegisterDeathEvent(gg_trg_Victory05, gg_dest_B00D_16257)
TriggerRegisterDeathEvent(gg_trg_Victory05, gg_dest_B00D_16255)
TriggerAddAction(gg_trg_Victory05, Trig_Victory05_Actions)
end

function Trig_Init04_Func002Func001C()
if (not (GetUnitTypeId(GetEnumUnit()) == FourCC("h00B"))) then
return false
end
return true
end

function Trig_Init04_Func002A()
if (Trig_Init04_Func002Func001C()) then
        InitUnitLaserTrap(GetEnumUnit())
else
end
end

function Trig_Init04_Actions()
DisableTrigger(GetTriggeringTrigger())
ForGroupBJ(GetUnitsInRectAll(gg_rct_Region04), Trig_Init04_Func002A)
end

function InitTrig_Init04()
gg_trg_Init04 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_Init04, gg_rct_Enter04)
TriggerAddAction(gg_trg_Init04, Trig_Init04_Actions)
end

function Trig_ExitFrom04_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_15713) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom04_Conditions()
if (not Trig_ExitFrom04_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom04_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter05))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Bound05)
KillUnit(gg_unit_h00B_0276)
KillUnit(gg_unit_h00B_0003)
KillUnit(gg_unit_h00B_0271)
    CreateEnteringFrame(nil, " ")
    HeroFixRespPos()
end

function InitTrig_ExitFrom04()
gg_trg_ExitFrom04 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom04, gg_rct_Exit04)
TriggerAddCondition(gg_trg_ExitFrom04, Condition(Trig_ExitFrom04_Conditions))
TriggerAddAction(gg_trg_ExitFrom04, Trig_ExitFrom04_Actions)
end

function Trig_Victory04_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_15713) == true)) then
return false
end
return true
end

function Trig_Victory04_Func001Func004C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_15712) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_15711) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_15709) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_15710) == true)) then
return false
end
return true
end

function Trig_Victory04_Func001C()
if (not Trig_Victory04_Func001Func004C()) then
return false
end
return true
end

function Trig_Victory04_Actions()
if (Trig_Victory04_Func001C()) then
KillDestructable(gg_dest_B00B_15713)
else
TriggerSleepAction(5.00)
if (Trig_Victory04_Func001Func002C()) then
else
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
end
end
end

function InitTrig_Victory04()
gg_trg_Victory04 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory04, gg_dest_B00D_15709)
TriggerRegisterDeathEvent(gg_trg_Victory04, gg_dest_B00D_15710)
TriggerRegisterDeathEvent(gg_trg_Victory04, gg_dest_B00D_15711)
TriggerRegisterDeathEvent(gg_trg_Victory04, gg_dest_B00D_15712)
TriggerAddAction(gg_trg_Victory04, Trig_Victory04_Actions)
end

function Trig_ExitFrom03_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_15515) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom03_Conditions()
if (not Trig_ExitFrom03_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom03_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter04))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Boind04)
    CreateEnteringFrame(nil, "  ")
    HeroFixRespPos()
end

function InitTrig_ExitFrom03()
gg_trg_ExitFrom03 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom03, gg_rct_Exit03)
TriggerAddCondition(gg_trg_ExitFrom03, Condition(Trig_ExitFrom03_Conditions))
TriggerAddAction(gg_trg_ExitFrom03, Trig_ExitFrom03_Actions)
end

function Trig_Victory03_Func001Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_15515) == true)) then
return false
end
return true
end

function Trig_Victory03_Func001Func004C()
if (not (IsDestructableDeadBJ(gg_dest_B00E_15516) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_15517) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_15514) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00E_15513) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_15532) == true)) then
return false
end
return true
end

function Trig_Victory03_Func001C()
if (not Trig_Victory03_Func001Func004C()) then
return false
end
return true
end

function Trig_Victory03_Actions()
if (Trig_Victory03_Func001C()) then
KillDestructable(gg_dest_B00B_15515)
else
TriggerSleepAction(5.00)
if (Trig_Victory03_Func001Func002C()) then
else
AddSpecialEffectLocBJ(GetDestructableLoc(GetDyingDestructable()), "misaka light B.mdl")
DestroyEffectBJ(GetLastCreatedEffectBJ())
DestructableRestoreLife(GetDyingDestructable(), 100.00, true)
end
end
end

function InitTrig_Victory03()
gg_trg_Victory03 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory03, gg_dest_B00E_15513)
TriggerRegisterDeathEvent(gg_trg_Victory03, gg_dest_B00E_15514)
TriggerRegisterDeathEvent(gg_trg_Victory03, gg_dest_B00E_15517)
TriggerRegisterDeathEvent(gg_trg_Victory03, gg_dest_B00E_15516)
TriggerRegisterDeathEvent(gg_trg_Victory03, gg_dest_B00D_15532)
TriggerAddAction(gg_trg_Victory03, Trig_Victory03_Actions)
end

function Trig_ExitFrom02_Func003C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00B_15274) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom02_Conditions()
if (not Trig_ExitFrom02_Func003C()) then
return false
end
return true
end

function Trig_ExitFrom02_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter03))
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Boind03)
KillUnit(gg_unit_h00E_0217)
KillUnit(gg_unit_h00E_0216)
    CreateEnteringFrame(nil, "")
    HeroFixRespPos()
end

function InitTrig_ExitFrom02()
gg_trg_ExitFrom02 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom02, gg_rct_Exit02)
TriggerAddCondition(gg_trg_ExitFrom02, Condition(Trig_ExitFrom02_Conditions))
TriggerAddAction(gg_trg_ExitFrom02, Trig_ExitFrom02_Actions)
end

function Trig_Victory02_Func002C()
if (not (IsDestructableDeadBJ(gg_dest_DTfx_15314) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_15068) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_15071) == true)) then
return false
end
return true
end

function Trig_Victory02_Conditions()
if (not Trig_Victory02_Func002C()) then
return false
end
return true
end

function Trig_Victory02_Actions()
KillDestructable(gg_dest_B00B_15274)
end

function InitTrig_Victory02()
gg_trg_Victory02 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory02, gg_dest_DTfx_15314)
TriggerRegisterDeathEvent(gg_trg_Victory02, gg_dest_DTfx_15068)
TriggerRegisterDeathEvent(gg_trg_Victory02, gg_dest_DTfx_15071)
TriggerAddCondition(gg_trg_Victory02, Condition(Trig_Victory02_Conditions))
TriggerAddAction(gg_trg_Victory02, Trig_Victory02_Actions)
end

function Trig_ExitFrom01_Func001C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_14732) == true)) then
return false
end
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom01_Conditions()
if (not Trig_ExitFrom01_Func001C()) then
return false
end
return true
end

function Trig_ExitFrom01_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
    UnitStartFallAnim(udg_HERO,1000)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter02))
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Boind02)
    CreateEnteringFrame(nil, " ")
    HeroFixRespPos()
end

function InitTrig_ExitFrom01()
gg_trg_ExitFrom01 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom01, gg_rct_Exit01)
TriggerAddCondition(gg_trg_ExitFrom01, Condition(Trig_ExitFrom01_Conditions))
TriggerAddAction(gg_trg_ExitFrom01, Trig_ExitFrom01_Actions)
end

function Trig_Victory01_Func008C()
if (not (IsDestructableDeadBJ(gg_dest_DTfx_14690) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_14688) == true)) then
return false
end
return true
end

function Trig_Victory01_Conditions()
if (not Trig_Victory01_Func008C()) then
return false
end
return true
end

function Trig_Victory01_Actions()
KillDestructable(gg_dest_B00B_14732)
CreateNUnitsAtLoc(1, FourCC("h00I"), Player(0), GetRectCenter(gg_rct_Exit01), bj_UNIT_FACING)
KillUnit(gg_unit_h00J_0593)
KillUnit(gg_unit_h00J_0591)
KillUnit(gg_unit_h00J_0592)
KillUnit(gg_unit_h00J_0594)
KillUnit(gg_unit_h00J_0595)
end

function InitTrig_Victory01()
gg_trg_Victory01 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory01, gg_dest_DTfx_14690)
TriggerRegisterDeathEvent(gg_trg_Victory01, gg_dest_DTfx_14688)
TriggerAddCondition(gg_trg_Victory01, Condition(Trig_Victory01_Conditions))
TriggerAddAction(gg_trg_Victory01, Trig_Victory01_Actions)
end

function Trig_ExitFrom00_Func002C()
if (not (IsDestructableDeadBJ(gg_dest_B00B_14785) == true)) then
return false
end
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitFrom00_Conditions()
if (not Trig_ExitFrom00_Func002C()) then
return false
end
return true
end

function Trig_ExitFrom00_Actions()
    SetUnitAnimationByIndex(udg_HERO, 25)
TriggerSleepAction(0.30)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter01))
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Boind01)
    UnitStartFallAnim(udg_HERO,1000)
    CreateEnteringFrame(nil, " ")
    HeroFixRespPos()
end

function InitTrig_ExitFrom00()
gg_trg_ExitFrom00 = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitFrom00, gg_rct_Exit00)
TriggerAddCondition(gg_trg_ExitFrom00, Condition(Trig_ExitFrom00_Conditions))
TriggerAddAction(gg_trg_ExitFrom00, Trig_ExitFrom00_Actions)
end

function Trig_Victory00_Func009C()
if (not (IsDestructableDeadBJ(gg_dest_DTfx_14833) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_5091) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_14834) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_DTfx_14832) == true)) then
return false
end
return true
end

function Trig_Victory00_Conditions()
if (not Trig_Victory00_Func009C()) then
return false
end
return true
end

function Trig_Victory00_Actions()
ClearMapMusicBJ()
PlayMusicBJ(gg_snd_The_Astral_Academy_Gardens)
KillDestructable(gg_dest_B00B_14785)
CreateNUnitsAtLoc(1, FourCC("h00I"), Player(0), GetRectCenter(gg_rct_Exit00), bj_UNIT_FACING)
KillUnit(gg_unit_h00H_0569)
KillUnit(gg_unit_h00H_0588)
KillUnit(gg_unit_h00H_0589)
KillUnit(gg_unit_h00H_0590)
end

function InitTrig_Victory00()
gg_trg_Victory00 = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_Victory00, gg_dest_DTfx_14833)
TriggerRegisterDeathEvent(gg_trg_Victory00, gg_dest_DTfx_5091)
TriggerRegisterDeathEvent(gg_trg_Victory00, gg_dest_DTfx_14832)
TriggerRegisterDeathEvent(gg_trg_Victory00, gg_dest_DTfx_14834)
TriggerAddCondition(gg_trg_Victory00, Condition(Trig_Victory00_Conditions))
TriggerAddAction(gg_trg_Victory00, Trig_Victory00_Actions)
end

function Trig_StartBrainGame_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_StartBrainGame_Actions()
DisableTrigger(GetTriggeringTrigger())
udg_IsBrainGame = true
KillUnit(gg_unit_h00I_0601)
ClearMapMusicBJ()
PlayMusicBJ(gg_snd_The_Astral_Academy_Gardens)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Enter00))
    HeroFixRespPos()
    UnitStartFallAnim(udg_HERO,1000)
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_Boind00)
    CreateEnteringFrame(nil, "")
end

function InitTrig_StartBrainGame()
gg_trg_StartBrainGame = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_StartBrainGame, gg_rct_StartBrainGame)
TriggerAddCondition(gg_trg_StartBrainGame, Condition(Trig_StartBrainGame_Conditions))
TriggerAddAction(gg_trg_StartBrainGame, Trig_StartBrainGame_Actions)
end

function Trig_SpawnBarrel_Func008C()
if (not (IsDestructableDeadBJ(gg_dest_B00D_18148) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_18193) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_18157) == true)) then
return false
end
if (not (IsDestructableDeadBJ(gg_dest_B00D_18184) == true)) then
return false
end
return true
end

function Trig_SpawnBarrel_Conditions()
if (not Trig_SpawnBarrel_Func008C()) then
return false
end
return true
end

function Trig_SpawnBarrel_Actions()
CreateNUnitsAtLoc(1, FourCC("h00C"), Player(1), GetRectCenter(gg_rct_BossBarelSpawn), bj_UNIT_FACING)
    UnitStartFallAnim(bj_lastCreatedUnit,1000)
TriggerSleepAction(5.00)
DestructableRestoreLife(gg_dest_B00D_18148, 100.00, true)
DestructableRestoreLife(gg_dest_B00D_18193, 100.00, true)
DestructableRestoreLife(gg_dest_B00D_18184, 100.00, true)
DestructableRestoreLife(gg_dest_B00D_18157, 100.00, true)
end

function InitTrig_SpawnBarrel()
gg_trg_SpawnBarrel = CreateTrigger()
TriggerRegisterDeathEvent(gg_trg_SpawnBarrel, gg_dest_B00D_18148)
TriggerRegisterDeathEvent(gg_trg_SpawnBarrel, gg_dest_B00D_18193)
TriggerRegisterDeathEvent(gg_trg_SpawnBarrel, gg_dest_B00D_18157)
TriggerRegisterDeathEvent(gg_trg_SpawnBarrel, gg_dest_B00D_18184)
TriggerAddCondition(gg_trg_SpawnBarrel, Condition(Trig_SpawnBarrel_Conditions))
TriggerAddAction(gg_trg_SpawnBarrel, Trig_SpawnBarrel_Actions)
end

function Trig_InitBossRoom_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_InitBossRoom_Actions()
SetDestructableOccluderHeight(gg_dest_DTfx_18124, 128)
    CreateFloorInRoom(GetDestructableX(gg_dest_DTfx_18124), GetDestructableY(gg_dest_DTfx_18124),20,20)
DisableTrigger(GetTriggeringTrigger())
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_BoundBoss)
    HeroFixRespPos()
    CreateEnteringFrame(nil, "   ")
end

function InitTrig_InitBossRoom()
gg_trg_InitBossRoom = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_InitBossRoom, gg_rct_EnterBoss)
TriggerAddCondition(gg_trg_InitBossRoom, Condition(Trig_InitBossRoom_Conditions))
TriggerAddAction(gg_trg_InitBossRoom, Trig_InitBossRoom_Actions)
end

function Trig_EndSinematicStart_Actions()
DisableTrigger(GetTriggeringTrigger())
    CustomCinematicMode(true)
CinematicModeBJ(true, GetPlayersAll())
IssuePointOrderLocBJ(udg_HERO, "move", GetRectCenter(gg_rct_Region_022))
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
IssuePointOrderLocBJ(udg_HERO, "move", GetRectCenter(gg_rct_Region_022))
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_Oths_0011, 0)
CameraSetupApplyForPlayer(true, gg_cam_OnPeonsandTrall, Player(0), 0.00)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_Oths_0011, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_801", gg_snd_OP3, "TRIGSTR_802", bj_TIMETYPE_ADD, 0.00, true)
CameraSetupApplyForPlayer(true, gg_cam_TrallSteal, Player(0), 0.00)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_Oths_0011, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_803", gg_snd_OT3, "TRIGSTR_804", bj_TIMETYPE_ADD, 0.00, true)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_805", gg_snd_OT4, "TRIGSTR_806", bj_TIMETYPE_ADD, 0.00, true)
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TriggerSleepAction(1.00)
CreateDestructableLoc(FourCC("B00A"), GetDestructableLoc(gg_dest_B004_2162), GetRandomDirectionDeg(), 3.00, 0)
RemoveDestructable(gg_dest_B004_2162)
bj_forLoopAIndex = 1
bj_forLoopAIndexEnd = 100
while (true) do
if (bj_forLoopAIndex > bj_forLoopAIndexEnd) then break end
CreateDestructableLoc(FourCC("B003"), GetRandomLocInRect(gg_rct_Region_023), GetRandomDirectionDeg(), GetRandomReal(0.80, 1.20), GetRandomInt(0, 2))
bj_forLoopAIndex = bj_forLoopAIndex + 1
end
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
CameraSetupApplyForPlayer(true, gg_cam_OnPineRound, Player(0), 0.00)
RotateCameraAroundLocBJ(360.00, GetDestructableLoc(GetLastCreatedDestructable()), Player(0), 20.00)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_809", gg_snd_OT1, "TRIGSTR_810", bj_TIMETYPE_ADD, 0.00, true)
CameraSetupApplyForPlayer(true, gg_cam_OnPineRound, Player(0), 0.00)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_811", gg_snd_OT2, "TRIGSTR_812", bj_TIMETYPE_ADD, 0.00, true)
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_813", gg_snd_OP1, "TRIGSTR_814", bj_TIMETYPE_ADD, 0.00, true)
TriggerSleepAction(1.00)
CameraSetupApplyForPlayer(true, gg_cam_TavernaEnd, Player(0), 0.00)
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_815", gg_snd_OP2, "TRIGSTR_816", bj_TIMETYPE_ADD, 0.00, true)
TriggerSleepAction(10.00)
CustomVictoryBJ(Player(0), true, true)
end

function InitTrig_EndSinematicStart()
gg_trg_EndSinematicStart = CreateTrigger()
TriggerAddAction(gg_trg_EndSinematicStart, Trig_EndSinematicStart_Actions)
end

function Trig_EnterAnimeArena_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_EnterAnimeArena_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_AnimBossStart))
    CreateEnteringFrame(nil, " ")
end

function InitTrig_EnterAnimeArena()
gg_trg_EnterAnimeArena = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_EnterAnimeArena, gg_rct_Enter2Arena)
TriggerAddCondition(gg_trg_EnterAnimeArena, Condition(Trig_EnterAnimeArena_Conditions))
TriggerAddAction(gg_trg_EnterAnimeArena, Trig_EnterAnimeArena_Actions)
end

function Trig_ExitAnimeArena_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_ExitAnimeArena_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_ExitArena))
    CreateEnteringFrame(nil, " ")
end

function InitTrig_ExitAnimeArena()
gg_trg_ExitAnimeArena = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitAnimeArena, gg_rct_AnimBossEnter)
TriggerAddCondition(gg_trg_ExitAnimeArena, Condition(Trig_ExitAnimeArena_Conditions))
TriggerAddAction(gg_trg_ExitAnimeArena, Trig_ExitAnimeArena_Actions)
end

function Trig_InitAnimeArena_Actions()
UnitAddAbilityBJ(FourCC("A604"), gg_unit_o002_0203)
end

function InitTrig_InitAnimeArena()
gg_trg_InitAnimeArena = CreateTrigger()
TriggerAddAction(gg_trg_InitAnimeArena, Trig_InitAnimeArena_Actions)
end

function Trig_NudeCinematic_Actions()
CinematicModeBJ(true, GetPlayersAll())
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_o002_0203, 0)
CameraSetupApplyForPlayer(true, gg_cam_NydePeon, Player(0), 1.00)
ResetUnitAnimation(udg_HERO)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_o002_0203, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_739", gg_snd_animepeon1, "TRIGSTR_740", bj_TIMETYPE_ADD, 0.00, true)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_o002_0203, 0)
SetUnitLookAt(gg_unit_o002_0203, "bone_head", udg_HERO, 0, 0, 90)
SetUnitLookAt(udg_HERO, "bone_head", gg_unit_o002_0203, 0, 0, 90)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_o002_0203, "TRIGSTR_744", gg_snd_animeZurck1, "TRIGSTR_745", bj_TIMETYPE_ADD, 0.00, true)
CameraSetupApplyForPlayer(true, gg_cam_LookAnime, Player(0), 0.00)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_746", gg_snd_animepeon2, "TRIGSTR_747", bj_TIMETYPE_ADD, 0.00, true)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_748", gg_snd_animepeon3, "TRIGSTR_749", bj_TIMETYPE_ADD, 0.00, true)
CameraSetupApplyForPlayer(true, gg_cam_NydePeon, Player(0), 0.50)
SetUnitFacingToFaceUnitTimed(gg_unit_o002_0203, gg_unit_h009_0197, 0)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_h009_0197, 0)
ResetUnitLookAt(gg_unit_o002_0203)
ResetUnitLookAt(udg_HERO)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_o002_0203, "TRIGSTR_750", gg_snd_animeZurck2, "TRIGSTR_751", bj_TIMETYPE_ADD, 0.00, true)
ConditionalTriggerExecute(gg_trg_SkipNude)
end

function InitTrig_NudeCinematic()
gg_trg_NudeCinematic = CreateTrigger()
TriggerAddAction(gg_trg_NudeCinematic, Trig_NudeCinematic_Actions)
end

function Trig_SkipNude_Actions()
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
ResetUnitLookAt(gg_unit_o002_0203)
ResetUnitLookAt(udg_HERO)
    StartPeonAllyAI()
end

function InitTrig_SkipNude()
gg_trg_SkipNude = CreateTrigger()
DisableTrigger(gg_trg_SkipNude)
TriggerAddAction(gg_trg_SkipNude, Trig_SkipNude_Actions)
end

function Trig_DeathNudeFriend_Actions()
QuestSetFailedBJ(udg_QNudeFriend, true)
end

function InitTrig_DeathNudeFriend()
gg_trg_DeathNudeFriend = CreateTrigger()
TriggerRegisterUnitEvent(gg_trg_DeathNudeFriend, gg_unit_o002_0203, EVENT_UNIT_DEATH)
TriggerAddAction(gg_trg_DeathNudeFriend, Trig_DeathNudeFriend_Actions)
end

function Trig_InitYetty_Actions()
SetUnitAnimation(gg_unit_n000_0001, "death")
end

function InitTrig_InitYetty()
gg_trg_InitYetty = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_InitYetty, 0.50)
TriggerAddAction(gg_trg_InitYetty, Trig_InitYetty_Actions)
end

function Trig_StartYettyCinematic_Conditions()
if (not (GetOwningPlayer(GetTriggerUnit()) == Player(0))) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func004C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func013C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func016C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func019C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func020C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func022C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Func023C()
if (not (udg_PressESCYETTY == true)) then
return false
end
return true
end

function Trig_StartYettyCinematic_Actions()
DisableTrigger(GetTriggeringTrigger())
CinematicModeBJ(true, GetPlayersAll())
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
if (Trig_StartYettyCinematic_Func004C()) then
return 
else
end
TriggerSleepAction(1.00)
CameraSetupApplyForPlayer(true, gg_cam_PeonLookOnYetty, Player(0), 0.00)
SetUnitFacingToFaceUnitTimed(GetTriggerUnit(), gg_unit_n000_0001, 0)
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_Region_012))
SetUnitFacingToFaceUnitTimed(GetTriggerUnit(), gg_unit_n000_0001, 0)
ResetUnitAnimation(GetTriggerUnit())
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
EnableTrigger(gg_trg_SkipYetty)
if (Trig_StartYettyCinematic_Func013C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_688", gg_snd_peon1, "TRIGSTR_689", bj_TIMETYPE_ADD, 0.00, true)
SetUnitFacingToFaceUnitTimed(GetTriggerUnit(), gg_unit_n000_0001, 0)
if (Trig_StartYettyCinematic_Func016C()) then
else
CameraSetupApplyForPlayer(true, gg_cam_LookYetty, Player(0), 0.00)
end
TriggerSleepAction(0.50)
SetUnitFacingToFaceUnitTimed(GetTriggerUnit(), gg_unit_n000_0001, 0)
if (Trig_StartYettyCinematic_Func019C()) then
else
RotateCameraAroundLocBJ(360.00, GetUnitLoc(gg_unit_n000_0001), Player(0), 8.00)
end
if (Trig_StartYettyCinematic_Func020C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_690", gg_snd_peon2, "TRIGSTR_691", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartYettyCinematic_Func022C()) then
else
CameraSetupApplyForPlayer(true, gg_cam_PeonReadyToYetty, Player(0), 0.00)
end
if (Trig_StartYettyCinematic_Func023C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_692", gg_snd_peon3, "TRIGSTR_693", bj_TIMETYPE_ADD, 0.00, true)
ConditionalTriggerExecute(gg_trg_SkipYetty)
end

function InitTrig_StartYettyCinematic()
gg_trg_StartYettyCinematic = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_StartYettyCinematic, gg_rct_Region_038)
TriggerAddCondition(gg_trg_StartYettyCinematic, Condition(Trig_StartYettyCinematic_Conditions))
TriggerAddAction(gg_trg_StartYettyCinematic, Trig_StartYettyCinematic_Actions)
end

function Trig_SkipYetty_Conditions()
if (not (udg_PressESCYETTY == false)) then
return false
end
return true
end

function Trig_SkipYetty_Func004A()
KillDestructable(GetEnumDestructable())
end

function Trig_SkipYetty_Actions()
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
udg_PressESCYETTY = true
EnumDestructablesInRectAll(gg_rct_Region_013, Trig_SkipYetty_Func004A)
DisableTrigger(GetTriggeringTrigger())
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
SetUnitTimeScalePercent(gg_unit_n000_0001, 100.00)
    StartYettyAI(GetRectCenterX(gg_rct_Region_038), GetRectCenterY(gg_rct_Region_038))
end

function InitTrig_SkipYetty()
gg_trg_SkipYetty = CreateTrigger()
DisableTrigger(gg_trg_SkipYetty)
TriggerRegisterPlayerEventEndCinematic(gg_trg_SkipYetty, Player(0))
TriggerAddCondition(gg_trg_SkipYetty, Condition(Trig_SkipYetty_Conditions))
TriggerAddAction(gg_trg_SkipYetty, Trig_SkipYetty_Actions)
end

function Trig_InitEggs_Actions()
AddUnitAnimationPropertiesBJ(true, "alternate", gg_unit_h006_0173)
AddUnitAnimationPropertiesBJ(true, "alternate", gg_unit_h006_0172)
AddUnitAnimationPropertiesBJ(true, "alternate", gg_unit_h006_0002)
end

function InitTrig_InitEggs()
gg_trg_InitEggs = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_InitEggs, 1.00)
TriggerAddAction(gg_trg_InitEggs, Trig_InitEggs_Actions)
end

function Trig_Task_Actions()
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_719", "TRIGSTR_720", "ReplaceableTextures\\CommandButtons\\BTNThrall.blp")
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_721", "TRIGSTR_722", "ReplaceableTextures\\CommandButtons\\BTNWendigo.blp")
udg_QYetty = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_725", "TRIGSTR_726", "ReplaceableTextures\\CommandButtons\\BTNpurpleDragonSpawn.blp")
udg_QDragon = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_727", "TRIGSTR_728", "ReplaceableTextures\\CommandButtons\\BTNStrongDrink.blp")
udg_QWine = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_729", "TRIGSTR_730", "ReplaceableTextures\\CommandButtons\\BTNTimberWolf.blp")
udg_QWolf = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_731", "TRIGSTR_732", "ReplaceableTextures\\CommandButtons\\BTNStarWand.blp")
udg_QStarAnime = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_733", "TRIGSTR_734", "ReplaceableTextures\\CommandButtons\\BTNPeon.blp")
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_735", "TRIGSTR_736", "ReplaceableTextures\\CommandButtons\\BTNForestTrollShadowPriest.blp")
udg_QSnowMan = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_737", "TRIGSTR_738", "CandyCane.blp")
udg_QCHKPoint = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_752", "TRIGSTR_753", "ReplaceableTextures\\CommandButtons\\BTNGrunt.blp")
udg_QNudeFriend = GetLastCreatedQuestBJ()
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_890", "TRIGSTR_891", "ReplaceableTextures\\CommandButtons\\BTNSnazzyPotion.blp")
udg_QPodval = GetLastCreatedQuestBJ()
end

function InitTrig_Task()
gg_trg_Task = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_Task, 1.00)
TriggerAddAction(gg_trg_Task, Trig_Task_Actions)
end

function Trig_WisDead_Actions()
udg_WisDead = true
UnitAddAbilityBJ(FourCC("A604"), gg_unit_h007_0171)
end

function InitTrig_WisDead()
gg_trg_WisDead = CreateTrigger()
TriggerRegisterUnitEvent(gg_trg_WisDead, gg_unit_u000_0005, EVENT_UNIT_DEATH)
TriggerAddAction(gg_trg_WisDead, Trig_WisDead_Actions)
end

function Trig_InitMerchantQuest_Actions()
UnitAddAbilityBJ(FourCC("A604"), gg_unit_h007_0171)
end

function InitTrig_InitMerchantQuest()
gg_trg_InitMerchantQuest = CreateTrigger()
TriggerAddAction(gg_trg_InitMerchantQuest, Trig_InitMerchantQuest_Actions)
end

function Trig_MerchQuestCinematic_Func011C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func016C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func018C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func020C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func024C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func026C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func028C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Func031C()
if (not (udg_SkipMerchCinematic == true)) then
return false
end
return true
end

function Trig_MerchQuestCinematic_Actions()
DisableTrigger(GetTriggeringTrigger())
EnableTrigger(gg_trg_SkipMerchCinematic)
    CustomCinematicMode(true)
CinematicModeBJ(true, GetPlayersAll())
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_h007_0171, 0)
CameraSetupApplyForPlayer(true, gg_cam_TalkMerch, Player(0), 0.00)
SetCameraTargetControllerNoZForPlayer(Player(0), udg_HERO, 0, 0, false)
RotateCameraAroundLocBJ(30.00, GetUnitLoc(udg_HERO), Player(0), 20.00)
ResetUnitAnimation(udg_HERO)
IssuePointOrderLocBJ(udg_HERO, "move", GetRectCenter(gg_rct_Region_020))
if (Trig_MerchQuestCinematic_Func011C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_h007_0171, "TRIGSTR_781", gg_snd_cook1, "TRIGSTR_782", bj_TIMETYPE_ADD, 0.00, true)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_h007_0171, 0)
SetCameraTargetControllerNoZForPlayer(Player(0), udg_HERO, 0, 0, false)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_h007_0171, 0)
if (Trig_MerchQuestCinematic_Func016C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_783", gg_snd_CookQuestPeon1, "TRIGSTR_784", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_MerchQuestCinematic_Func018C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_h007_0171, "TRIGSTR_785", gg_snd_cook2, "TRIGSTR_786", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_MerchQuestCinematic_Func020C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_787", gg_snd_CookQuestPeon4, "TRIGSTR_788", bj_TIMETYPE_ADD, 0.00, true)
IssuePointOrderLocBJ(udg_HERO, "move", GetRectCenter(gg_rct_Region_021))
RotateCameraAroundLocBJ(-15.00, GetUnitLoc(udg_HERO), Player(0), 10.00)
if (Trig_MerchQuestCinematic_Func024C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_h007_0171, "TRIGSTR_789", gg_snd_cook3, "TRIGSTR_790", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_MerchQuestCinematic_Func026C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_791", gg_snd_CookQuestPeon2, "TRIGSTR_792", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_MerchQuestCinematic_Func028C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_h007_0171, "TRIGSTR_795", gg_snd_cook4, "TRIGSTR_796", bj_TIMETYPE_ADD, 0.00, true)
SetUnitFacingToFaceUnitTimed(udg_HERO, gg_unit_h007_0171, 0)
if (Trig_MerchQuestCinematic_Func031C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_797", gg_snd_CookQuestPeon3, "TRIGSTR_798", bj_TIMETYPE_ADD, 0.00, true)
ConditionalTriggerExecute(gg_trg_MerchEndCinematic1)
end

function InitTrig_MerchQuestCinematic()
gg_trg_MerchQuestCinematic = CreateTrigger()
TriggerAddAction(gg_trg_MerchQuestCinematic, Trig_MerchQuestCinematic_Actions)
end

function Trig_MerchEndCinematic1_Actions()
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_799", "TRIGSTR_800", "ReplaceableTextures\\CommandButtons\\BTNAzureDragon.blp")
udg_QWiverna = GetLastCreatedQuestBJ()
end

function InitTrig_MerchEndCinematic1()
gg_trg_MerchEndCinematic1 = CreateTrigger()
TriggerAddAction(gg_trg_MerchEndCinematic1, Trig_MerchEndCinematic1_Actions)
end

function Trig_SkipMerchCinematic_Actions()
udg_SkipMerchCinematic = true
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
DisableTrigger(GetTriggeringTrigger())
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
ConditionalTriggerExecute(gg_trg_MerchEndCinematic1)
end

function InitTrig_SkipMerchCinematic()
gg_trg_SkipMerchCinematic = CreateTrigger()
DisableTrigger(gg_trg_SkipMerchCinematic)
TriggerRegisterPlayerEventEndCinematic(gg_trg_SkipMerchCinematic, Player(0))
TriggerAddAction(gg_trg_SkipMerchCinematic, Trig_SkipMerchCinematic_Actions)
end

function Trig_EndBoss_Actions()
KillDestructable(gg_dest_B007_5312)
QuestSetCompletedBJ(udg_QDragon, true)
end

function InitTrig_EndBoss()
gg_trg_EndBoss = CreateTrigger()
TriggerRegisterUnitEvent(gg_trg_EndBoss, gg_unit_n001_0009, EVENT_UNIT_DEATH)
TriggerAddAction(gg_trg_EndBoss, Trig_EndBoss_Actions)
end

function Trig_StartDragonCinematic_Conditions()
if (not (GetOwningPlayer(GetTriggerUnit()) == Player(0))) then
return false
end
return true
end

function Trig_StartDragonCinematic_Func011C()
if (not (udg_SkipDragon == true)) then
return false
end
return true
end

function Trig_StartDragonCinematic_Func015C()
if (not (udg_SkipDragon == true)) then
return false
end
return true
end

function Trig_StartDragonCinematic_Func021C()
if (not (udg_SkipDragon == true)) then
return false
end
return true
end

function Trig_StartDragonCinematic_Func024C()
if (not (udg_SkipDragon == true)) then
return false
end
return true
end

function Trig_StartDragonCinematic_Actions()
DisableTrigger(GetTriggeringTrigger())
EnableTrigger(gg_trg_SkipDragon)
PlaySoundBJ(udg_SHlop)
CinematicModeBJ(true, GetPlayersAll())
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
SetUnitTimeScalePercent(gg_unit_n001_0009, 600.00)
CameraSetupApplyForPlayer(true, gg_cam_PeonLookOnPrise, Player(0), 0.00)
ResetUnitAnimation(GetTriggerUnit())
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_704", gg_snd_oanenashilietopodarki, "TRIGSTR_705", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartDragonCinematic_Func011C()) then
return 
else
end
PanCameraToTimedLocForPlayer(Player(0), GetUnitLoc(gg_unit_n001_0009), 2.00)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_706", gg_snd_fyyachtoetozazvyki, "TRIGSTR_707", bj_TIMETYPE_ADD, 0.00, true)
SetUnitTimeScalePercent(gg_unit_n001_0009, 0.00)
if (Trig_StartDragonCinematic_Func015C()) then
return 
else
end
KillSoundWhenDoneBJ(udg_SHlop)
DisableTrigger(gg_trg_Cum)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_n001_0009, "TRIGSTR_710", gg_snd_15, "TRIGSTR_711", bj_TIMETYPE_ADD, 0.00, true)
SetUnitTimeScalePercent(gg_unit_n001_0009, 100.00)
QueueUnitAnimationBJ(gg_unit_n001_0009, "Walk")
if (Trig_StartDragonCinematic_Func021C()) then
return 
else
end
SetUnitFacingToFaceUnitTimed(gg_unit_n001_0009, GetTriggerUnit(), 0)
ResetUnitAnimation(gg_unit_n001_0009)
if (Trig_StartDragonCinematic_Func024C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_n001_0009, "TRIGSTR_708", gg_snd_16, "TRIGSTR_709", bj_TIMETYPE_ADD, 0.00, true)
ConditionalTriggerExecute(gg_trg_SkipDragon)
end

function InitTrig_StartDragonCinematic()
gg_trg_StartDragonCinematic = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_StartDragonCinematic, gg_rct_InitStartDragon)
TriggerAddCondition(gg_trg_StartDragonCinematic, Condition(Trig_StartDragonCinematic_Conditions))
TriggerAddAction(gg_trg_StartDragonCinematic, Trig_StartDragonCinematic_Actions)
end

function Trig_SkipDragon_Actions()
udg_SkipDragon = true
KillSoundWhenDoneBJ(udg_SHlop)
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
SetUnitTimeScalePercent(gg_unit_n001_0009, 100.00)
DisableTrigger(gg_trg_Cum)
DisableTrigger(GetTriggeringTrigger())
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
    StartDragonAI(GetUnitXY(gg_unit_n001_0009))
end

function InitTrig_SkipDragon()
gg_trg_SkipDragon = CreateTrigger()
DisableTrigger(gg_trg_SkipDragon)
TriggerRegisterPlayerEventEndCinematic(gg_trg_SkipDragon, Player(0))
TriggerAddAction(gg_trg_SkipDragon, Trig_SkipDragon_Actions)
end

function Trig_Cum_Actions()
QueueUnitAnimationBJ(gg_unit_n001_0009, "Attack")
end

function InitTrig_Cum()
gg_trg_Cum = CreateTrigger()
TriggerRegisterTimerEventPeriodic(gg_trg_Cum, 0.05)
TriggerAddAction(gg_trg_Cum, Trig_Cum_Actions)
end

function Trig_FromWolfCave_Func001C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_FromWolfCave_Conditions()
if (not Trig_FromWolfCave_Func001C()) then
return false
end
return true
end

function Trig_FromWolfCave_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_EnterWolf))
end

function InitTrig_FromWolfCave()
gg_trg_FromWolfCave = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_FromWolfCave, gg_rct_Towolf)
TriggerAddCondition(gg_trg_FromWolfCave, Condition(Trig_FromWolfCave_Conditions))
TriggerAddAction(gg_trg_FromWolfCave, Trig_FromWolfCave_Actions)
end

function Trig_ExitWolf_Func001Func001C()
if (not (udg_WolfIsDie == true)) then
return false
end
return true
end

function Trig_ExitWolf_Func001Func002C()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
if (not (GetUnitUserData(GetTriggerUnit()) == 1)) then
return false
end
return true
end

function Trig_ExitWolf_Func001C()
if (Trig_ExitWolf_Func001Func001C()) then
return true
end
if (Trig_ExitWolf_Func001Func002C()) then
return true
end
return false
end

function Trig_ExitWolf_Conditions()
if (not Trig_ExitWolf_Func001C()) then
return false
end
return true
end

function Trig_ExitWolf_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_FromWolf))
end

function InitTrig_ExitWolf()
gg_trg_ExitWolf = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_ExitWolf, gg_rct_ExitWolf)
TriggerAddCondition(gg_trg_ExitWolf, Condition(Trig_ExitWolf_Conditions))
TriggerAddAction(gg_trg_ExitWolf, Trig_ExitWolf_Actions)
end

function Trig_ExitOnWolf_Func001C()
if (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true) then
return true
end
if (IsUnitAlly(GetTriggerUnit(), Player(0)) == true) then
return true
end
return false
end

function Trig_ExitOnWolf_Conditions()
if (not Trig_ExitOnWolf_Func001C()) then
return false
end
return true
end

function Trig_ExitOnWolf_Actions()
CinematicModeBJ(true, GetPlayersAll())
ResetUnitAnimation(GetTriggerUnit())
ResetUnitAnimation(udg_HERO)
    CustomCinematicMode(true)
DisableTrigger(GetTriggeringTrigger())
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TriggerSleepAction(1.00)
CameraSetupApplyForPlayer(true, gg_cam_WolfEnd, Player(0), 0.00)
PanCameraToTimedLocForPlayer(Player(0), GetUnitLoc(GetTriggerUnit()), 1.00)
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_757", gg_snd_WolfCinematic3, "TRIGSTR_758", bj_TIMETYPE_ADD, 0.00, true)
ResetUnitAnimation(GetTriggerUnit())
ResetUnitAnimation(udg_HERO)
    DestroyEffect(HERO[0].peonAttach)
ShowUnitShow(udg_HERO)
SetUnitPositionLoc(udg_HERO, GetRectCenter(gg_rct_EnterTrap))
SetUnitFacingToFaceUnitTimed(GetTriggerUnit(), udg_HERO, 0)
SetUnitFacingToFaceUnitTimed(udg_HERO, GetTriggerUnit(), 0)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_759", gg_snd_PenFromWolf5, "TRIGSTR_760", bj_TIMETYPE_ADD, 0.00, true)
TransmissionFromUnitWithNameBJ(GetPlayersAll(), GetTriggerUnit(), "TRIGSTR_761", nil, "TRIGSTR_762", bj_TIMETYPE_ADD, 0.00, true)
IssuePointOrderLocBJ(GetTriggerUnit(), "attack", GetRectCenter(gg_rct_FromWolf))
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_763", gg_snd_PenFromWolf6, "TRIGSTR_764", bj_TIMETYPE_ADD, 0.00, true)
    HERO[0].UnitHero=udg_HERO
    InitAnimations(udg_HERO, HERO[0])
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
SetUnitInvulnerable(GetTriggerUnit(), true)
UnitRemoveAbilityBJ(FourCC("Abun"), GetTriggerUnit())
QuestSetCompletedBJ(udg_QWolf, true)
    ITSATRAP=false
end

function InitTrig_ExitOnWolf()
gg_trg_ExitOnWolf = CreateTrigger()
DisableTrigger(gg_trg_ExitOnWolf)
TriggerRegisterEnterRectSimple(gg_trg_ExitOnWolf, gg_rct_EnterTrap)
TriggerAddCondition(gg_trg_ExitOnWolf, Condition(Trig_ExitOnWolf_Conditions))
TriggerAddAction(gg_trg_ExitOnWolf, Trig_ExitOnWolf_Actions)
end

function Trig_DeathWolf_Actions()
EnableTrigger(gg_trg_ExitOnWolf)
udg_WolfIsDie = true
end

function InitTrig_DeathWolf()
gg_trg_DeathWolf = CreateTrigger()
TriggerRegisterUnitEvent(gg_trg_DeathWolf, gg_unit_n002_0045, EVENT_UNIT_DEATH)
TriggerAddAction(gg_trg_DeathWolf, Trig_DeathWolf_Actions)
end

function Trig_WolfCinematic_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func010C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func012C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func019C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func024C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func028C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func032C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Func035C()
if (not (udg_SkipWolfFact == true)) then
return false
end
return true
end

function Trig_WolfCinematic_Actions()
DisableTrigger(GetTriggeringTrigger())
EnableTrigger(gg_trg_SkipWolfESC)
    CustomCinematicMode(true)
CinematicModeBJ(true, GetPlayersAll())
CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
CameraSetupApplyForPlayer(true, gg_cam_SeeOnWolf, Player(0), 0.00)
IssuePointOrderLocBJ(GetTriggerUnit(), "move", GetRectCenter(gg_rct_Region_019))
if (Trig_WolfCinematic_Func010C()) then
return 
else
end
SetCameraTargetControllerNoZForPlayer(Player(0), GetTriggerUnit(), 0, 0, false)
if (Trig_WolfCinematic_Func012C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_765", gg_snd_PenFromWolf1, "TRIGSTR_766", bj_TIMETYPE_ADD, 0.00, true)
PanCameraToTimedLocForPlayer(Player(0), GetUnitLoc(gg_unit_n002_0045), 1.00)
IssuePointOrderLocBJ(GetTriggerUnit(), "move", GetRectCenter(gg_rct_Region_019))
TriggerSleepAction(1.00)
IssuePointOrderLocBJ(GetTriggerUnit(), "move", GetRectCenter(gg_rct_Region_019))
RotateCameraAroundLocBJ(360.00, GetUnitLoc(gg_unit_n002_0045), Player(0), 6.00)
if (Trig_WolfCinematic_Func019C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_767", gg_snd_PenFromWolf2, "TRIGSTR_768", bj_TIMETYPE_ADD, 0.00, true)
SetCameraTargetControllerNoZForPlayer(Player(0), gg_unit_n002_0045, 0, 0, false)
SetUnitFacingToFaceUnitTimed(gg_unit_n002_0045, GetTriggerUnit(), 0)
RotateCameraAroundLocBJ(-180.00, GetUnitLoc(gg_unit_n002_0045), Player(0), 12.00)
if (Trig_WolfCinematic_Func024C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_n002_0045, "TRIGSTR_769", gg_snd_WolfCinematic1, "TRIGSTR_770", bj_TIMETYPE_ADD, 0.00, true)
SetUnitAnimation(gg_unit_n002_0045, "Attack")
QueueUnitAnimationBJ(gg_unit_n002_0045, "stand")
if (Trig_WolfCinematic_Func028C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_771", gg_snd_PenFromWolf3, "TRIGSTR_772", bj_TIMETYPE_ADD, 0.00, true)
SetUnitAnimation(gg_unit_n002_0045, "Attack")
QueueUnitAnimationBJ(gg_unit_n002_0045, "stand")
if (Trig_WolfCinematic_Func032C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_n002_0045, "TRIGSTR_773", gg_snd_WolfCinematic2, "TRIGSTR_774", bj_TIMETYPE_ADD, 0.00, true)
IssuePointOrderLocBJ(GetTriggerUnit(), "move", GetUnitLoc(gg_unit_n002_0045))
if (Trig_WolfCinematic_Func035C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_HERO, "TRIGSTR_775", gg_snd_PenFromWolf4, "TRIGSTR_776", bj_TIMETYPE_ADD, 0.00, true)
TriggerExecute(gg_trg_SkipWolf)
end

function InitTrig_WolfCinematic()
gg_trg_WolfCinematic = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_WolfCinematic, gg_rct_EnterWolf)
TriggerAddCondition(gg_trg_WolfCinematic, Condition(Trig_WolfCinematic_Conditions))
TriggerAddAction(gg_trg_WolfCinematic, Trig_WolfCinematic_Actions)
end

function Trig_SkipWolf_Actions()
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
CinematicModeBJ(false, GetPlayersAll())
    CustomCinematicMode(false)
end

function InitTrig_SkipWolf()
gg_trg_SkipWolf = CreateTrigger()
TriggerAddAction(gg_trg_SkipWolf, Trig_SkipWolf_Actions)
end

function Trig_SkipWolfESC_Actions()
udg_SkipWolfFact = true
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
ConditionalTriggerExecute(gg_trg_SkipWolf)
end

function InitTrig_SkipWolfESC()
gg_trg_SkipWolfESC = CreateTrigger()
DisableTrigger(gg_trg_SkipWolfESC)
TriggerRegisterPlayerEventEndCinematic(gg_trg_SkipWolfESC, Player(0))
TriggerAddAction(gg_trg_SkipWolfESC, Trig_SkipWolfESC_Actions)
end

function Trig_BoundEnter_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_BoundEnter_Actions()
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_EnterTrap))
SetCameraBoundsToRectForPlayerBJ(Player(0), gg_rct_TrapZone)
    ClearMapMusicBJ()
    PlayMusicBJ("Salve Springs")
    CreateEnteringFrame(nil, " ")
end

function InitTrig_BoundEnter()
gg_trg_BoundEnter = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_BoundEnter, gg_rct_Region_004)
TriggerAddCondition(gg_trg_BoundEnter, Condition(Trig_BoundEnter_Conditions))
TriggerAddAction(gg_trg_BoundEnter, Trig_BoundEnter_Actions)
end

function Trig_BoundEnterOnce_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_BoundEnterOnce_Actions()
    InitAllTraps()
DisableTrigger(GetTriggeringTrigger())
end

function InitTrig_BoundEnterOnce()
gg_trg_BoundEnterOnce = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_BoundEnterOnce, gg_rct_Region_004)
TriggerAddCondition(gg_trg_BoundEnterOnce, Condition(Trig_BoundEnterOnce_Conditions))
TriggerAddAction(gg_trg_BoundEnterOnce, Trig_BoundEnterOnce_Actions)
end

function Trig_Exit_Conditions()
if (not (IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true)) then
return false
end
return true
end

function Trig_Exit_Actions()
SetCameraBoundsToRectForPlayerBJ(Player(0), GetPlayableMapRect())
SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(gg_rct_ExitTrapZone))
    ClearMapMusicBJ()
    PlayMusicBJ("Endless Snowbanks")
    CreateEnteringFrame(nil, " ")
end

function InitTrig_Exit()
gg_trg_Exit = CreateTrigger()
TriggerRegisterEnterRectSimple(gg_trg_Exit, gg_rct_ExitTrap)
TriggerAddCondition(gg_trg_Exit, Condition(Trig_Exit_Conditions))
TriggerAddAction(gg_trg_Exit, Trig_Exit_Actions)
end

function Trig_InitGUI_Actions()
UseTimeOfDayBJ(false)
end

function InitTrig_InitGUI()
gg_trg_InitGUI = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_InitGUI, 0.10)
TriggerAddAction(gg_trg_InitGUI, Trig_InitGUI_Actions)
end

function Trig_StartIntro_Func002C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func004C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func006C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func008C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func010C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func012C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func014C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func016C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func018C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func020C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func022C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func025C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func027C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func029C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func031C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func033C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func035C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func037C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func039C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func041C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func043C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func046C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func048C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func050C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Func052C()
if (not (udg_PressESC == true)) then
return false
end
return true
end

function Trig_StartIntro_Actions()
EnableTrigger(gg_trg_SkipIntro)
if (Trig_StartIntro_Func002C()) then
return 
else
end
CinematicModeBJ(true, GetPlayersAll())
if (Trig_StartIntro_Func004C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_OnPeonsandTrall, Player(0), 0)
if (Trig_StartIntro_Func006C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_627", gg_snd_Intro1, "TRIGSTR_628", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func008C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_OnPineRound, Player(0), 0.00)
if (Trig_StartIntro_Func010C()) then
return 
else
end
RotateCameraAroundLocBJ(360.00, GetRectCenter(gg_rct_Region_024), Player(0), 5.00)
if (Trig_StartIntro_Func012C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_629", gg_snd_Intro2, "TRIGSTR_630", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func014C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_OnPeons, Player(0), 0.00)
if (Trig_StartIntro_Func016C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_631", gg_snd_Intro3, "TRIGSTR_632", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func018C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_MindPeon, Player(0), 0.00)
if (Trig_StartIntro_Func020C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_opeo_0024, "TRIGSTR_633", nil, "TRIGSTR_634", bj_TIMETYPE_ADD, 3.00, true)
if (Trig_StartIntro_Func022C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_TrallSteal, Player(0), 0.00)
    CreateCardFrame()
if (Trig_StartIntro_Func025C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_635", gg_snd_Intro4, "TRIGSTR_636", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func027C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_637", gg_snd_Intro5, "TRIGSTR_638", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func029C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_639", gg_snd_Intro6, "TRIGSTR_640", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func031C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_641", gg_snd_Intro7, "TRIGSTR_642", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func033C()) then
return 
else
end
SetUnitAnimation(gg_unit_opeo_0013, "Death")
if (Trig_StartIntro_Func035C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_643", gg_snd_Intro8, "TRIGSTR_644", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func037C()) then
return 
else
end
SetUnitAnimation(gg_unit_opeo_0014, "Death")
if (Trig_StartIntro_Func039C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_645", gg_snd_Intro9, "TRIGSTR_646", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func041C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_Vine, Player(0), 0.00)
if (Trig_StartIntro_Func043C()) then
return 
else
end
SetUnitAnimation(gg_unit_opeo_0015, "Death")
    BlzFrameSetVisible(CardBox,false)
if (Trig_StartIntro_Func046C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_647", gg_snd_Intro10, "TRIGSTR_648", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func048C()) then
return 
else
end
CameraSetupApplyForPlayer(true, gg_cam_TrallSteal, Player(0), 0.00)
if (Trig_StartIntro_Func050C()) then
return 
else
end
TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_Oths_0011, "TRIGSTR_649", gg_snd_Intro11, "TRIGSTR_650", bj_TIMETYPE_ADD, 0.00, true)
if (Trig_StartIntro_Func052C()) then
return 
else
end
TriggerExecute(gg_trg_SkipIntro)
end

function InitTrig_StartIntro()
gg_trg_StartIntro = CreateTrigger()
TriggerRegisterTimerEventSingle(gg_trg_StartIntro, 0.01)
TriggerAddAction(gg_trg_StartIntro, Trig_StartIntro_Actions)
end

function Trig_SkipIntro_Actions()
    BlzFrameSetVisible(CardBox,false)
udg_PressESC = true
DisableTrigger(GetTriggeringTrigger())
DisableTrigger(gg_trg_StartIntro)
CameraSetupApplyForPlayer(true, gg_cam_ResetCam, Player(0), 1.00)
CinematicModeBJ(false, GetPlayersAll())
    CreateWASDActions()
EnablePreSelect(false, false)
    InitMenu()
    FREE_CAMERA=false
    PlayMonoSpeech("Speech\\Peon\\OpyatOnRaskomandovalsa","  ")
end

function InitTrig_SkipIntro()
gg_trg_SkipIntro = CreateTrigger()
DisableTrigger(gg_trg_SkipIntro)
TriggerRegisterPlayerEventEndCinematic(gg_trg_SkipIntro, Player(0))
TriggerAddAction(gg_trg_SkipIntro, Trig_SkipIntro_Actions)
end

function Trig_ESCTEST_Actions()
end

function InitTrig_ESCTEST()
gg_trg_ESCTEST = CreateTrigger()
TriggerRegisterPlayerEventEndCinematic(gg_trg_ESCTEST, Player(0))
TriggerAddAction(gg_trg_ESCTEST, Trig_ESCTEST_Actions)
end

function InitCustomTriggers()
InitTrig_Error15Out()
InitTrig_Error15OutNAZAR()
InitTrig_Victory15()
InitTrig_ExitFrom15()
InitTrig_InitRoom15()
InitTrig_InitRoom14()
InitTrig_Leave14Fix()
InitTrig_ExitFrom14()
InitTrig_Victory14()
InitTrig_InitRoom13()
InitTrig_Victory13()
InitTrig_ExitFrom13()
InitTrig_Leave13Fix()
InitTrig_InitRoom12()
InitTrig_PlatformUp12()
InitTrig_Single12()
InitTrig_Victory12()
InitTrig_Restore12()
InitTrig_ExitFrom12()
InitTrig_Patrol12()
InitTrig_Button1101()
InitTrig_Button1102()
InitTrig_Button1103()
InitTrig_Button1101Restore()
InitTrig_Button1102Restore()
InitTrig_Button1103Restore()
InitTrig_Victory()
InitTrig_CreateFoorInRoom11()
InitTrig_InitRoom11DownForRegion()
InitTrig_ExitFrom11()
InitTrig_Out11()
InitTrig_ExitFrom10()
InitTrig_Victory10()
InitTrig_Error10In()
InitTrig_Error10Out()
InitTrig_ExitFrom09()
InitTrig_InitRoom09()
InitTrig_Victory09()
InitTrig_OffHole()
InitTrig_InitCustomTraps()
InitTrig_ExitFrom08()
InitTrig_Resize08()
InitTrig_Victory08()
InitTrig_ExitFrom07()
InitTrig_InitOrders()
InitTrig_DieCHK()
InitTrig_ErrorClear()
InitTrig_ExitFrom06()
InitTrig_Victory06()
InitTrig_InvulPudges()
InitTrig_ExitFrom05()
InitTrig_Victory05()
InitTrig_Init04()
InitTrig_ExitFrom04()
InitTrig_Victory04()
InitTrig_ExitFrom03()
InitTrig_Victory03()
InitTrig_ExitFrom02()
InitTrig_Victory02()
InitTrig_ExitFrom01()
InitTrig_Victory01()
InitTrig_ExitFrom00()
InitTrig_Victory00()
InitTrig_StartBrainGame()
InitTrig_SpawnBarrel()
InitTrig_InitBossRoom()
InitTrig_EndSinematicStart()
InitTrig_EnterAnimeArena()
InitTrig_ExitAnimeArena()
InitTrig_InitAnimeArena()
InitTrig_NudeCinematic()
InitTrig_SkipNude()
InitTrig_DeathNudeFriend()
InitTrig_InitYetty()
InitTrig_StartYettyCinematic()
InitTrig_SkipYetty()
InitTrig_InitEggs()
InitTrig_Task()
InitTrig_WisDead()
InitTrig_InitMerchantQuest()
InitTrig_MerchQuestCinematic()
InitTrig_MerchEndCinematic1()
InitTrig_SkipMerchCinematic()
InitTrig_EndBoss()
InitTrig_StartDragonCinematic()
InitTrig_SkipDragon()
InitTrig_Cum()
InitTrig_FromWolfCave()
InitTrig_ExitWolf()
InitTrig_ExitOnWolf()
InitTrig_DeathWolf()
InitTrig_WolfCinematic()
InitTrig_SkipWolf()
InitTrig_SkipWolfESC()
InitTrig_BoundEnter()
InitTrig_BoundEnterOnce()
InitTrig_Exit()
InitTrig_InitGUI()
InitTrig_StartIntro()
InitTrig_SkipIntro()
InitTrig_ESCTEST()
end

function RunInitializationTriggers()
ConditionalTriggerExecute(gg_trg_Patrol12)
ConditionalTriggerExecute(gg_trg_InitOrders)
ConditionalTriggerExecute(gg_trg_InvulPudges)
ConditionalTriggerExecute(gg_trg_InitAnimeArena)
ConditionalTriggerExecute(gg_trg_InitMerchantQuest)
end

function InitCustomPlayerSlots()
SetPlayerStartLocation(Player(0), 0)
SetPlayerColor(Player(0), ConvertPlayerColor(0))
SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
SetPlayerRaceSelectable(Player(0), true)
SetPlayerController(Player(0), MAP_CONTROL_USER)
end

function InitCustomTeams()
SetPlayerTeam(Player(0), 0)
end

function main()
SetCameraBounds(-14336.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -14336.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 18432.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 10240.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -14336.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 10240.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 18432.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -14336.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
SetTerrainFogEx(0, 0.0, 5000.0, 0.500, 0.086, 0.043, 0.275)
NewSoundEnvironment("Default")
SetAmbientDaySound("LordaeronWinterDay")
SetAmbientNightSound("LordaeronWinterNight")
SetMapMusic("Music", true, 0)
InitSounds()
CreateRegions()
CreateCameras()
CreateAllDestructables()
CreateAllUnits()
InitBlizzard()
InitGlobals()
InitCustomTriggers()
RunInitializationTriggers()
end

function config()
SetMapName("TRIGSTR_001")
SetMapDescription("TRIGSTR_003")
SetPlayers(1)
SetTeams(1)
SetGamePlacement(MAP_PLACEMENT_USE_MAP_SETTINGS)
DefineStartLocation(0, -384.0, -768.0)
InitCustomPlayerSlots()
SetPlayerSlotAvailable(Player(0), MAP_CONTROL_USER)
InitGenericPlayerSlots()
end

